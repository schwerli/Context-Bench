{
  "instance_id": "Multi-SWE-Bench__typescript__maintenance__bugfix__3cb539ec",
  "original_id": "mui__material-ui-34337",
  "1_model_selected_files": [
    "packages/mui-base/src/ButtonUnstyled/index.ts",
    "packages/mui-base/src/ButtonUnstyled/useButton.ts",
    "packages/mui-base/src/ButtonUnstyled/ButtonUnstyled.types.ts",
    "packages/mui-base/src/utils/useSlotProps.ts",
    "packages/mui-base/src/utils/resolveComponentProps.ts"
  ],
  "2_embedding_selected_files": [
    "packages/mui-base/src/ButtonUnstyled/useButton.ts",
    "packages/mui-base/src/ButtonUnstyled/ButtonUnstyled.types.ts",
    "packages/mui-base/src/PopperUnstyled/PopperUnstyled.js",
    "packages/mui-system/src/createStyled.test.js",
    "packages/mui-base/src/ButtonUnstyled/index.ts",
    "packages/mui-base/src/ButtonUnstyled/useButton.types.ts",
    "packages/mui-base/src/ModalUnstyled/ModalUnstyled.js",
    "packages/mui-base/src/SwitchUnstyled/index.ts",
    "packages/mui-base/src/SliderUnstyled/SliderUnstyled.js",
    "packages/mui-base/src/TabUnstyled/useTab.ts",
    "packages/mui-base/src/SwitchUnstyled/SwitchUnstyled.types.ts",
    "packages/mui-base/src/ButtonUnstyled/buttonUnstyledClasses.ts",
    "packages/mui-base/src/SwitchUnstyled/useSwitch.ts",
    "packages/mui-base/src/PopperUnstyled/PopperUnstyled.d.ts",
    "packages/mui-base/src/TabUnstyled/TabUnstyled.types.ts",
    "packages/mui-base/src/MenuItemUnstyled/useMenuItem.ts",
    "packages/mui-base/src/OptionUnstyled/index.ts",
    "packages/mui-base/src/ModalUnstyled/ModalUnstyled.test.js",
    "packages/mui-base/src/PopperUnstyled/index.js",
    "packages/mui-base/src/MenuUnstyled/MenuUnstyled.types.ts",
    "packages/mui-base/src/InputUnstyled/index.ts",
    "packages/mui-base/src/index.js",
    "packages/mui-base/src/TabUnstyled/index.ts",
    "packages/mui-system/src/createStyled.js",
    "packages/mui-base/src/SelectUnstyled/index.ts",
    "packages/mui-base/src/FormControlUnstyled/index.ts",
    "packages/mui-base/src/SelectUnstyled/SelectUnstyled.types.ts",
    "packages/mui-base/src/InputUnstyled/useInput.ts",
    "packages/mui-base/src/ModalUnstyled/index.js",
    "packages/mui-base/src/MenuItemUnstyled/MenuItemUnstyled.types.ts",
    "packages/mui-base/src/InputUnstyled/InputUnstyled.types.ts",
    "packages/mui-base/src/SliderUnstyled/SliderUnstyled.test.js",
    "packages/mui-base/src/OptionUnstyled/OptionUnstyled.types.ts",
    "packages/mui-base/src/SwitchUnstyled/switchUnstyledClasses.ts",
    "packages/mui-base/src/TabsListUnstyled/useTabsList.ts",
    "packages/mui-base/src/ModalUnstyled/ModalUnstyled.types.ts",
    "packages/mui-base/src/TabsUnstyled/index.ts",
    "packages/mui-base/src/SelectUnstyled/SelectUnstyledContext.ts",
    "packages/mui-base/src/PopperUnstyled/PopperUnstyled.test.js",
    "packages/mui-base/src/FormControlUnstyled/FormControlUnstyledContext.ts",
    "packages/mui-base/src/TablePaginationUnstyled/TablePaginationActionsUnstyled.types.ts",
    "packages/mui-base/src/TabsUnstyled/TabsUnstyled.types.ts",
    "packages/mui-system/src/styled.test.js",
    "packages/mui-base/src/AutocompleteUnstyled/useAutocomplete.test.js",
    "packages/mui-base/src/TabUnstyled/useTab.types.ts",
    "packages/mui-base/src/TabPanelUnstyled/index.ts",
    "packages/mui-base/src/index.d.ts",
    "packages/mui-base/src/TabsListUnstyled/index.ts",
    "packages/mui-base/src/SwitchUnstyled/useSwitch.types.ts",
    "packages/mui-base/src/SliderUnstyled/index.js",
    "packages/mui-base/src/BadgeUnstyled/index.ts",
    "packages/mui-base/src/FormControlUnstyled/FormControlUnstyled.types.ts",
    "packages/mui-base/src/SliderUnstyled/SliderValueLabelUnstyled.js",
    "packages/mui-base/src/ModalUnstyled/ModalUnstyled.d.ts",
    "packages/mui-base/src/PopperUnstyled/index.d.ts",
    "packages/mui-base/src/OptionGroupUnstyled/index.ts"
  ],
  "3_final_combined_files": [
    "packages/mui-base/src/ButtonUnstyled/useButton.ts",
    "packages/mui-base/src/ButtonUnstyled/ButtonUnstyled.types.ts",
    "packages/mui-base/src/ButtonUnstyled/index.ts",
    "packages/mui-base/src/PopperUnstyled/PopperUnstyled.js"
  ],
  "4_related_elements": {
    "packages/mui-base/src/ButtonUnstyled/useButton.ts": [
      "function: useButton\nfunction: getRootProps\nfunction: isNativeButton\nfunction: updateHostElementName\nvariable: hostElementName\nvariable: buttonProps\nvariable: href\nvariable: to\nvariable: type\nvariable: buttonRef\nvariable: handleRef"
    ],
    "packages/mui-base/src/ButtonUnstyled/ButtonUnstyled.types.ts": [
      ""
    ],
    "packages/mui-base/src/ButtonUnstyled/index.ts": [
      ""
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "packages/mui-base/src/ButtonUnstyled/useButton.ts": [
          "line: 206"
        ],
        "packages/mui-base/src/ButtonUnstyled/ButtonUnstyled.types.ts": [
          ""
        ],
        "packages/mui-base/src/ButtonUnstyled/index.ts": [
          ""
        ]
      },
      "patches": [
        "diff --git a/packages/mui-base/src/ButtonUnstyled/useButton.ts b/packages/mui-base/src/ButtonUnstyled/useButton.ts\nindex 1f8a4c4..c3d15ee 100644\n--- a/packages/mui-base/src/ButtonUnstyled/useButton.ts\n+++ b/packages/mui-base/src/ButtonUnstyled/useButton.ts\n@@ -203,9 +203,10 @@ export default function useButton(parameters: UseButtonParameters) {\n     delete externalEventHandlers.onFocusVisible;\n \n     return {\n-      type,\n+      ...(props.href || props.to ? {} : { type }),\n       ...externalEventHandlers,\n       ...buttonProps,\n+      ...(props.href || props.to ? { role: undefined } : {}),\n       onBlur: createHandleBlur(externalEventHandlers),\n       onClick: createHandleClick(externalEventHandlers),\n       onFocus: createHandleFocus(externalEventHandlers),\n"
      ],
      "edit_loc_traj": {
        "prompt": "\nPlease review the following GitHub problem description and relevant files, and provide a set of locations that need to be edited to fix the issue.\nThe locations can be specified as class names, function or method names, or exact line numbers that require modification.\n\n### GitHub Problem Description ###\n[ButtonUnstyled] Render as `a` if `href` prop is provided\nIf neither `component`, nor `components.Root` are provided and `href` or `to` props are present, the default rendered element should be `a` instead of `button` (as per https://github.com/mui/material-ui/pull/32403#pullrequestreview-976943341).\n\n###\n### packages/mui-base/src/ButtonUnstyled/useButton.ts\n1|import * as React from 'react';\n2|import {\n3|  unstable_useForkRef as useForkRef,\n4|  unstable_useIsFocusVisible as useIsFocusVisible,\n5|} from '@mui/utils';\n6|import { UseButtonParameters, UseButtonRootSlotProps } from './useButton.types';\n7|import extractEventHandlers from '../utils/extractEventHandlers';\n8|import { EventHandlers } from '../utils/types';\n9|\n10|export default function useButton(parameters: UseButtonParameters) {\n11|  const {\n12|    disabled = false,\n13|    focusableWhenDisabled,\n14|    href,\n15|    ref: externalRef,\n16|    tabIndex,\n17|    to,\n18|    type,\n19|  } = parameters;\n20|  const buttonRef = React.useRef<HTMLButtonElement | HTMLAnchorElement | HTMLElement>();\n21|\n22|  const [active, setActive] = React.useState<boolean>(false);\n23|\n24|  const {\n25|    isFocusVisibleRef,\n26|    onFocus: handleFocusVisible,\n27|    onBlur: handleBlurVisible,\n28|    ref: focusVisibleRef,\n29|  } = useIsFocusVisible();\n30|\n31|  const [focusVisible, setFocusVisible] = React.useState(false);\n32|  if (disabled && !focusableWhenDisabled && focusVisible) {\n33|    setFocusVisible(false);\n34|  }\n35|\n36|  React.useEffect(() => {\n37|    isFocusVisibleRef.current = focusVisible;\n38|  }, [focusVisible, isFocusVisibleRef]);\n39|\n40|  const [hostElementName, setHostElementName] = React.useState<string>('');\n41|\n42|  const createHandleMouseLeave = (otherHandlers: EventHandlers) => (event: React.MouseEvent) => {\n43|    if (focusVisible) {\n44|      event.preventDefault();\n45|    }\n46|\n47|    otherHandlers.onMouseLeave?.(event);\n48|  };\n49|\n50|  const createHandleBlur = (otherHandlers: EventHandlers) => (event: React.FocusEvent) => {\n51|    handleBlurVisible(event);\n52|\n53|    if (isFocusVisibleRef.current === false) {\n54|      setFocusVisible(false);\n55|    }\n56|\n57|    otherHandlers.onBlur?.(event);\n58|  };\n59|\n60|  const createHandleFocus =\n61|    (otherHandlers: EventHandlers) => (event: React.FocusEvent<HTMLButtonElement>) => {\n62|      // Fix for https://github.com/facebook/react/issues/7769\n63|      if (!buttonRef.current) {\n64|        buttonRef.current = event.currentTarget;\n65|      }\n66|\n67|      handleFocusVisible(event);\n68|      if (isFocusVisibleRef.current === true) {\n69|        setFocusVisible(true);\n70|        otherHandlers.onFocusVisible?.(event);\n71|      }\n72|\n73|      otherHandlers.onFocus?.(event);\n74|    };\n75|\n76|  const isNativeButton = () => {\n77|    const button = buttonRef.current;\n78|\n79|    return (\n80|      hostElementName === 'BUTTON' ||\n81|      (hostElementName === 'INPUT' &&\n82|        ['button', 'submit', 'reset'].includes((button as HTMLInputElement)?.type)) ||\n83|      (hostElementName === 'A' && (button as HTMLAnchorElement)?.href)\n84|    );\n85|  };\n86|\n87|  const createHandleClick = (otherHandlers: EventHandlers) => (event: React.MouseEvent) => {\n88|    if (!disabled) {\n89|      otherHandlers.onClick?.(event);\n90|    }\n91|  };\n92|\n93|  const createHandleMouseDown = (otherHandlers: EventHandlers) => (event: React.MouseEvent) => {\n94|    if (event.target === event.currentTarget && !disabled) {\n95|      setActive(true);\n96|    }\n97|\n98|    otherHandlers.onMouseDown?.(event);\n99|  };\n100|\n101|  const createHandleMouseUp = (otherHandlers: EventHandlers) => (event: React.MouseEvent) => {\n102|    if (event.target === event.currentTarget) {\n103|      setActive(false);\n104|    }\n105|\n106|    otherHandlers.onMouseUp?.(event);\n107|  };\n108|\n109|  const createHandleKeyDown = (otherHandlers: EventHandlers) => (event: React.KeyboardEvent) => {\n110|    otherHandlers.onKeyDown?.(event);\n111|\n112|    if (event.defaultPrevented) {\n113|      return;\n114|    }\n115|\n116|    if (event.target === event.currentTarget && !isNativeButton() && event.key === ' ') {\n117|      event.preventDefault();\n118|    }\n119|\n120|    if (event.target === event.currentTarget && event.key === ' ' && !disabled) {\n121|      setActive(true);\n122|    }\n123|\n124|    // Keyboard accessibility for non interactive elements\n125|    if (\n126|      event.target === event.currentTarget &&\n127|      !isNativeButton() &&\n128|      event.key === 'Enter' &&\n129|      !disabled\n130|    ) {\n131|      otherHandlers.onClick?.(event);\n132|      event.preventDefault();\n133|    }\n134|  };\n135|\n136|  const createHandleKeyUp = (otherHandlers: EventHandlers) => (event: React.KeyboardEvent) => {\n137|    // calling preventDefault in keyUp on a <button> will not dispatch a click event if Space is pressed\n138|    // https://codesandbox.io/s/button-keyup-preventdefault-dn7f0\n139|\n140|    if (event.target === event.currentTarget) {\n141|      setActive(false);\n142|    }\n143|\n144|    otherHandlers.onKeyUp?.(event);\n145|\n146|    // Keyboard accessibility for non interactive elements\n147|    if (\n148|      event.target === event.currentTarget &&\n149|      !isNativeButton() &&\n150|      !disabled &&\n151|      event.key === ' ' &&\n152|      !event.defaultPrevented\n153|    ) {\n154|      otherHandlers.onClick?.(event);\n155|    }\n156|  };\n157|\n158|  const updateHostElementName = React.useCallback((instance: HTMLElement | null) => {\n159|    setHostElementName(instance?.tagName ?? '');\n160|  }, []);\n161|\n162|  const handleRef = useForkRef(updateHostElementName, externalRef, focusVisibleRef, buttonRef);\n163|\n164|  interface AdditionalButtonProps {\n165|    type?: React.ButtonHTMLAttributes<HTMLButtonElement>['type'];\n166|    disabled?: boolean;\n167|    role?: React.AriaRole;\n168|    'aria-disabled'?: React.AriaAttributes['aria-disabled'];\n169|    tabIndex?: number;\n170|  }\n171|\n172|  const buttonProps: AdditionalButtonProps = {};\n173|\n174|  if (hostElementName === 'BUTTON') {\n175|    buttonProps.type = type ?? 'button';\n176|    if (focusableWhenDisabled) {\n177|      buttonProps['aria-disabled'] = disabled;\n178|    } else {\n179|      buttonProps.disabled = disabled;\n180|    }\n181|  } else if (hostElementName !== '') {\n182|    if (!href && !to) {\n183|      buttonProps.role = 'button';\n184|      buttonProps.tabIndex = tabIndex ?? 0;\n185|    }\n186|    if (disabled) {\n187|      buttonProps['aria-disabled'] = disabled as boolean;\n188|      buttonProps.tabIndex = focusableWhenDisabled ? tabIndex ?? 0 : -1;\n189|    }\n190|  }\n191|\n192|  const getRootProps = <TOther extends EventHandlers = {}>(\n193|    otherHandlers: TOther = {} as TOther,\n194|  ): UseButtonRootSlotProps<TOther> => {\n195|    const propsEventHandlers = extractEventHandlers(parameters) as Partial<UseButtonParameters>;\n196|    const externalEventHandlers = {\n197|      ...propsEventHandlers,\n198|      ...otherHandlers,\n199|    };\n200|\n201|    // onFocusVisible can be present on the props, but since it's not a valid React event handler,\n202|    // it must not be forwarded to the inner component.\n203|    delete externalEventHandlers.onFocusVisible;\n204|\n205|    return {\n206|      type,\n207|      ...externalEventHandlers,\n208|      ...buttonProps,\n209|      onBlur: createHandleBlur(externalEventHandlers),\n210|      onClick: createHandleClick(externalEventHandlers),\n211|      onFocus: createHandleFocus(externalEventHandlers),\n212|      onKeyDown: createHandleKeyDown(externalEventHandlers),\n213|      onKeyUp: createHandleKeyUp(externalEventHandlers),\n214|      onMouseDown: createHandleMouseDown(externalEventHandlers),\n215|      onMouseLeave: createHandleMouseLeave(externalEventHandlers),\n216|      onMouseUp: createHandleMouseUp(externalEventHandlers),\n217|      ref: handleRef,\n218|    };\n219|  };\n220|\n221|  return {\n222|    getRootProps,\n223|    focusVisible,\n224|    setFocusVisible,\n225|    disabled,\n226|    active,\n227|  };\n228|}\n\n\n\n\n###\n\nPlease provide the class name, function or method name, or the exact line numbers that need to be edited.\nThe possible location outputs should be either \"class\", \"function\" or \"line\".\n\n### Examples:\n```\nfull_path1/file1.ts\nline: 10\nclass: MyClass1\nline: 51\n\nfull_path2/file2.ts\nfunction: MyClass2.my_method\nline: 12\n\nfull_path3/file3.ts\nfunction: my_function\nline: 24\nline: 156\n```\n\nReturn just the location(s) wrapped with ```.\n",
        "response": [
          "```\npackages/mui-base/src/ButtonUnstyled/ButtonUnstyled.tsx\nfunction: ButtonUnstyled\n\npackages/mui-base/src/ButtonUnstyled/useButton.ts\nline: 206\n```",
          "```\npackages/mui-base/src/ButtonUnstyled/ButtonUnstyled.tsx\nfunction: ButtonUnstyled\n```"
        ],
        "usage": {
          "completion_tokens": 0,
          "prompt_tokens": 0
        }
      },
      "additional_artifact_loc_edit_location": [
        {
          "raw_output_loc": [
            "```\npackages/mui-base/src/ButtonUnstyled/ButtonUnstyled.tsx\nfunction: ButtonUnstyled\n\npackages/mui-base/src/ButtonUnstyled/useButton.ts\nline: 206\n```",
            "```\npackages/mui-base/src/ButtonUnstyled/ButtonUnstyled.tsx\nfunction: ButtonUnstyled\n```"
          ]
        }
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "packages/mui-base/src/ButtonUnstyled/useButton.ts": [
          ""
        ],
        "packages/mui-base/src/ButtonUnstyled/ButtonUnstyled.types.ts": [
          ""
        ],
        "packages/mui-base/src/ButtonUnstyled/index.ts": [
          ""
        ]
      },
      "patches": [
        "diff --git a/packages/mui-base/src/ButtonUnstyled/useButton.ts b/packages/mui-base/src/ButtonUnstyled/useButton.ts\nindex 1f8a4c4..ff444da 100644\n--- a/packages/mui-base/src/ButtonUnstyled/useButton.ts\n+++ b/packages/mui-base/src/ButtonUnstyled/useButton.ts\n@@ -203,7 +203,6 @@ export default function useButton(parameters: UseButtonParameters) {\n     delete externalEventHandlers.onFocusVisible;\n \n     return {\n-      type,\n       ...externalEventHandlers,\n       ...buttonProps,\n       onBlur: createHandleBlur(externalEventHandlers),\n"
      ],
      "edit_loc_traj": {
        "prompt": "\nPlease review the following GitHub problem description and relevant files, and provide a set of locations that need to be edited to fix the issue.\nThe locations can be specified as class names, function or method names, or exact line numbers that require modification.\n\n### GitHub Problem Description ###\n[ButtonUnstyled] Render as `a` if `href` prop is provided\nIf neither `component`, nor `components.Root` are provided and `href` or `to` props are present, the default rendered element should be `a` instead of `button` (as per https://github.com/mui/material-ui/pull/32403#pullrequestreview-976943341).\n\n###\n### packages/mui-base/src/ButtonUnstyled/useButton.ts\n1|import * as React from 'react';\n2|import {\n3|  unstable_useForkRef as useForkRef,\n4|  unstable_useIsFocusVisible as useIsFocusVisible,\n5|} from '@mui/utils';\n6|import { UseButtonParameters, UseButtonRootSlotProps } from './useButton.types';\n7|import extractEventHandlers from '../utils/extractEventHandlers';\n8|import { EventHandlers } from '../utils/types';\n9|\n10|export default function useButton(parameters: UseButtonParameters) {\n11|  const {\n12|    disabled = false,\n13|    focusableWhenDisabled,\n14|    href,\n15|    ref: externalRef,\n16|    tabIndex,\n17|    to,\n18|    type,\n19|  } = parameters;\n20|  const buttonRef = React.useRef<HTMLButtonElement | HTMLAnchorElement | HTMLElement>();\n21|\n22|  const [active, setActive] = React.useState<boolean>(false);\n23|\n24|  const {\n25|    isFocusVisibleRef,\n26|    onFocus: handleFocusVisible,\n27|    onBlur: handleBlurVisible,\n28|    ref: focusVisibleRef,\n29|  } = useIsFocusVisible();\n30|\n31|  const [focusVisible, setFocusVisible] = React.useState(false);\n32|  if (disabled && !focusableWhenDisabled && focusVisible) {\n33|    setFocusVisible(false);\n34|  }\n35|\n36|  React.useEffect(() => {\n37|    isFocusVisibleRef.current = focusVisible;\n38|  }, [focusVisible, isFocusVisibleRef]);\n39|\n40|  const [hostElementName, setHostElementName] = React.useState<string>('');\n41|\n42|  const createHandleMouseLeave = (otherHandlers: EventHandlers) => (event: React.MouseEvent) => {\n43|    if (focusVisible) {\n44|      event.preventDefault();\n45|    }\n46|\n47|    otherHandlers.onMouseLeave?.(event);\n48|  };\n49|\n50|  const createHandleBlur = (otherHandlers: EventHandlers) => (event: React.FocusEvent) => {\n51|    handleBlurVisible(event);\n52|\n53|    if (isFocusVisibleRef.current === false) {\n54|      setFocusVisible(false);\n55|    }\n56|\n57|    otherHandlers.onBlur?.(event);\n58|  };\n59|\n60|  const createHandleFocus =\n61|    (otherHandlers: EventHandlers) => (event: React.FocusEvent<HTMLButtonElement>) => {\n62|      // Fix for https://github.com/facebook/react/issues/7769\n63|      if (!buttonRef.current) {\n64|        buttonRef.current = event.currentTarget;\n65|      }\n66|\n67|      handleFocusVisible(event);\n68|      if (isFocusVisibleRef.current === true) {\n69|        setFocusVisible(true);\n70|        otherHandlers.onFocusVisible?.(event);\n71|      }\n72|\n73|      otherHandlers.onFocus?.(event);\n74|    };\n75|\n76|  const isNativeButton = () => {\n77|    const button = buttonRef.current;\n78|\n79|    return (\n80|      hostElementName === 'BUTTON' ||\n81|      (hostElementName === 'INPUT' &&\n82|        ['button', 'submit', 'reset'].includes((button as HTMLInputElement)?.type)) ||\n83|      (hostElementName === 'A' && (button as HTMLAnchorElement)?.href)\n84|    );\n85|  };\n86|\n87|  const createHandleClick = (otherHandlers: EventHandlers) => (event: React.MouseEvent) => {\n88|    if (!disabled) {\n89|      otherHandlers.onClick?.(event);\n90|    }\n91|  };\n92|\n93|  const createHandleMouseDown = (otherHandlers: EventHandlers) => (event: React.MouseEvent) => {\n94|    if (event.target === event.currentTarget && !disabled) {\n95|      setActive(true);\n96|    }\n97|\n98|    otherHandlers.onMouseDown?.(event);\n99|  };\n100|\n101|  const createHandleMouseUp = (otherHandlers: EventHandlers) => (event: React.MouseEvent) => {\n102|    if (event.target === event.currentTarget) {\n103|      setActive(false);\n104|    }\n105|\n106|    otherHandlers.onMouseUp?.(event);\n107|  };\n108|\n109|  const createHandleKeyDown = (otherHandlers: EventHandlers) => (event: React.KeyboardEvent) => {\n110|    otherHandlers.onKeyDown?.(event);\n111|\n112|    if (event.defaultPrevented) {\n113|      return;\n114|    }\n115|\n116|    if (event.target === event.currentTarget && !isNativeButton() && event.key === ' ') {\n117|      event.preventDefault();\n118|    }\n119|\n120|    if (event.target === event.currentTarget && event.key === ' ' && !disabled) {\n121|      setActive(true);\n122|    }\n123|\n124|    // Keyboard accessibility for non interactive elements\n125|    if (\n126|      event.target === event.currentTarget &&\n127|      !isNativeButton() &&\n128|      event.key === 'Enter' &&\n129|      !disabled\n130|    ) {\n131|      otherHandlers.onClick?.(event);\n132|      event.preventDefault();\n133|    }\n134|  };\n135|\n136|  const createHandleKeyUp = (otherHandlers: EventHandlers) => (event: React.KeyboardEvent) => {\n137|    // calling preventDefault in keyUp on a <button> will not dispatch a click event if Space is pressed\n138|    // https://codesandbox.io/s/button-keyup-preventdefault-dn7f0\n139|\n140|    if (event.target === event.currentTarget) {\n141|      setActive(false);\n142|    }\n143|\n144|    otherHandlers.onKeyUp?.(event);\n145|\n146|    // Keyboard accessibility for non interactive elements\n147|    if (\n148|      event.target === event.currentTarget &&\n149|      !isNativeButton() &&\n150|      !disabled &&\n151|      event.key === ' ' &&\n152|      !event.defaultPrevented\n153|    ) {\n154|      otherHandlers.onClick?.(event);\n155|    }\n156|  };\n157|\n158|  const updateHostElementName = React.useCallback((instance: HTMLElement | null) => {\n159|    setHostElementName(instance?.tagName ?? '');\n160|  }, []);\n161|\n162|  const handleRef = useForkRef(updateHostElementName, externalRef, focusVisibleRef, buttonRef);\n163|\n164|  interface AdditionalButtonProps {\n165|    type?: React.ButtonHTMLAttributes<HTMLButtonElement>['type'];\n166|    disabled?: boolean;\n167|    role?: React.AriaRole;\n168|    'aria-disabled'?: React.AriaAttributes['aria-disabled'];\n169|    tabIndex?: number;\n170|  }\n171|\n172|  const buttonProps: AdditionalButtonProps = {};\n173|\n174|  if (hostElementName === 'BUTTON') {\n175|    buttonProps.type = type ?? 'button';\n176|    if (focusableWhenDisabled) {\n177|      buttonProps['aria-disabled'] = disabled;\n178|    } else {\n179|      buttonProps.disabled = disabled;\n180|    }\n181|  } else if (hostElementName !== '') {\n182|    if (!href && !to) {\n183|      buttonProps.role = 'button';\n184|      buttonProps.tabIndex = tabIndex ?? 0;\n185|    }\n186|    if (disabled) {\n187|      buttonProps['aria-disabled'] = disabled as boolean;\n188|      buttonProps.tabIndex = focusableWhenDisabled ? tabIndex ?? 0 : -1;\n189|    }\n190|  }\n191|\n192|  const getRootProps = <TOther extends EventHandlers = {}>(\n193|    otherHandlers: TOther = {} as TOther,\n194|  ): UseButtonRootSlotProps<TOther> => {\n195|    const propsEventHandlers = extractEventHandlers(parameters) as Partial<UseButtonParameters>;\n196|    const externalEventHandlers = {\n197|      ...propsEventHandlers,\n198|      ...otherHandlers,\n199|    };\n200|\n201|    // onFocusVisible can be present on the props, but since it's not a valid React event handler,\n202|    // it must not be forwarded to the inner component.\n203|    delete externalEventHandlers.onFocusVisible;\n204|\n205|    return {\n206|      type,\n207|      ...externalEventHandlers,\n208|      ...buttonProps,\n209|      onBlur: createHandleBlur(externalEventHandlers),\n210|      onClick: createHandleClick(externalEventHandlers),\n211|      onFocus: createHandleFocus(externalEventHandlers),\n212|      onKeyDown: createHandleKeyDown(externalEventHandlers),\n213|      onKeyUp: createHandleKeyUp(externalEventHandlers),\n214|      onMouseDown: createHandleMouseDown(externalEventHandlers),\n215|      onMouseLeave: createHandleMouseLeave(externalEventHandlers),\n216|      onMouseUp: createHandleMouseUp(externalEventHandlers),\n217|      ref: handleRef,\n218|    };\n219|  };\n220|\n221|  return {\n222|    getRootProps,\n223|    focusVisible,\n224|    setFocusVisible,\n225|    disabled,\n226|    active,\n227|  };\n228|}\n\n\n\n\n###\n\nPlease provide the class name, function or method name, or the exact line numbers that need to be edited.\nThe possible location outputs should be either \"class\", \"function\" or \"line\".\n\n### Examples:\n```\nfull_path1/file1.ts\nline: 10\nclass: MyClass1\nline: 51\n\nfull_path2/file2.ts\nfunction: MyClass2.my_method\nline: 12\n\nfull_path3/file3.ts\nfunction: my_function\nline: 24\nline: 156\n```\n\nReturn just the location(s) wrapped with ```.\n",
        "response": [
          "```\npackages/mui-base/src/ButtonUnstyled/ButtonUnstyled.tsx\nfunction: ButtonUnstyled\n\npackages/mui-base/src/ButtonUnstyled/useButton.ts\nline: 206\n```",
          "```\npackages/mui-base/src/ButtonUnstyled/ButtonUnstyled.tsx\nfunction: ButtonUnstyled\n```"
        ],
        "usage": {
          "completion_tokens": 0,
          "prompt_tokens": 0
        }
      },
      "additional_artifact_loc_edit_location": [
        {
          "raw_output_loc": [
            "```\npackages/mui-base/src/ButtonUnstyled/ButtonUnstyled.tsx\nfunction: ButtonUnstyled\n\npackages/mui-base/src/ButtonUnstyled/useButton.ts\nline: 206\n```",
            "```\npackages/mui-base/src/ButtonUnstyled/ButtonUnstyled.tsx\nfunction: ButtonUnstyled\n```"
          ]
        }
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/packages/mui-base/src/ButtonUnstyled/useButton.ts b/packages/mui-base/src/ButtonUnstyled/useButton.ts\nindex 1f8a4c4..c3d15ee 100644\n--- a/packages/mui-base/src/ButtonUnstyled/useButton.ts\n+++ b/packages/mui-base/src/ButtonUnstyled/useButton.ts\n@@ -203,9 +203,10 @@ export default function useButton(parameters: UseButtonParameters) {\n     delete externalEventHandlers.onFocusVisible;\n \n     return {\n-      type,\n+      ...(props.href || props.to ? {} : { type }),\n       ...externalEventHandlers,\n       ...buttonProps,\n+      ...(props.href || props.to ? { role: undefined } : {}),\n       onBlur: createHandleBlur(externalEventHandlers),\n       onClick: createHandleClick(externalEventHandlers),\n       onFocus: createHandleFocus(externalEventHandlers),\n",
  "7_resolved": false
}