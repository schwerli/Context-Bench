{
  "instance_id": "Multi-SWE-Bench__typescript__maintenance__bugfix__41a5a6f5",
  "original_id": "mui__material-ui-34229",
  "1_model_selected_files": [
    "packages/mui-material/src/Select/SelectInput.js",
    "packages/mui-material/src/Select/Select.js",
    "packages/mui-material/src/InputBase/InputBase.js",
    "packages/mui-material/src/Menu/Menu.js"
  ],
  "2_embedding_selected_files": [
    "packages/mui-material/src/Select/Select.js",
    "packages/mui-material/src/Select/SelectInput.js",
    "packages/mui-material/src/NativeSelect/NativeSelectInput.js",
    "packages/mui-material/src/Select/Select.test.js",
    "packages/mui-material/src/Autocomplete/Autocomplete.js",
    "packages/mui-material/src/InputAdornment/InputAdornment.test.js",
    "packages/mui-material/src/InputAdornment/InputAdornment.js",
    "packages/mui-material/src/Popover/Popover.js",
    "packages/mui-material/src/Popover/Popover.test.js",
    "packages/mui-material/src/NativeSelect/NativeSelectInput.test.js",
    "packages/mui-material/src/InputLabel/InputLabel.js",
    "packages/mui-material/src/NativeSelect/NativeSelect.js",
    "packages/mui-material/src/Select/Select.d.ts",
    "packages/mui-material/src/InputBase/InputBase.test.js",
    "packages/mui-joy/src/Select/SelectProps.ts",
    "packages/mui-material/src/NativeSelect/NativeSelect.d.ts",
    "packages/mui-material/src/InputBase/InputBase.js",
    "packages/mui-codemod/src/v5.0.0/variant-prop.test/actual.js",
    "packages/mui-material/src/NativeSelect/NativeSelect.test.js",
    "packages/mui-codemod/src/v5.0.0/theme-spacing.test/large-actual.js",
    "packages/mui-codemod/src/v5.0.0/badge-overlap-value.test/actual.js",
    "packages/mui-material/src/Select/SelectInput.d.ts",
    "packages/mui-material/src/OutlinedInput/NotchedOutline.js",
    "packages/mui-material/src/Autocomplete/Autocomplete.test.js",
    "packages/mui-material/src/Tooltip/Tooltip.test.js",
    "packages/mui-material/src/InputAdornment/InputAdornment.d.ts",
    "packages/mui-material/src/Popover/Popover.d.ts",
    "packages/mui-codemod/src/v5.0.0/theme-spacing.test/large-expected.js",
    "packages/mui-material/src/FormControl/FormControl.test.js",
    "packages/mui-material/src/OutlinedInput/NotchedOutline.test.js",
    "packages/mui-material/src/FilledInput/FilledInput.js",
    "packages/mui-material/src/InputLabel/InputLabel.test.js",
    "packages/mui-material/src/Popper/Popper.test.js",
    "packages/mui-codemod/src/v5.0.0/variant-prop.test/expected.js"
  ],
  "3_final_combined_files": [
    "packages/mui-material/src/Select/SelectInput.js",
    "packages/mui-material/src/Select/Select.js",
    "packages/mui-material/src/InputBase/InputBase.js",
    "packages/mui-material/src/NativeSelect/NativeSelectInput.js"
  ],
  "4_related_elements": {
    "packages/mui-material/src/Select/SelectInput.js": [
      "function: SelectInput\nvariable: displayRef\nvariable: displayNode\nfunction: handleDisplayRef\nvariable: menuMinWidthState\nvariable: menuMinWidth\nfunction: update\nvariable: SelectSelect\nvariable: SelectNativeInput"
    ],
    "packages/mui-material/src/Select/Select.js": [
      "function: Select\nvariable: InputComponent\nvariable: inputComponent\nvariable: MenuProps"
    ],
    "packages/mui-material/src/InputBase/InputBase.js": [
      "class: InputBase\nvariable: InputBaseRoot\nvariable: rootOverridesResolver\nvariable: inputOverridesResolver\nvariable: startAdornment\nvariable: endAdornment"
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "packages/mui-material/src/Select/SelectInput.js": [
          "line: 176\nline: 219\nline: 481\nline: 482\nline: 549"
        ],
        "packages/mui-material/src/Select/Select.js": [
          ""
        ],
        "packages/mui-material/src/InputBase/InputBase.js": [
          ""
        ]
      },
      "patches": [
        "diff --git a/packages/mui-material/src/Select/SelectInput.js b/packages/mui-material/src/Select/SelectInput.js\nindex 86be44b..ece479e 100644\n--- a/packages/mui-material/src/Select/SelectInput.js\n+++ b/packages/mui-material/src/Select/SelectInput.js\n@@ -173,7 +173,11 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n   // Resize menu on `defaultOpen` automatic toggle.\n   React.useEffect(() => {\n     if (defaultOpen && openState && displayNode && !isOpenControlled) {\n-      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n+      setMenuMinWidthState(\n+        autoWidth\n+          ? null\n+          : (displayNode.parentElement ? displayNode.parentElement.clientWidth : displayNode.clientWidth),\n+      );\n       displayRef.current.focus();\n     }\n     // eslint-disable-next-line react-hooks/exhaustive-deps\n@@ -215,7 +219,11 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n     }\n \n     if (!isOpenControlled) {\n-      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n+      setMenuMinWidthState(\n+        autoWidth\n+          ? null\n+          : (displayNode.parentElement ? displayNode.parentElement.clientWidth : displayNode.clientWidth),\n+      );\n       setOpenState(open);\n     }\n   };\n@@ -479,7 +487,7 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n   let menuMinWidth = menuMinWidthState;\n \n   if (!autoWidth && isOpenControlled && displayNode) {\n-    menuMinWidth = displayNode.clientWidth;\n+    menuMinWidth = displayNode.parentElement ? displayNode.parentElement.clientWidth : displayNode.clientWidth;\n   }\n \n   let tabIndex;\n@@ -546,7 +554,7 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n       <SelectIcon as={IconComponent} className={classes.icon} ownerState={ownerState} />\n       <Menu\n         id={`menu-${name || ''}`}\n-        anchorEl={displayNode}\n+        anchorEl={displayNode ? (displayNode.parentElement || displayNode) : null}\n         open={open}\n         onClose={handleClose}\n         anchorOrigin={{\n",
        "diff --git a/packages/mui-material/src/Select/SelectInput.js b/packages/mui-material/src/Select/SelectInput.js\nindex 86be44b..c49eaaf 100644\n--- a/packages/mui-material/src/Select/SelectInput.js\n+++ b/packages/mui-material/src/Select/SelectInput.js\n@@ -173,7 +173,9 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n   // Resize menu on `defaultOpen` automatic toggle.\n   React.useEffect(() => {\n     if (defaultOpen && openState && displayNode && !isOpenControlled) {\n-      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n+      setMenuMinWidthState(\n+        autoWidth ? null : (displayNode.parentElement || displayNode).clientWidth,\n+      );\n       displayRef.current.focus();\n     }\n     // eslint-disable-next-line react-hooks/exhaustive-deps\n@@ -215,7 +217,9 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n     }\n \n     if (!isOpenControlled) {\n-      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n+      setMenuMinWidthState(\n+        autoWidth ? null : (displayNode.parentElement || displayNode).clientWidth,\n+      );\n       setOpenState(open);\n     }\n   };\n@@ -479,7 +483,7 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n   let menuMinWidth = menuMinWidthState;\n \n   if (!autoWidth && isOpenControlled && displayNode) {\n-    menuMinWidth = displayNode.clientWidth;\n+    menuMinWidth = (displayNode.parentElement || displayNode).clientWidth;\n   }\n \n   let tabIndex;\n@@ -546,16 +550,16 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n       <SelectIcon as={IconComponent} className={classes.icon} ownerState={ownerState} />\n       <Menu\n         id={`menu-${name || ''}`}\n-        anchorEl={displayNode}\n+        anchorEl={displayNode ? displayNode.parentElement : displayNode}\n         open={open}\n         onClose={handleClose}\n         anchorOrigin={{\n           vertical: 'bottom',\n-          horizontal: 'center',\n+          horizontal: 'left',\n         }}\n         transformOrigin={{\n           vertical: 'top',\n-          horizontal: 'center',\n+          horizontal: 'left',\n         }}\n         {...MenuProps}\n         MenuListProps={{\n"
      ],
      "edit_loc_traj": {
        "prompt": "\nPlease review the following GitHub problem description and relevant files, and provide a set of locations that need to be edited to fix the issue.\nThe locations can be specified as class names, function or method names, or exact line numbers that require modification.\n\n### GitHub Problem Description ###\nSelect's popover can be shorter than input because of adornments\n### Duplicates\n\n- [X] I have searched the existing issues\n\n### Latest version\n\n- [X] I have tested the latest version\n\n### Current behavior ðŸ˜¯\n\n![image](https://user-images.githubusercontent.com/17963791/171154553-a72df9ee-98a2-43f7-a9ec-a0e3989018c7.png)\r\n\n\n### Expected behavior ðŸ¤”\n\nLeft edge of the popover reaches left edge of the input\r\n\r\nFrom 0.5 seconds of looking at html, this might be a solution:\r\n![image](https://user-images.githubusercontent.com/17963791/171155097-862b6cd7-2bdf-4a3b-a42c-1e78c007a26a.png)\r\n\n\n### Steps to reproduce ðŸ•¹\n\n```tsx\r\n<Select\r\n\tfullWidth\r\n\tstartAdornment={\r\n\t\t<InputAdornment position=\"start\">\r\n\t\t\t<LanguageIcon />\r\n\t\t</InputAdornment>\r\n\t}\r\n>\r\n\t{[\"foo\", \"bar\"].map((opt) => (\r\n\t\t<MenuItem value={opt} key={opt}>\r\n\t\t\t{opt}\r\n\t\t</MenuItem>\r\n\t))}\r\n</Select>\r\n```\r\n\n\n### Context ðŸ”¦\n\n_No response_\n\n### Your environment ðŸŒŽ\n\n<details>\r\n  <summary>`npx @mui/envinfo`</summary>\r\n\r\n```\r\n  System:\r\n    OS: Windows 10 10.0.22000\r\n  Binaries:\r\n    Node: 17.9.0 - C:\\Program Files\\nodejs\\node.EXE\r\n    Yarn: 3.2.0 - ~\\AppData\\Roaming\\npm\\yarn.CMD\r\n    npm: 8.5.5 - C:\\Program Files\\nodejs\\npm.CMD\r\n  Browsers:\r\n    Chrome: Version 104.0.5094.0 (Official Build) canary (64-bit)\r\n  npmPackages:\r\n    @emotion/react: ^11.9.0 => 11.9.0\r\n    @emotion/styled: ^11.8.1 => 11.8.1\r\n    @mui/base:  5.0.0-alpha.82\r\n    @mui/icons-material: ^5.8.0 => 5.8.0\r\n    @mui/lab: ^5.0.0-alpha.83 => 5.0.0-alpha.83\r\n    @mui/material: ^5.8.1 => 5.8.1\r\n    @mui/private-theming:  5.8.0\r\n    @mui/styled-engine:  5.8.0\r\n    @mui/system:  5.8.1\r\n    @mui/types:  7.1.3\r\n    @mui/utils:  5.8.0\r\n    @mui/x-date-pickers:  5.0.0-alpha.1\r\n    @types/react: ^18.0.9 => 18.0.9\r\n    react: ^18.1.0 => 18.1.0\r\n    react-dom: ^18.1.0 => 18.1.0\r\n    typescript: ^4.7.2 => 4.7.2\r\n```\r\n</details>\r\n\n\n###\n### packages/mui-material/src/Select/SelectInput.js\n1|import * as React from 'react';\n2|import { isFragment } from 'react-is';\n3|import PropTypes from 'prop-types';\n4|import clsx from 'clsx';\n5|import MuiError from '@mui/utils/macros/MuiError.macro';\n6|import { unstable_composeClasses as composeClasses } from '@mui/base';\n7|import { refType } from '@mui/utils';\n8|import ownerDocument from '../utils/ownerDocument';\n9|import capitalize from '../utils/capitalize';\n10|import Menu from '../Menu/Menu';\n11|import {\n12|  nativeSelectSelectStyles,\n13|  nativeSelectIconStyles,\n14|} from '../NativeSelect/NativeSelectInput';\n15|import { isFilled } from '../InputBase/utils';\n16|import styled, { slotShouldForwardProp } from '../styles/styled';\n17|import useForkRef from '../utils/useForkRef';\n18|import useControlled from '../utils/useControlled';\n19|import selectClasses, { getSelectUtilityClasses } from './selectClasses';\n20|\n21|const SelectSelect = styled('div', {\n22|  name: 'MuiSelect',\n23|  slot: 'Select',\n24|  overridesResolver: (props, styles) => {\n25|    const { ownerState } = props;\n26|    return [\n27|      // Win specificity over the input base\n28|      { [`&.${selectClasses.select}`]: styles.select },\n29|      { [`&.${selectClasses.select}`]: styles[ownerState.variant] },\n30|      { [`&.${selectClasses.multiple}`]: styles.multiple },\n31|    ];\n32|  },\n33|})(nativeSelectSelectStyles, {\n34|  // Win specificity over the input base\n35|  [`&.${selectClasses.select}`]: {\n36|    height: 'auto', // Resets for multiple select with chips\n37|    minHeight: '1.4375em', // Required for select\\text-field height consistency\n38|    textOverflow: 'ellipsis',\n39|    whiteSpace: 'nowrap',\n40|    overflow: 'hidden',\n41|  },\n42|});\n43|\n44|const SelectIcon = styled('svg', {\n45|  name: 'MuiSelect',\n46|  slot: 'Icon',\n47|  overridesResolver: (props, styles) => {\n48|    const { ownerState } = props;\n49|    return [\n50|      styles.icon,\n51|      ownerState.variant && styles[`icon${capitalize(ownerState.variant)}`],\n52|      ownerState.open && styles.iconOpen,\n53|    ];\n54|  },\n55|})(nativeSelectIconStyles);\n56|\n57|const SelectNativeInput = styled('input', {\n58|  shouldForwardProp: (prop) => slotShouldForwardProp(prop) && prop !== 'classes',\n59|  name: 'MuiSelect',\n60|  slot: 'NativeInput',\n61|  overridesResolver: (props, styles) => styles.nativeInput,\n62|})({\n63|  bottom: 0,\n64|  left: 0,\n65|  position: 'absolute',\n66|  opacity: 0,\n67|  pointerEvents: 'none',\n68|  width: '100%',\n69|  boxSizing: 'border-box',\n70|});\n71|\n72|function areEqualValues(a, b) {\n73|  if (typeof b === 'object' && b !== null) {\n74|    return a === b;\n75|  }\n76|\n77|  // The value could be a number, the DOM will stringify it anyway.\n78|  return String(a) === String(b);\n79|}\n80|\n81|function isEmpty(display) {\n82|  return display == null || (typeof display === 'string' && !display.trim());\n83|}\n84|\n85|const useUtilityClasses = (ownerState) => {\n86|  const { classes, variant, disabled, multiple, open } = ownerState;\n87|\n88|  const slots = {\n89|    select: ['select', variant, disabled && 'disabled', multiple && 'multiple'],\n90|    icon: ['icon', `icon${capitalize(variant)}`, open && 'iconOpen', disabled && 'disabled'],\n91|    nativeInput: ['nativeInput'],\n92|  };\n93|\n94|  return composeClasses(slots, getSelectUtilityClasses, classes);\n95|};\n96|\n97|/**\n98| * @ignore - internal component.\n99| */\n100|const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n101|  const {\n102|    'aria-describedby': ariaDescribedby,\n103|    'aria-label': ariaLabel,\n104|    autoFocus,\n105|    autoWidth,\n106|    children,\n107|    className,\n108|    defaultOpen,\n109|    defaultValue,\n110|    disabled,\n111|    displayEmpty,\n112|    IconComponent,\n113|    inputRef: inputRefProp,\n114|    labelId,\n115|    MenuProps = {},\n116|    multiple,\n117|    name,\n118|    onBlur,\n119|    onChange,\n120|    onClose,\n121|    onFocus,\n122|    onOpen,\n123|    open: openProp,\n124|    readOnly,\n125|    renderValue,\n126|    SelectDisplayProps = {},\n127|    tabIndex: tabIndexProp,\n128|    // catching `type` from Input which makes no sense for SelectInput\n129|    type,\n130|    value: valueProp,\n131|    variant = 'standard',\n132|    ...other\n133|  } = props;\n134|\n135|  const [value, setValueState] = useControlled({\n136|    controlled: valueProp,\n137|    default: defaultValue,\n138|    name: 'Select',\n139|  });\n140|  const [openState, setOpenState] = useControlled({\n141|    controlled: openProp,\n142|    default: defaultOpen,\n143|    name: 'Select',\n144|  });\n145|\n146|  const inputRef = React.useRef(null);\n147|  const displayRef = React.useRef(null);\n148|  const [displayNode, setDisplayNode] = React.useState(null);\n149|  const { current: isOpenControlled } = React.useRef(openProp != null);\n150|  const [menuMinWidthState, setMenuMinWidthState] = React.useState();\n151|  const handleRef = useForkRef(ref, inputRefProp);\n152|\n153|  const handleDisplayRef = React.useCallback((node) => {\n154|    displayRef.current = node;\n155|\n156|    if (node) {\n157|      setDisplayNode(node);\n158|    }\n159|  }, []);\n160|\n161|  React.useImperativeHandle(\n162|    handleRef,\n163|    () => ({\n164|      focus: () => {\n165|        displayRef.current.focus();\n166|      },\n167|      node: inputRef.current,\n168|      value,\n169|    }),\n170|    [value],\n171|  );\n172|\n173|  // Resize menu on `defaultOpen` automatic toggle.\n174|  React.useEffect(() => {\n175|    if (defaultOpen && openState && displayNode && !isOpenControlled) {\n176|      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n177|      displayRef.current.focus();\n178|    }\n179|    // eslint-disable-next-line react-hooks/exhaustive-deps\n180|  }, [displayNode, autoWidth]);\n181|  // `isOpenControlled` is ignored because the component should never switch between controlled and uncontrolled modes.\n182|  // `defaultOpen` and `openState` are ignored to avoid unnecessary callbacks.\n183|  React.useEffect(() => {\n184|    if (autoFocus) {\n185|      displayRef.current.focus();\n186|    }\n187|  }, [autoFocus]);\n188|\n189|  React.useEffect(() => {\n190|    if (!labelId) {\n191|      return undefined;\n192|    }\n193|    const label = ownerDocument(displayRef.current).getElementById(labelId);\n194|    if (label) {\n195|      const handler = () => {\n196|        if (getSelection().isCollapsed) {\n197|          displayRef.current.focus();\n198|        }\n199|      };\n200|      label.addEventListener('click', handler);\n201|      return () => {\n202|        label.removeEventListener('click', handler);\n203|      };\n204|    }\n205|    return undefined;\n206|  }, [labelId]);\n207|\n208|  const update = (open, event) => {\n209|    if (open) {\n210|      if (onOpen) {\n211|        onOpen(event);\n212|      }\n213|    } else if (onClose) {\n214|      onClose(event);\n215|    }\n216|\n217|    if (!isOpenControlled) {\n218|      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n219|      setOpenState(open);\n220|    }\n221|  };\n222|\n223|  const handleMouseDown = (event) => {\n224|    // Ignore everything but left-click\n225|    if (event.button !== 0) {\n226|      return;\n227|    }\n228|    // Hijack the default focus behavior.\n229|    event.preventDefault();\n230|    displayRef.current.focus();\n231|\n232|    update(true, event);\n233|  };\n234|\n235|  const handleClose = (event) => {\n236|    update(false, event);\n237|  };\n238|\n239|  const childrenArray = React.Children.toArray(children);\n240|\n241|  // Support autofill.\n242|  const handleChange = (event) => {\n243|    const index = childrenArray.map((child) => child.props.value).indexOf(event.target.value);\n244|\n245|    if (index === -1) {\n246|      return;\n247|    }\n248|\n249|    const child = childrenArray[index];\n250|    setValueState(child.props.value);\n251|\n252|    if (onChange) {\n253|      onChange(event, child);\n254|    }\n255|  };\n256|\n257|  const handleItemClick = (child) => (event) => {\n258|    let newValue;\n259|\n260|    // We use the tabindex attribute to signal the available options.\n261|    if (!event.currentTarget.hasAttribute('tabindex')) {\n262|      return;\n263|    }\n264|\n265|    if (multiple) {\n266|      newValue = Array.isArray(value) ? value.slice() : [];\n267|      const itemIndex = value.indexOf(child.props.value);\n268|      if (itemIndex === -1) {\n269|        newValue.push(child.props.value);\n270|      } else {\n271|        newValue.splice(itemIndex, 1);\n272|      }\n273|    } else {\n274|      newValue = child.props.value;\n275|    }\n276|\n277|    if (child.props.onClick) {\n278|      child.props.onClick(event);\n279|    }\n280|\n281|    if (value !== newValue) {\n282|      setValueState(newValue);\n283|\n284|      if (onChange) {\n285|        // Redefine target to allow name and value to be read.\n286|        // This allows seamless integration with the most popular form libraries.\n287|        // https://github.com/mui/material-ui/issues/13485#issuecomment-676048492\n288|        // Clone the event to not override `target` of the original event.\n289|        const nativeEvent = event.nativeEvent || event;\n290|        const clonedEvent = new nativeEvent.constructor(nativeEvent.type, nativeEvent);\n291|\n292|        Object.defineProperty(clonedEvent, 'target', {\n293|          writable: true,\n294|          value: { value: newValue, name },\n295|        });\n296|        onChange(clonedEvent, child);\n297|      }\n298|    }\n299|\n300|    if (!multiple) {\n301|      update(false, event);\n302|    }\n303|  };\n304|\n305|  const handleKeyDown = (event) => {\n306|    if (!readOnly) {\n307|      const validKeys = [\n308|        ' ',\n309|        'ArrowUp',\n310|        'ArrowDown',\n311|        // The native select doesn't respond to enter on macOS, but it's recommended by\n312|        // https://www.w3.org/WAI/ARIA/apg/example-index/combobox/combobox-select-only.html\n313|        'Enter',\n314|      ];\n315|\n316|      if (validKeys.indexOf(event.key) !== -1) {\n317|        event.preventDefault();\n318|        update(true, event);\n319|      }\n320|    }\n321|  };\n322|\n323|  const open = displayNode !== null && openState;\n324|\n325|  const handleBlur = (event) => {\n326|    // if open event.stopImmediatePropagation\n327|    if (!open && onBlur) {\n328|      // Preact support, target is read only property on a native event.\n329|      Object.defineProperty(event, 'target', { writable: true, value: { value, name } });\n330|      onBlur(event);\n331|    }\n332|  };\n333|\n334|  delete other['aria-invalid'];\n335|\n336|  let display;\n337|  let displaySingle;\n338|  const displayMultiple = [];\n339|  let computeDisplay = false;\n340|  let foundMatch = false;\n341|\n342|  // No need to display any value if the field is empty.\n343|  if (isFilled({ value }) || displayEmpty) {\n344|    if (renderValue) {\n345|      display = renderValue(value);\n346|    } else {\n347|      computeDisplay = true;\n348|    }\n349|  }\n350|\n351|  const items = childrenArray.map((child, index, arr) => {\n352|    if (!React.isValidElement(child)) {\n353|      return null;\n354|    }\n355|\n356|    if (process.env.NODE_ENV !== 'production') {\n357|      if (isFragment(child)) {\n358|        console.error(\n359|          [\n360|            \"MUI: The Select component doesn't accept a Fragment as a child.\",\n361|            'Consider providing an array instead.',\n362|          ].join('\\n'),\n363|        );\n364|      }\n365|    }\n366|\n367|    let selected;\n368|\n369|    if (multiple) {\n370|      if (!Array.isArray(value)) {\n371|        throw new MuiError(\n372|          'MUI: The `value` prop must be an array ' +\n373|            'when using the `Select` component with `multiple`.',\n374|        );\n375|      }\n376|\n377|      selected = value.some((v) => areEqualValues(v, child.props.value));\n378|      if (selected && computeDisplay) {\n379|        displayMultiple.push(child.props.children);\n380|      }\n381|    } else {\n382|      selected = areEqualValues(value, child.props.value);\n383|      if (selected && computeDisplay) {\n384|        displaySingle = child.props.children;\n385|      }\n386|    }\n387|\n388|    if (selected) {\n389|      foundMatch = true;\n390|    }\n391|\n392|    if (child.props.value === undefined) {\n393|      return React.cloneElement(child, {\n394|        'aria-readonly': true,\n395|        role: 'option',\n396|      });\n397|    }\n398|\n399|    const isFirstSelectableElement = () => {\n400|      if (value) {\n401|        return selected;\n402|      }\n403|      const firstSelectableElement = arr.find(\n404|        (item) => item.props.value !== undefined && item.props.disabled !== true,\n405|      );\n406|      if (child === firstSelectableElement) {\n407|        return true;\n408|      }\n409|      return selected;\n410|    };\n411|\n412|    return React.cloneElement(child, {\n413|      'aria-selected': selected ? 'true' : 'false',\n414|      onClick: handleItemClick(child),\n415|      onKeyUp: (event) => {\n416|        if (event.key === ' ') {\n417|          // otherwise our MenuItems dispatches a click event\n418|          // it's not behavior of the native <option> and causes\n419|          // the select to close immediately since we open on space keydown\n420|          event.preventDefault();\n421|        }\n422|\n423|        if (child.props.onKeyUp) {\n424|          child.props.onKeyUp(event);\n425|        }\n426|      },\n427|      role: 'option',\n428|      selected:\n429|        arr[0].props.value === undefined || arr[0].props.disabled === true\n430|          ? isFirstSelectableElement()\n431|          : selected,\n432|      value: undefined, // The value is most likely not a valid HTML attribute.\n433|      'data-value': child.props.value, // Instead, we provide it as a data attribute.\n434|    });\n435|  });\n436|\n437|  if (process.env.NODE_ENV !== 'production') {\n438|    // eslint-disable-next-line react-hooks/rules-of-hooks\n439|    React.useEffect(() => {\n440|      if (!foundMatch && !multiple && value !== '') {\n441|        const values = childrenArray.map((child) => child.props.value);\n442|        console.warn(\n443|          [\n444|            `MUI: You have provided an out-of-range value \\`${value}\\` for the select ${\n445|              name ? `(name=\"${name}\") ` : ''\n446|            }component.`,\n447|            \"Consider providing a value that matches one of the available options or ''.\",\n448|            `The available values are ${\n449|              values\n450|                .filter((x) => x != null)\n451|                .map((x) => `\\`${x}\\``)\n452|                .join(', ') || '\"\"'\n453|            }.`,\n454|          ].join('\\n'),\n455|        );\n456|      }\n457|    }, [foundMatch, childrenArray, multiple, name, value]);\n458|  }\n459|\n460|  if (computeDisplay) {\n461|    if (multiple) {\n462|      if (displayMultiple.length === 0) {\n463|        display = null;\n464|      } else {\n465|        display = displayMultiple.reduce((output, child, index) => {\n466|          output.push(child);\n467|          if (index < displayMultiple.length - 1) {\n468|            output.push(', ');\n469|          }\n470|          return output;\n471|        }, []);\n472|      }\n473|    } else {\n474|      display = displaySingle;\n475|    }\n476|  }\n477|\n478|  // Avoid performing a layout computation in the render method.\n479|  let menuMinWidth = menuMinWidthState;\n480|\n481|  if (!autoWidth && isOpenControlled && displayNode) {\n482|    menuMinWidth = displayNode.clientWidth;\n483|  }\n484|\n485|  let tabIndex;\n486|  if (typeof tabIndexProp !== 'undefined') {\n487|    tabIndex = tabIndexProp;\n488|  } else {\n489|    tabIndex = disabled ? null : 0;\n490|  }\n491|\n492|  const buttonId = SelectDisplayProps.id || (name ? `mui-component-select-${name}` : undefined);\n493|\n494|  const ownerState = {\n495|    ...props,\n496|    variant,\n497|    value,\n498|    open,\n499|  };\n500|\n501|  const classes = useUtilityClasses(ownerState);\n502|\n503|  return (\n504|    <React.Fragment>\n505|      <SelectSelect\n506|        ref={handleDisplayRef}\n507|        tabIndex={tabIndex}\n508|        role=\"button\"\n509|        aria-disabled={disabled ? 'true' : undefined}\n510|        aria-expanded={open ? 'true' : 'false'}\n511|        aria-haspopup=\"listbox\"\n512|        aria-label={ariaLabel}\n513|        aria-labelledby={[labelId, buttonId].filter(Boolean).join(' ') || undefined}\n514|        aria-describedby={ariaDescribedby}\n515|        onKeyDown={handleKeyDown}\n516|        onMouseDown={disabled || readOnly ? null : handleMouseDown}\n517|        onBlur={handleBlur}\n518|        onFocus={onFocus}\n519|        {...SelectDisplayProps}\n520|        ownerState={ownerState}\n521|        className={clsx(SelectDisplayProps.className, classes.select, className)}\n522|        // The id is required for proper a11y\n523|        id={buttonId}\n524|      >\n525|        {/* So the vertical align positioning algorithm kicks in. */}\n526|        {isEmpty(display) ? (\n527|          // notranslate needed while Google Translate will not fix zero-width space issue\n528|          <span className=\"notranslate\">&#8203;</span>\n529|        ) : (\n530|          display\n531|        )}\n532|      </SelectSelect>\n533|      <SelectNativeInput\n534|        value={Array.isArray(value) ? value.join(',') : value}\n535|        name={name}\n536|        ref={inputRef}\n537|        aria-hidden\n538|        onChange={handleChange}\n539|        tabIndex={-1}\n540|        disabled={disabled}\n541|        className={classes.nativeInput}\n542|        autoFocus={autoFocus}\n543|        ownerState={ownerState}\n544|        {...other}\n545|      />\n546|      <SelectIcon as={IconComponent} className={classes.icon} ownerState={ownerState} />\n547|      <Menu\n548|        id={`menu-${name || ''}`}\n549|        anchorEl={displayNode}\n550|        open={open}\n551|        onClose={handleClose}\n552|        anchorOrigin={{\n553|          vertical: 'bottom',\n554|          horizontal: 'center',\n555|        }}\n556|        transformOrigin={{\n557|          vertical: 'top',\n558|          horizontal: 'center',\n559|        }}\n560|        {...MenuProps}\n561|        MenuListProps={{\n562|          'aria-labelledby': labelId,\n563|          role: 'listbox',\n564|          disableListWrap: true,\n565|          ...MenuProps.MenuListProps,\n566|        }}\n567|        PaperProps={{\n568|          ...MenuProps.PaperProps,\n569|          style: {\n570|            minWidth: menuMinWidth,\n571|            ...(MenuProps.PaperProps != null ? MenuProps.PaperProps.style : null),\n572|          },\n573|        }}\n574|      >\n575|        {items}\n576|      </Menu>\n577|    </React.Fragment>\n578|  );\n579|});\n580|\n581|SelectInput.propTypes = {\n582|  /**\n583|   * @ignore\n584|   */\n585|  'aria-describedby': PropTypes.string,\n586|  /**\n587|   * @ignore\n588|   */\n589|  'aria-label': PropTypes.string,\n590|  /**\n591|   * @ignore\n592|   */\n593|  autoFocus: PropTypes.bool,\n594|  /**\n595|   * If `true`, the width of the popover will automatically be set according to the items inside the\n596|   * menu, otherwise it will be at least the width of the select input.\n597|   */\n598|  autoWidth: PropTypes.bool,\n599|  /**\n600|   * The option elements to populate the select with.\n601|   * Can be some `<MenuItem>` elements.\n602|   */\n603|  children: PropTypes.node,\n604|  /**\n605|   * Override or extend the styles applied to the component.\n606|   * See [CSS API](#css) below for more details.\n607|   */\n608|  classes: PropTypes.object,\n609|  /**\n610|   * The CSS class name of the select element.\n611|   */\n612|  className: PropTypes.string,\n613|  /**\n614|   * If `true`, the component is toggled on mount. Use when the component open state is not controlled.\n615|   * You can only use it when the `native` prop is `false` (default).\n616|   */\n617|  defaultOpen: PropTypes.bool,\n618|  /**\n619|   * The default value. Use when the component is not controlled.\n620|   */\n621|  defaultValue: PropTypes.any,\n622|  /**\n623|   * If `true`, the select is disabled.\n624|   */\n625|  disabled: PropTypes.bool,\n626|  /**\n627|   * If `true`, the selected item is displayed even if its value is empty.\n628|   */\n629|  displayEmpty: PropTypes.bool,\n630|  /**\n631|   * The icon that displays the arrow.\n632|   */\n633|  IconComponent: PropTypes.elementType.isRequired,\n634|  /**\n635|   * Imperative handle implementing `{ value: T, node: HTMLElement, focus(): void }`\n636|   * Equivalent to `ref`\n637|   */\n638|  inputRef: refType,\n639|  /**\n640|   * The ID of an element that acts as an additional label. The Select will\n641|   * be labelled by the additional label and the selected value.\n642|   */\n643|  labelId: PropTypes.string,\n644|  /**\n645|   * Props applied to the [`Menu`](/material-ui/api/menu/) element.\n646|   */\n647|  MenuProps: PropTypes.object,\n648|  /**\n649|   * If `true`, `value` must be an array and the menu will support multiple selections.\n650|   */\n651|  multiple: PropTypes.bool,\n652|  /**\n653|   * Name attribute of the `select` or hidden `input` element.\n654|   */\n655|  name: PropTypes.string,\n656|  /**\n657|   * @ignore\n658|   */\n659|  onBlur: PropTypes.func,\n660|  /**\n661|   * Callback fired when a menu item is selected.\n662|   *\n663|   * @param {object} event The event source of the callback.\n664|   * You can pull out the new value by accessing `event.target.value` (any).\n665|   * @param {object} [child] The react element that was selected.\n666|   */\n667|  onChange: PropTypes.func,\n668|  /**\n669|   * Callback fired when the component requests to be closed.\n670|   * Use in controlled mode (see open).\n671|   *\n672|   * @param {object} event The event source of the callback.\n673|   */\n674|  onClose: PropTypes.func,\n675|  /**\n676|   * @ignore\n677|   */\n678|  onFocus: PropTypes.func,\n679|  /**\n680|   * Callback fired when the component requests to be opened.\n681|   * Use in controlled mode (see open).\n682|   *\n683|   * @param {object} event The event source of the callback.\n684|   */\n685|  onOpen: PropTypes.func,\n686|  /**\n687|   * If `true`, the component is shown.\n688|   */\n689|  open: PropTypes.bool,\n690|  /**\n691|   * @ignore\n692|   */\n693|  readOnly: PropTypes.bool,\n694|  /**\n695|   * Render the selected value.\n696|   *\n697|   * @param {any} value The `value` provided to the component.\n698|   * @returns {ReactNode}\n699|   */\n700|  renderValue: PropTypes.func,\n701|  /**\n702|   * Props applied to the clickable div element.\n703|   */\n704|  SelectDisplayProps: PropTypes.object,\n705|  /**\n706|   * @ignore\n707|   */\n708|  tabIndex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n709|  /**\n710|   * @ignore\n711|   */\n712|  type: PropTypes.any,\n713|  /**\n714|   * The input value.\n715|   */\n716|  value: PropTypes.any,\n717|  /**\n718|   * The variant to use.\n719|   */\n720|  variant: PropTypes.oneOf(['standard', 'outlined', 'filled']),\n721|};\n722|\n723|export default SelectInput;\n\n\n### packages/mui-material/src/Select/Select.js\n...\n25|  shouldForwardProp: (prop) => rootShouldForwardProp(prop) && prop !== 'variant',\n26|  slot: 'Root',\n27|};\n28|\n29|const StyledInput = styled(Input, styledRootConfig)('');\n30|\n31|const StyledOutlinedInput = styled(OutlinedInput, styledRootConfig)('');\n32|\n33|const StyledFilledInput = styled(FilledInput, styledRootConfig)('');\n34|\n35|const Select = React.forwardRef(function Select(inProps, ref) {\n36|  const props = useThemeProps({ name: 'MuiSelect', props: inProps });\n37|  const {\n38|    autoWidth = false,\n39|    children,\n40|    classes: classesProp = {},\n41|    className,\n42|    defaultOpen = false,\n43|    displayEmpty = false,\n44|    IconComponent = ArrowDropDownIcon,\n45|    id,\n46|    input,\n47|    inputProps,\n48|    label,\n49|    labelId,\n50|    MenuProps,\n51|    multiple = false,\n52|    native = false,\n53|    onClose,\n54|    onOpen,\n55|    open,\n56|    renderValue,\n57|    SelectDisplayProps,\n58|    variant: variantProp = 'outlined',\n59|    ...other\n60|  } = props;\n61|\n62|  const inputComponent = native ? NativeSelectInput : SelectInput;\n63|\n64|  const muiFormControl = useFormControl();\n65|  const fcs = formControlState({\n...\n\n\n\n\n###\n\nPlease provide the class name, function or method name, or the exact line numbers that need to be edited.\nThe possible location outputs should be either \"class\", \"function\" or \"line\".\n\n### Examples:\n```\nfull_path1/file1.ts\nline: 10\nclass: MyClass1\nline: 51\n\nfull_path2/file2.ts\nfunction: MyClass2.my_method\nline: 12\n\nfull_path3/file3.ts\nfunction: my_function\nline: 24\nline: 156\n```\n\nReturn just the location(s) wrapped with ```.\n",
        "response": [
          "```\npackages/mui-material/src/Select/SelectInput.js\nline: 176\nline: 219\nline: 481\nline: 482\nline: 549\n```",
          "```\npackages/mui-material/src/Select/SelectInput.js\nline: 177\nline: 219\nline: 482\nline: 549\nline: 554\nline: 558\n```"
        ],
        "usage": {
          "completion_tokens": 0,
          "prompt_tokens": 0
        }
      },
      "additional_artifact_loc_edit_location": [
        {
          "raw_output_loc": [
            "```\npackages/mui-material/src/Select/SelectInput.js\nline: 176\nline: 219\nline: 481\nline: 482\nline: 549\n```",
            "```\npackages/mui-material/src/Select/SelectInput.js\nline: 177\nline: 219\nline: 482\nline: 549\nline: 554\nline: 558\n```"
          ]
        }
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "packages/mui-material/src/Select/SelectInput.js": [
          "line: 177\nline: 219\nline: 482\nline: 549\nline: 554\nline: 558"
        ],
        "packages/mui-material/src/Select/Select.js": [
          ""
        ],
        "packages/mui-material/src/InputBase/InputBase.js": [
          ""
        ]
      },
      "patches": [
        "diff --git a/packages/mui-material/src/Select/SelectInput.js b/packages/mui-material/src/Select/SelectInput.js\nindex 86be44b..1f61545 100644\n--- a/packages/mui-material/src/Select/SelectInput.js\n+++ b/packages/mui-material/src/Select/SelectInput.js\n@@ -173,7 +173,12 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n   // Resize menu on `defaultOpen` automatic toggle.\n   React.useEffect(() => {\n     if (defaultOpen && openState && displayNode && !isOpenControlled) {\n-      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n+      const anchorWidth = displayNode.parentElement && displayNode.parentElement.parentElement\n+        ? displayNode.parentElement.parentElement.clientWidth\n+        : displayNode.parentElement\n+        ? displayNode.parentElement.clientWidth\n+        : displayNode.clientWidth;\n+      setMenuMinWidthState(autoWidth ? null : anchorWidth);\n       displayRef.current.focus();\n     }\n     // eslint-disable-next-line react-hooks/exhaustive-deps\n@@ -215,7 +220,12 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n     }\n \n     if (!isOpenControlled) {\n-      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n+      const anchorWidth = displayNode.parentElement && displayNode.parentElement.parentElement\n+        ? displayNode.parentElement.parentElement.clientWidth\n+        : displayNode.parentElement\n+        ? displayNode.parentElement.clientWidth\n+        : displayNode.clientWidth;\n+      setMenuMinWidthState(autoWidth ? null : anchorWidth);\n       setOpenState(open);\n     }\n   };\n@@ -479,7 +489,12 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n   let menuMinWidth = menuMinWidthState;\n \n   if (!autoWidth && isOpenControlled && displayNode) {\n-    menuMinWidth = displayNode.clientWidth;\n+    const anchorWidth = displayNode.parentElement && displayNode.parentElement.parentElement\n+      ? displayNode.parentElement.parentElement.clientWidth\n+      : displayNode.parentElement\n+      ? displayNode.parentElement.clientWidth\n+      : displayNode.clientWidth;\n+    menuMinWidth = anchorWidth;\n   }\n \n   let tabIndex;\n@@ -546,16 +561,22 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n       <SelectIcon as={IconComponent} className={classes.icon} ownerState={ownerState} />\n       <Menu\n         id={`menu-${name || ''}`}\n-        anchorEl={displayNode}\n+        anchorEl={\n+          displayNode\n+            ? displayNode.parentElement && displayNode.parentElement.parentElement\n+              ? displayNode.parentElement.parentElement\n+              : displayNode.parentElement || displayNode\n+            : displayNode\n+        }\n         open={open}\n         onClose={handleClose}\n         anchorOrigin={{\n           vertical: 'bottom',\n-          horizontal: 'center',\n+          horizontal: 'left',\n         }}\n         transformOrigin={{\n           vertical: 'top',\n-          horizontal: 'center',\n+          horizontal: 'left',\n         }}\n         {...MenuProps}\n         MenuListProps={{\n",
        "diff --git a/packages/mui-material/src/Select/SelectInput.js b/packages/mui-material/src/Select/SelectInput.js\nindex 86be44b..635c2ae 100644\n--- a/packages/mui-material/src/Select/SelectInput.js\n+++ b/packages/mui-material/src/Select/SelectInput.js\n@@ -173,7 +173,7 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n   // Resize menu on `defaultOpen` automatic toggle.\n   React.useEffect(() => {\n     if (defaultOpen && openState && displayNode && !isOpenControlled) {\n-      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n+      setMenuMinWidthState(autoWidth ? null : (displayNode.parentElement ? displayNode.parentElement.clientWidth : displayNode.clientWidth));\n       displayRef.current.focus();\n     }\n     // eslint-disable-next-line react-hooks/exhaustive-deps\n@@ -215,7 +215,7 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n     }\n \n     if (!isOpenControlled) {\n-      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n+      setMenuMinWidthState(autoWidth ? null : (displayNode.parentElement ? displayNode.parentElement.clientWidth : displayNode.clientWidth));\n       setOpenState(open);\n     }\n   };\n@@ -479,7 +479,7 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n   let menuMinWidth = menuMinWidthState;\n \n   if (!autoWidth && isOpenControlled && displayNode) {\n-    menuMinWidth = displayNode.clientWidth;\n+    menuMinWidth = displayNode.parentElement ? displayNode.parentElement.clientWidth : displayNode.clientWidth;\n   }\n \n   let tabIndex;\n@@ -546,7 +546,7 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n       <SelectIcon as={IconComponent} className={classes.icon} ownerState={ownerState} />\n       <Menu\n         id={`menu-${name || ''}`}\n-        anchorEl={displayNode}\n+        anchorEl={displayNode ? displayNode.parentElement : displayNode}\n         open={open}\n         onClose={handleClose}\n         anchorOrigin={{\n"
      ],
      "edit_loc_traj": {
        "prompt": "\nPlease review the following GitHub problem description and relevant files, and provide a set of locations that need to be edited to fix the issue.\nThe locations can be specified as class names, function or method names, or exact line numbers that require modification.\n\n### GitHub Problem Description ###\nSelect's popover can be shorter than input because of adornments\n### Duplicates\n\n- [X] I have searched the existing issues\n\n### Latest version\n\n- [X] I have tested the latest version\n\n### Current behavior ðŸ˜¯\n\n![image](https://user-images.githubusercontent.com/17963791/171154553-a72df9ee-98a2-43f7-a9ec-a0e3989018c7.png)\r\n\n\n### Expected behavior ðŸ¤”\n\nLeft edge of the popover reaches left edge of the input\r\n\r\nFrom 0.5 seconds of looking at html, this might be a solution:\r\n![image](https://user-images.githubusercontent.com/17963791/171155097-862b6cd7-2bdf-4a3b-a42c-1e78c007a26a.png)\r\n\n\n### Steps to reproduce ðŸ•¹\n\n```tsx\r\n<Select\r\n\tfullWidth\r\n\tstartAdornment={\r\n\t\t<InputAdornment position=\"start\">\r\n\t\t\t<LanguageIcon />\r\n\t\t</InputAdornment>\r\n\t}\r\n>\r\n\t{[\"foo\", \"bar\"].map((opt) => (\r\n\t\t<MenuItem value={opt} key={opt}>\r\n\t\t\t{opt}\r\n\t\t</MenuItem>\r\n\t))}\r\n</Select>\r\n```\r\n\n\n### Context ðŸ”¦\n\n_No response_\n\n### Your environment ðŸŒŽ\n\n<details>\r\n  <summary>`npx @mui/envinfo`</summary>\r\n\r\n```\r\n  System:\r\n    OS: Windows 10 10.0.22000\r\n  Binaries:\r\n    Node: 17.9.0 - C:\\Program Files\\nodejs\\node.EXE\r\n    Yarn: 3.2.0 - ~\\AppData\\Roaming\\npm\\yarn.CMD\r\n    npm: 8.5.5 - C:\\Program Files\\nodejs\\npm.CMD\r\n  Browsers:\r\n    Chrome: Version 104.0.5094.0 (Official Build) canary (64-bit)\r\n  npmPackages:\r\n    @emotion/react: ^11.9.0 => 11.9.0\r\n    @emotion/styled: ^11.8.1 => 11.8.1\r\n    @mui/base:  5.0.0-alpha.82\r\n    @mui/icons-material: ^5.8.0 => 5.8.0\r\n    @mui/lab: ^5.0.0-alpha.83 => 5.0.0-alpha.83\r\n    @mui/material: ^5.8.1 => 5.8.1\r\n    @mui/private-theming:  5.8.0\r\n    @mui/styled-engine:  5.8.0\r\n    @mui/system:  5.8.1\r\n    @mui/types:  7.1.3\r\n    @mui/utils:  5.8.0\r\n    @mui/x-date-pickers:  5.0.0-alpha.1\r\n    @types/react: ^18.0.9 => 18.0.9\r\n    react: ^18.1.0 => 18.1.0\r\n    react-dom: ^18.1.0 => 18.1.0\r\n    typescript: ^4.7.2 => 4.7.2\r\n```\r\n</details>\r\n\n\n###\n### packages/mui-material/src/Select/SelectInput.js\n1|import * as React from 'react';\n2|import { isFragment } from 'react-is';\n3|import PropTypes from 'prop-types';\n4|import clsx from 'clsx';\n5|import MuiError from '@mui/utils/macros/MuiError.macro';\n6|import { unstable_composeClasses as composeClasses } from '@mui/base';\n7|import { refType } from '@mui/utils';\n8|import ownerDocument from '../utils/ownerDocument';\n9|import capitalize from '../utils/capitalize';\n10|import Menu from '../Menu/Menu';\n11|import {\n12|  nativeSelectSelectStyles,\n13|  nativeSelectIconStyles,\n14|} from '../NativeSelect/NativeSelectInput';\n15|import { isFilled } from '../InputBase/utils';\n16|import styled, { slotShouldForwardProp } from '../styles/styled';\n17|import useForkRef from '../utils/useForkRef';\n18|import useControlled from '../utils/useControlled';\n19|import selectClasses, { getSelectUtilityClasses } from './selectClasses';\n20|\n21|const SelectSelect = styled('div', {\n22|  name: 'MuiSelect',\n23|  slot: 'Select',\n24|  overridesResolver: (props, styles) => {\n25|    const { ownerState } = props;\n26|    return [\n27|      // Win specificity over the input base\n28|      { [`&.${selectClasses.select}`]: styles.select },\n29|      { [`&.${selectClasses.select}`]: styles[ownerState.variant] },\n30|      { [`&.${selectClasses.multiple}`]: styles.multiple },\n31|    ];\n32|  },\n33|})(nativeSelectSelectStyles, {\n34|  // Win specificity over the input base\n35|  [`&.${selectClasses.select}`]: {\n36|    height: 'auto', // Resets for multiple select with chips\n37|    minHeight: '1.4375em', // Required for select\\text-field height consistency\n38|    textOverflow: 'ellipsis',\n39|    whiteSpace: 'nowrap',\n40|    overflow: 'hidden',\n41|  },\n42|});\n43|\n44|const SelectIcon = styled('svg', {\n45|  name: 'MuiSelect',\n46|  slot: 'Icon',\n47|  overridesResolver: (props, styles) => {\n48|    const { ownerState } = props;\n49|    return [\n50|      styles.icon,\n51|      ownerState.variant && styles[`icon${capitalize(ownerState.variant)}`],\n52|      ownerState.open && styles.iconOpen,\n53|    ];\n54|  },\n55|})(nativeSelectIconStyles);\n56|\n57|const SelectNativeInput = styled('input', {\n58|  shouldForwardProp: (prop) => slotShouldForwardProp(prop) && prop !== 'classes',\n59|  name: 'MuiSelect',\n60|  slot: 'NativeInput',\n61|  overridesResolver: (props, styles) => styles.nativeInput,\n62|})({\n63|  bottom: 0,\n64|  left: 0,\n65|  position: 'absolute',\n66|  opacity: 0,\n67|  pointerEvents: 'none',\n68|  width: '100%',\n69|  boxSizing: 'border-box',\n70|});\n71|\n72|function areEqualValues(a, b) {\n73|  if (typeof b === 'object' && b !== null) {\n74|    return a === b;\n75|  }\n76|\n77|  // The value could be a number, the DOM will stringify it anyway.\n78|  return String(a) === String(b);\n79|}\n80|\n81|function isEmpty(display) {\n82|  return display == null || (typeof display === 'string' && !display.trim());\n83|}\n84|\n85|const useUtilityClasses = (ownerState) => {\n86|  const { classes, variant, disabled, multiple, open } = ownerState;\n87|\n88|  const slots = {\n89|    select: ['select', variant, disabled && 'disabled', multiple && 'multiple'],\n90|    icon: ['icon', `icon${capitalize(variant)}`, open && 'iconOpen', disabled && 'disabled'],\n91|    nativeInput: ['nativeInput'],\n92|  };\n93|\n94|  return composeClasses(slots, getSelectUtilityClasses, classes);\n95|};\n96|\n97|/**\n98| * @ignore - internal component.\n99| */\n100|const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n101|  const {\n102|    'aria-describedby': ariaDescribedby,\n103|    'aria-label': ariaLabel,\n104|    autoFocus,\n105|    autoWidth,\n106|    children,\n107|    className,\n108|    defaultOpen,\n109|    defaultValue,\n110|    disabled,\n111|    displayEmpty,\n112|    IconComponent,\n113|    inputRef: inputRefProp,\n114|    labelId,\n115|    MenuProps = {},\n116|    multiple,\n117|    name,\n118|    onBlur,\n119|    onChange,\n120|    onClose,\n121|    onFocus,\n122|    onOpen,\n123|    open: openProp,\n124|    readOnly,\n125|    renderValue,\n126|    SelectDisplayProps = {},\n127|    tabIndex: tabIndexProp,\n128|    // catching `type` from Input which makes no sense for SelectInput\n129|    type,\n130|    value: valueProp,\n131|    variant = 'standard',\n132|    ...other\n133|  } = props;\n134|\n135|  const [value, setValueState] = useControlled({\n136|    controlled: valueProp,\n137|    default: defaultValue,\n138|    name: 'Select',\n139|  });\n140|  const [openState, setOpenState] = useControlled({\n141|    controlled: openProp,\n142|    default: defaultOpen,\n143|    name: 'Select',\n144|  });\n145|\n146|  const inputRef = React.useRef(null);\n147|  const displayRef = React.useRef(null);\n148|  const [displayNode, setDisplayNode] = React.useState(null);\n149|  const { current: isOpenControlled } = React.useRef(openProp != null);\n150|  const [menuMinWidthState, setMenuMinWidthState] = React.useState();\n151|  const handleRef = useForkRef(ref, inputRefProp);\n152|\n153|  const handleDisplayRef = React.useCallback((node) => {\n154|    displayRef.current = node;\n155|\n156|    if (node) {\n157|      setDisplayNode(node);\n158|    }\n159|  }, []);\n160|\n161|  React.useImperativeHandle(\n162|    handleRef,\n163|    () => ({\n164|      focus: () => {\n165|        displayRef.current.focus();\n166|      },\n167|      node: inputRef.current,\n168|      value,\n169|    }),\n170|    [value],\n171|  );\n172|\n173|  // Resize menu on `defaultOpen` automatic toggle.\n174|  React.useEffect(() => {\n175|    if (defaultOpen && openState && displayNode && !isOpenControlled) {\n176|      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n177|      displayRef.current.focus();\n178|    }\n179|    // eslint-disable-next-line react-hooks/exhaustive-deps\n180|  }, [displayNode, autoWidth]);\n181|  // `isOpenControlled` is ignored because the component should never switch between controlled and uncontrolled modes.\n182|  // `defaultOpen` and `openState` are ignored to avoid unnecessary callbacks.\n183|  React.useEffect(() => {\n184|    if (autoFocus) {\n185|      displayRef.current.focus();\n186|    }\n187|  }, [autoFocus]);\n188|\n189|  React.useEffect(() => {\n190|    if (!labelId) {\n191|      return undefined;\n192|    }\n193|    const label = ownerDocument(displayRef.current).getElementById(labelId);\n194|    if (label) {\n195|      const handler = () => {\n196|        if (getSelection().isCollapsed) {\n197|          displayRef.current.focus();\n198|        }\n199|      };\n200|      label.addEventListener('click', handler);\n201|      return () => {\n202|        label.removeEventListener('click', handler);\n203|      };\n204|    }\n205|    return undefined;\n206|  }, [labelId]);\n207|\n208|  const update = (open, event) => {\n209|    if (open) {\n210|      if (onOpen) {\n211|        onOpen(event);\n212|      }\n213|    } else if (onClose) {\n214|      onClose(event);\n215|    }\n216|\n217|    if (!isOpenControlled) {\n218|      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n219|      setOpenState(open);\n220|    }\n221|  };\n222|\n223|  const handleMouseDown = (event) => {\n224|    // Ignore everything but left-click\n225|    if (event.button !== 0) {\n226|      return;\n227|    }\n228|    // Hijack the default focus behavior.\n229|    event.preventDefault();\n230|    displayRef.current.focus();\n231|\n232|    update(true, event);\n233|  };\n234|\n235|  const handleClose = (event) => {\n236|    update(false, event);\n237|  };\n238|\n239|  const childrenArray = React.Children.toArray(children);\n240|\n241|  // Support autofill.\n242|  const handleChange = (event) => {\n243|    const index = childrenArray.map((child) => child.props.value).indexOf(event.target.value);\n244|\n245|    if (index === -1) {\n246|      return;\n247|    }\n248|\n249|    const child = childrenArray[index];\n250|    setValueState(child.props.value);\n251|\n252|    if (onChange) {\n253|      onChange(event, child);\n254|    }\n255|  };\n256|\n257|  const handleItemClick = (child) => (event) => {\n258|    let newValue;\n259|\n260|    // We use the tabindex attribute to signal the available options.\n261|    if (!event.currentTarget.hasAttribute('tabindex')) {\n262|      return;\n263|    }\n264|\n265|    if (multiple) {\n266|      newValue = Array.isArray(value) ? value.slice() : [];\n267|      const itemIndex = value.indexOf(child.props.value);\n268|      if (itemIndex === -1) {\n269|        newValue.push(child.props.value);\n270|      } else {\n271|        newValue.splice(itemIndex, 1);\n272|      }\n273|    } else {\n274|      newValue = child.props.value;\n275|    }\n276|\n277|    if (child.props.onClick) {\n278|      child.props.onClick(event);\n279|    }\n280|\n281|    if (value !== newValue) {\n282|      setValueState(newValue);\n283|\n284|      if (onChange) {\n285|        // Redefine target to allow name and value to be read.\n286|        // This allows seamless integration with the most popular form libraries.\n287|        // https://github.com/mui/material-ui/issues/13485#issuecomment-676048492\n288|        // Clone the event to not override `target` of the original event.\n289|        const nativeEvent = event.nativeEvent || event;\n290|        const clonedEvent = new nativeEvent.constructor(nativeEvent.type, nativeEvent);\n291|\n292|        Object.defineProperty(clonedEvent, 'target', {\n293|          writable: true,\n294|          value: { value: newValue, name },\n295|        });\n296|        onChange(clonedEvent, child);\n297|      }\n298|    }\n299|\n300|    if (!multiple) {\n301|      update(false, event);\n302|    }\n303|  };\n304|\n305|  const handleKeyDown = (event) => {\n306|    if (!readOnly) {\n307|      const validKeys = [\n308|        ' ',\n309|        'ArrowUp',\n310|        'ArrowDown',\n311|        // The native select doesn't respond to enter on macOS, but it's recommended by\n312|        // https://www.w3.org/WAI/ARIA/apg/example-index/combobox/combobox-select-only.html\n313|        'Enter',\n314|      ];\n315|\n316|      if (validKeys.indexOf(event.key) !== -1) {\n317|        event.preventDefault();\n318|        update(true, event);\n319|      }\n320|    }\n321|  };\n322|\n323|  const open = displayNode !== null && openState;\n324|\n325|  const handleBlur = (event) => {\n326|    // if open event.stopImmediatePropagation\n327|    if (!open && onBlur) {\n328|      // Preact support, target is read only property on a native event.\n329|      Object.defineProperty(event, 'target', { writable: true, value: { value, name } });\n330|      onBlur(event);\n331|    }\n332|  };\n333|\n334|  delete other['aria-invalid'];\n335|\n336|  let display;\n337|  let displaySingle;\n338|  const displayMultiple = [];\n339|  let computeDisplay = false;\n340|  let foundMatch = false;\n341|\n342|  // No need to display any value if the field is empty.\n343|  if (isFilled({ value }) || displayEmpty) {\n344|    if (renderValue) {\n345|      display = renderValue(value);\n346|    } else {\n347|      computeDisplay = true;\n348|    }\n349|  }\n350|\n351|  const items = childrenArray.map((child, index, arr) => {\n352|    if (!React.isValidElement(child)) {\n353|      return null;\n354|    }\n355|\n356|    if (process.env.NODE_ENV !== 'production') {\n357|      if (isFragment(child)) {\n358|        console.error(\n359|          [\n360|            \"MUI: The Select component doesn't accept a Fragment as a child.\",\n361|            'Consider providing an array instead.',\n362|          ].join('\\n'),\n363|        );\n364|      }\n365|    }\n366|\n367|    let selected;\n368|\n369|    if (multiple) {\n370|      if (!Array.isArray(value)) {\n371|        throw new MuiError(\n372|          'MUI: The `value` prop must be an array ' +\n373|            'when using the `Select` component with `multiple`.',\n374|        );\n375|      }\n376|\n377|      selected = value.some((v) => areEqualValues(v, child.props.value));\n378|      if (selected && computeDisplay) {\n379|        displayMultiple.push(child.props.children);\n380|      }\n381|    } else {\n382|      selected = areEqualValues(value, child.props.value);\n383|      if (selected && computeDisplay) {\n384|        displaySingle = child.props.children;\n385|      }\n386|    }\n387|\n388|    if (selected) {\n389|      foundMatch = true;\n390|    }\n391|\n392|    if (child.props.value === undefined) {\n393|      return React.cloneElement(child, {\n394|        'aria-readonly': true,\n395|        role: 'option',\n396|      });\n397|    }\n398|\n399|    const isFirstSelectableElement = () => {\n400|      if (value) {\n401|        return selected;\n402|      }\n403|      const firstSelectableElement = arr.find(\n404|        (item) => item.props.value !== undefined && item.props.disabled !== true,\n405|      );\n406|      if (child === firstSelectableElement) {\n407|        return true;\n408|      }\n409|      return selected;\n410|    };\n411|\n412|    return React.cloneElement(child, {\n413|      'aria-selected': selected ? 'true' : 'false',\n414|      onClick: handleItemClick(child),\n415|      onKeyUp: (event) => {\n416|        if (event.key === ' ') {\n417|          // otherwise our MenuItems dispatches a click event\n418|          // it's not behavior of the native <option> and causes\n419|          // the select to close immediately since we open on space keydown\n420|          event.preventDefault();\n421|        }\n422|\n423|        if (child.props.onKeyUp) {\n424|          child.props.onKeyUp(event);\n425|        }\n426|      },\n427|      role: 'option',\n428|      selected:\n429|        arr[0].props.value === undefined || arr[0].props.disabled === true\n430|          ? isFirstSelectableElement()\n431|          : selected,\n432|      value: undefined, // The value is most likely not a valid HTML attribute.\n433|      'data-value': child.props.value, // Instead, we provide it as a data attribute.\n434|    });\n435|  });\n436|\n437|  if (process.env.NODE_ENV !== 'production') {\n438|    // eslint-disable-next-line react-hooks/rules-of-hooks\n439|    React.useEffect(() => {\n440|      if (!foundMatch && !multiple && value !== '') {\n441|        const values = childrenArray.map((child) => child.props.value);\n442|        console.warn(\n443|          [\n444|            `MUI: You have provided an out-of-range value \\`${value}\\` for the select ${\n445|              name ? `(name=\"${name}\") ` : ''\n446|            }component.`,\n447|            \"Consider providing a value that matches one of the available options or ''.\",\n448|            `The available values are ${\n449|              values\n450|                .filter((x) => x != null)\n451|                .map((x) => `\\`${x}\\``)\n452|                .join(', ') || '\"\"'\n453|            }.`,\n454|          ].join('\\n'),\n455|        );\n456|      }\n457|    }, [foundMatch, childrenArray, multiple, name, value]);\n458|  }\n459|\n460|  if (computeDisplay) {\n461|    if (multiple) {\n462|      if (displayMultiple.length === 0) {\n463|        display = null;\n464|      } else {\n465|        display = displayMultiple.reduce((output, child, index) => {\n466|          output.push(child);\n467|          if (index < displayMultiple.length - 1) {\n468|            output.push(', ');\n469|          }\n470|          return output;\n471|        }, []);\n472|      }\n473|    } else {\n474|      display = displaySingle;\n475|    }\n476|  }\n477|\n478|  // Avoid performing a layout computation in the render method.\n479|  let menuMinWidth = menuMinWidthState;\n480|\n481|  if (!autoWidth && isOpenControlled && displayNode) {\n482|    menuMinWidth = displayNode.clientWidth;\n483|  }\n484|\n485|  let tabIndex;\n486|  if (typeof tabIndexProp !== 'undefined') {\n487|    tabIndex = tabIndexProp;\n488|  } else {\n489|    tabIndex = disabled ? null : 0;\n490|  }\n491|\n492|  const buttonId = SelectDisplayProps.id || (name ? `mui-component-select-${name}` : undefined);\n493|\n494|  const ownerState = {\n495|    ...props,\n496|    variant,\n497|    value,\n498|    open,\n499|  };\n500|\n501|  const classes = useUtilityClasses(ownerState);\n502|\n503|  return (\n504|    <React.Fragment>\n505|      <SelectSelect\n506|        ref={handleDisplayRef}\n507|        tabIndex={tabIndex}\n508|        role=\"button\"\n509|        aria-disabled={disabled ? 'true' : undefined}\n510|        aria-expanded={open ? 'true' : 'false'}\n511|        aria-haspopup=\"listbox\"\n512|        aria-label={ariaLabel}\n513|        aria-labelledby={[labelId, buttonId].filter(Boolean).join(' ') || undefined}\n514|        aria-describedby={ariaDescribedby}\n515|        onKeyDown={handleKeyDown}\n516|        onMouseDown={disabled || readOnly ? null : handleMouseDown}\n517|        onBlur={handleBlur}\n518|        onFocus={onFocus}\n519|        {...SelectDisplayProps}\n520|        ownerState={ownerState}\n521|        className={clsx(SelectDisplayProps.className, classes.select, className)}\n522|        // The id is required for proper a11y\n523|        id={buttonId}\n524|      >\n525|        {/* So the vertical align positioning algorithm kicks in. */}\n526|        {isEmpty(display) ? (\n527|          // notranslate needed while Google Translate will not fix zero-width space issue\n528|          <span className=\"notranslate\">&#8203;</span>\n529|        ) : (\n530|          display\n531|        )}\n532|      </SelectSelect>\n533|      <SelectNativeInput\n534|        value={Array.isArray(value) ? value.join(',') : value}\n535|        name={name}\n536|        ref={inputRef}\n537|        aria-hidden\n538|        onChange={handleChange}\n539|        tabIndex={-1}\n540|        disabled={disabled}\n541|        className={classes.nativeInput}\n542|        autoFocus={autoFocus}\n543|        ownerState={ownerState}\n544|        {...other}\n545|      />\n546|      <SelectIcon as={IconComponent} className={classes.icon} ownerState={ownerState} />\n547|      <Menu\n548|        id={`menu-${name || ''}`}\n549|        anchorEl={displayNode}\n550|        open={open}\n551|        onClose={handleClose}\n552|        anchorOrigin={{\n553|          vertical: 'bottom',\n554|          horizontal: 'center',\n555|        }}\n556|        transformOrigin={{\n557|          vertical: 'top',\n558|          horizontal: 'center',\n559|        }}\n560|        {...MenuProps}\n561|        MenuListProps={{\n562|          'aria-labelledby': labelId,\n563|          role: 'listbox',\n564|          disableListWrap: true,\n565|          ...MenuProps.MenuListProps,\n566|        }}\n567|        PaperProps={{\n568|          ...MenuProps.PaperProps,\n569|          style: {\n570|            minWidth: menuMinWidth,\n571|            ...(MenuProps.PaperProps != null ? MenuProps.PaperProps.style : null),\n572|          },\n573|        }}\n574|      >\n575|        {items}\n576|      </Menu>\n577|    </React.Fragment>\n578|  );\n579|});\n580|\n581|SelectInput.propTypes = {\n582|  /**\n583|   * @ignore\n584|   */\n585|  'aria-describedby': PropTypes.string,\n586|  /**\n587|   * @ignore\n588|   */\n589|  'aria-label': PropTypes.string,\n590|  /**\n591|   * @ignore\n592|   */\n593|  autoFocus: PropTypes.bool,\n594|  /**\n595|   * If `true`, the width of the popover will automatically be set according to the items inside the\n596|   * menu, otherwise it will be at least the width of the select input.\n597|   */\n598|  autoWidth: PropTypes.bool,\n599|  /**\n600|   * The option elements to populate the select with.\n601|   * Can be some `<MenuItem>` elements.\n602|   */\n603|  children: PropTypes.node,\n604|  /**\n605|   * Override or extend the styles applied to the component.\n606|   * See [CSS API](#css) below for more details.\n607|   */\n608|  classes: PropTypes.object,\n609|  /**\n610|   * The CSS class name of the select element.\n611|   */\n612|  className: PropTypes.string,\n613|  /**\n614|   * If `true`, the component is toggled on mount. Use when the component open state is not controlled.\n615|   * You can only use it when the `native` prop is `false` (default).\n616|   */\n617|  defaultOpen: PropTypes.bool,\n618|  /**\n619|   * The default value. Use when the component is not controlled.\n620|   */\n621|  defaultValue: PropTypes.any,\n622|  /**\n623|   * If `true`, the select is disabled.\n624|   */\n625|  disabled: PropTypes.bool,\n626|  /**\n627|   * If `true`, the selected item is displayed even if its value is empty.\n628|   */\n629|  displayEmpty: PropTypes.bool,\n630|  /**\n631|   * The icon that displays the arrow.\n632|   */\n633|  IconComponent: PropTypes.elementType.isRequired,\n634|  /**\n635|   * Imperative handle implementing `{ value: T, node: HTMLElement, focus(): void }`\n636|   * Equivalent to `ref`\n637|   */\n638|  inputRef: refType,\n639|  /**\n640|   * The ID of an element that acts as an additional label. The Select will\n641|   * be labelled by the additional label and the selected value.\n642|   */\n643|  labelId: PropTypes.string,\n644|  /**\n645|   * Props applied to the [`Menu`](/material-ui/api/menu/) element.\n646|   */\n647|  MenuProps: PropTypes.object,\n648|  /**\n649|   * If `true`, `value` must be an array and the menu will support multiple selections.\n650|   */\n651|  multiple: PropTypes.bool,\n652|  /**\n653|   * Name attribute of the `select` or hidden `input` element.\n654|   */\n655|  name: PropTypes.string,\n656|  /**\n657|   * @ignore\n658|   */\n659|  onBlur: PropTypes.func,\n660|  /**\n661|   * Callback fired when a menu item is selected.\n662|   *\n663|   * @param {object} event The event source of the callback.\n664|   * You can pull out the new value by accessing `event.target.value` (any).\n665|   * @param {object} [child] The react element that was selected.\n666|   */\n667|  onChange: PropTypes.func,\n668|  /**\n669|   * Callback fired when the component requests to be closed.\n670|   * Use in controlled mode (see open).\n671|   *\n672|   * @param {object} event The event source of the callback.\n673|   */\n674|  onClose: PropTypes.func,\n675|  /**\n676|   * @ignore\n677|   */\n678|  onFocus: PropTypes.func,\n679|  /**\n680|   * Callback fired when the component requests to be opened.\n681|   * Use in controlled mode (see open).\n682|   *\n683|   * @param {object} event The event source of the callback.\n684|   */\n685|  onOpen: PropTypes.func,\n686|  /**\n687|   * If `true`, the component is shown.\n688|   */\n689|  open: PropTypes.bool,\n690|  /**\n691|   * @ignore\n692|   */\n693|  readOnly: PropTypes.bool,\n694|  /**\n695|   * Render the selected value.\n696|   *\n697|   * @param {any} value The `value` provided to the component.\n698|   * @returns {ReactNode}\n699|   */\n700|  renderValue: PropTypes.func,\n701|  /**\n702|   * Props applied to the clickable div element.\n703|   */\n704|  SelectDisplayProps: PropTypes.object,\n705|  /**\n706|   * @ignore\n707|   */\n708|  tabIndex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n709|  /**\n710|   * @ignore\n711|   */\n712|  type: PropTypes.any,\n713|  /**\n714|   * The input value.\n715|   */\n716|  value: PropTypes.any,\n717|  /**\n718|   * The variant to use.\n719|   */\n720|  variant: PropTypes.oneOf(['standard', 'outlined', 'filled']),\n721|};\n722|\n723|export default SelectInput;\n\n\n### packages/mui-material/src/Select/Select.js\n...\n25|  shouldForwardProp: (prop) => rootShouldForwardProp(prop) && prop !== 'variant',\n26|  slot: 'Root',\n27|};\n28|\n29|const StyledInput = styled(Input, styledRootConfig)('');\n30|\n31|const StyledOutlinedInput = styled(OutlinedInput, styledRootConfig)('');\n32|\n33|const StyledFilledInput = styled(FilledInput, styledRootConfig)('');\n34|\n35|const Select = React.forwardRef(function Select(inProps, ref) {\n36|  const props = useThemeProps({ name: 'MuiSelect', props: inProps });\n37|  const {\n38|    autoWidth = false,\n39|    children,\n40|    classes: classesProp = {},\n41|    className,\n42|    defaultOpen = false,\n43|    displayEmpty = false,\n44|    IconComponent = ArrowDropDownIcon,\n45|    id,\n46|    input,\n47|    inputProps,\n48|    label,\n49|    labelId,\n50|    MenuProps,\n51|    multiple = false,\n52|    native = false,\n53|    onClose,\n54|    onOpen,\n55|    open,\n56|    renderValue,\n57|    SelectDisplayProps,\n58|    variant: variantProp = 'outlined',\n59|    ...other\n60|  } = props;\n61|\n62|  const inputComponent = native ? NativeSelectInput : SelectInput;\n63|\n64|  const muiFormControl = useFormControl();\n65|  const fcs = formControlState({\n...\n\n\n\n\n###\n\nPlease provide the class name, function or method name, or the exact line numbers that need to be edited.\nThe possible location outputs should be either \"class\", \"function\" or \"line\".\n\n### Examples:\n```\nfull_path1/file1.ts\nline: 10\nclass: MyClass1\nline: 51\n\nfull_path2/file2.ts\nfunction: MyClass2.my_method\nline: 12\n\nfull_path3/file3.ts\nfunction: my_function\nline: 24\nline: 156\n```\n\nReturn just the location(s) wrapped with ```.\n",
        "response": [
          "```\npackages/mui-material/src/Select/SelectInput.js\nline: 176\nline: 219\nline: 481\nline: 482\nline: 549\n```",
          "```\npackages/mui-material/src/Select/SelectInput.js\nline: 177\nline: 219\nline: 482\nline: 549\nline: 554\nline: 558\n```"
        ],
        "usage": {
          "completion_tokens": 0,
          "prompt_tokens": 0
        }
      },
      "additional_artifact_loc_edit_location": [
        {
          "raw_output_loc": [
            "```\npackages/mui-material/src/Select/SelectInput.js\nline: 176\nline: 219\nline: 481\nline: 482\nline: 549\n```",
            "```\npackages/mui-material/src/Select/SelectInput.js\nline: 177\nline: 219\nline: 482\nline: 549\nline: 554\nline: 558\n```"
          ]
        }
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/packages/mui-material/src/Select/SelectInput.js b/packages/mui-material/src/Select/SelectInput.js\nindex 86be44b..c49eaaf 100644\n--- a/packages/mui-material/src/Select/SelectInput.js\n+++ b/packages/mui-material/src/Select/SelectInput.js\n@@ -173,7 +173,9 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n   // Resize menu on `defaultOpen` automatic toggle.\n   React.useEffect(() => {\n     if (defaultOpen && openState && displayNode && !isOpenControlled) {\n-      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n+      setMenuMinWidthState(\n+        autoWidth ? null : (displayNode.parentElement || displayNode).clientWidth,\n+      );\n       displayRef.current.focus();\n     }\n     // eslint-disable-next-line react-hooks/exhaustive-deps\n@@ -215,7 +217,9 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n     }\n \n     if (!isOpenControlled) {\n-      setMenuMinWidthState(autoWidth ? null : displayNode.clientWidth);\n+      setMenuMinWidthState(\n+        autoWidth ? null : (displayNode.parentElement || displayNode).clientWidth,\n+      );\n       setOpenState(open);\n     }\n   };\n@@ -479,7 +483,7 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n   let menuMinWidth = menuMinWidthState;\n \n   if (!autoWidth && isOpenControlled && displayNode) {\n-    menuMinWidth = displayNode.clientWidth;\n+    menuMinWidth = (displayNode.parentElement || displayNode).clientWidth;\n   }\n \n   let tabIndex;\n@@ -546,16 +550,16 @@ const SelectInput = React.forwardRef(function SelectInput(props, ref) {\n       <SelectIcon as={IconComponent} className={classes.icon} ownerState={ownerState} />\n       <Menu\n         id={`menu-${name || ''}`}\n-        anchorEl={displayNode}\n+        anchorEl={displayNode ? displayNode.parentElement : displayNode}\n         open={open}\n         onClose={handleClose}\n         anchorOrigin={{\n           vertical: 'bottom',\n-          horizontal: 'center',\n+          horizontal: 'left',\n         }}\n         transformOrigin={{\n           vertical: 'top',\n-          horizontal: 'center',\n+          horizontal: 'left',\n         }}\n         {...MenuProps}\n         MenuListProps={{\n",
  "7_resolved": false
}