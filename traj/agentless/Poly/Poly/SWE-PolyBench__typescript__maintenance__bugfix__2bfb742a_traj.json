{
    "instance_id": "SWE-PolyBench__typescript__maintenance__bugfix__2bfb742a",
    "original_id": "mui__material-ui-20252",
    "1_model_selected_files": [
        "packages/material-ui/src/Tooltip/Tooltip.js",
        "packages/material-ui/src/Tooltip/Tooltip.test.js",
        "packages/material-ui/src/utils/createChainedFunction.js",
        "packages/material-ui/src/TextField/TextField.js",
        "packages/material-ui/src/InputBase/InputBase.js"
    ],
    "2_embedding_selected_files": [
        "packages/material-ui/src/Tooltip/Tooltip.js",
        "packages/material-ui/src/Tooltip/Tooltip.test.js",
        "packages/material-ui/src/Modal/TrapFocus.js",
        "packages/material-ui/src/utils/focusVisible.test.js",
        "packages/material-ui/src/ButtonBase/ButtonBase.test.js",
        "packages/material-ui/src/utils/focusVisible.js",
        "packages/material-ui/src/TextField/TextField.js",
        "packages/material-ui/src/InputBase/InputBase.js",
        "packages/material-ui-lab/src/Autocomplete/Autocomplete.test.js",
        "packages/material-ui/src/Modal/Modal.test.js",
        "packages/material-ui/src/TextField/TextField.test.js",
        "docs/src/pages/components/tooltips/ControlledTooltips.js",
        "packages/material-ui/src/InputBase/InputBase.test.js",
        "docs/src/pages/components/tooltips/TriggersTooltips.js",
        "packages/material-ui/src/Select/Select.test.js",
        "packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js",
        "packages/material-ui/src/ExpansionPanelSummary/ExpansionPanelSummary.test.js",
        "docs/src/pages/components/tooltips/DisabledTooltips.js",
        "docs/src/pages/components/tooltips/InteractiveTooltips.js",
        "packages/material-ui/src/FormControl/FormControl.js",
        "packages/material-ui/src/Select/SelectInput.js",
        "packages/material-ui/src/Input/Input.js",
        "docs/src/pages/components/text-fields/FormPropsTextFields.js",
        "packages/material-ui/src/FormControl/FormControl.test.js",
        "packages/material-ui/src/Tooltip/Tooltip.d.ts",
        "packages/material-ui-lab/src/TreeItem/TreeItem.test.js",
        "docs/src/pages/components/speed-dial/SpeedDialTooltipOpen.js",
        "packages/material-ui-lab/src/Rating/Rating.js",
        "docs/src/pages/components/tooltips/CustomizedTooltips.js",
        "docs/src/pages/premium-themes/onepirate/modules/components/TextField.js",
        "docs/src/pages/components/text-fields/InputAdornments.js",
        "docs/src/pages/components/text-fields/ComposedTextField.js",
        "packages/material-ui/src/OutlinedInput/OutlinedInput.js",
        "docs/src/pages/components/popover/MouseOverPopover.js",
        "docs/src/pages/components/popover/AnchorPlayground.js",
        "packages/material-ui/src/InputLabel/InputLabel.test.js",
        "packages/material-ui/src/Link/Link.test.js",
        "packages/material-ui/src/FormHelperText/FormHelperText.js",
        "docs/src/pages/components/text-fields/ValidationTextFields.js",
        "docs/src/pages/components/tooltips/SimpleTooltips.js",
        "docs/src/pages/components/tooltips/TransitionsTooltips.js",
        "packages/material-ui/src/InputAdornment/InputAdornment.test.js",
        "packages/material-ui/src/Tooltip/index.js",
        "packages/material-ui/src/FilledInput/FilledInput.test.js",
        "packages/material-ui/src/OutlinedInput/NotchedOutline.test.js",
        "docs/src/pages/components/tooltips/PositionedTooltips.js",
        "docs/src/pages/components/text-fields/StateTextFields.js",
        "packages/material-ui/src/TextField/TextField.d.ts",
        "packages/material-ui/src/internal/SwitchBase.test.js",
        "docs/src/pages/components/text-fields/BasicTextFields.js",
        "packages/material-ui/src/FormLabel/FormLabel.test.js",
        "packages/material-ui/src/MenuList/MenuList.js",
        "docs/src/pages/components/text-fields/CustomizedInputs.js"
    ],
    "3_final_combined_files": [
        "packages/material-ui/src/Tooltip/Tooltip.js",
        "packages/material-ui/src/Tooltip/Tooltip.test.js",
        "packages/material-ui/src/utils/createChainedFunction.js",
        "packages/material-ui/src/Modal/TrapFocus.js"
    ],
    "4_related_elements": {
        "packages/material-ui/src/Tooltip/Tooltip.js": [
            "function: Tooltip\nfunction: handleFocus\nfunction: handleLeave\nfunction: handleEnter\nvariable: interactiveWrapperListeners"
        ],
        "packages/material-ui/src/utils/createChainedFunction.js": [
            "function: createChainedFunction"
        ],
        "packages/material-ui/src/Tooltip/Tooltip.test.js": [
            ""
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "packages/material-ui/src/Tooltip/Tooltip.js": [
                    "line: 16\nline: 463\nline: 464\nline: 343\nline: 344\nline: 345\nline: 370\nline: 371\nline: 372"
                ],
                "packages/material-ui/src/Tooltip/Tooltip.test.js": [
                    ""
                ],
                "packages/material-ui/src/utils/createChainedFunction.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/material-ui/src/Tooltip/Tooltip.js b/packages/material-ui/src/Tooltip/Tooltip.js\nindex 01eb0d8..3321632 100644\n--- a/packages/material-ui/src/Tooltip/Tooltip.js\n+++ b/packages/material-ui/src/Tooltip/Tooltip.js\n@@ -340,7 +340,7 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n     }\n \n     const childrenProps = children.props;\n-    if (childrenProps.onFocus && event.currentTarget === childNode) {\n+    if (childrenProps.onFocus && (childNode == null || event.currentTarget === childNode)) {\n       childrenProps.onFocus(event);\n     }\n   };\n@@ -366,7 +366,7 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n     const childrenProps = children.props;\n \n     if (event.type === 'blur') {\n-      if (childrenProps.onBlur && event.currentTarget === childNode) {\n+      if (childrenProps.onBlur && (childNode == null || event.currentTarget === childNode)) {\n         childrenProps.onBlur(event);\n       }\n       handleBlur(event);\n@@ -375,7 +375,7 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n     if (\n       event.type === 'mouseleave' &&\n       childrenProps.onMouseLeave &&\n-      event.currentTarget === childNode\n+      (childNode == null || event.currentTarget === childNode)\n     ) {\n       childrenProps.onMouseLeave(event);\n     }\n",
                "diff --git a/packages/material-ui/src/Tooltip/Tooltip.js b/packages/material-ui/src/Tooltip/Tooltip.js\nindex 01eb0d8..1733d15 100644\n--- a/packages/material-ui/src/Tooltip/Tooltip.js\n+++ b/packages/material-ui/src/Tooltip/Tooltip.js\n@@ -340,7 +340,7 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n     }\n \n     const childrenProps = children.props;\n-    if (childrenProps.onFocus && event.currentTarget === childNode) {\n+    if (childrenProps.onFocus) {\n       childrenProps.onFocus(event);\n     }\n   };\n@@ -366,17 +366,13 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n     const childrenProps = children.props;\n \n     if (event.type === 'blur') {\n-      if (childrenProps.onBlur && event.currentTarget === childNode) {\n+      if (childrenProps.onBlur) {\n         childrenProps.onBlur(event);\n       }\n       handleBlur(event);\n     }\n \n-    if (\n-      event.type === 'mouseleave' &&\n-      childrenProps.onMouseLeave &&\n-      event.currentTarget === childNode\n-    ) {\n+    if (event.type === 'mouseleave' && childrenProps.onMouseLeave) {\n       childrenProps.onMouseLeave(event);\n     }\n \n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "packages/material-ui/src/Tooltip/Tooltip.js": [
                    "line: 343\nline: 344\nline: 345\nline: 369\nline: 370\nline: 371"
                ],
                "packages/material-ui/src/Tooltip/Tooltip.test.js": [
                    ""
                ],
                "packages/material-ui/src/utils/createChainedFunction.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/material-ui/src/Tooltip/Tooltip.js b/packages/material-ui/src/Tooltip/Tooltip.js\nindex 01eb0d8..d457618 100644\n--- a/packages/material-ui/src/Tooltip/Tooltip.js\n+++ b/packages/material-ui/src/Tooltip/Tooltip.js\n@@ -339,10 +339,8 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n       handleEnter(event);\n     }\n \n-    const childrenProps = children.props;\n-    if (childrenProps.onFocus && event.currentTarget === childNode) {\n-      childrenProps.onFocus(event);\n-    }\n+    // Child's onFocus is called via the wrapper assigned during render.\n+    // Avoid calling childrenProps.onFocus here to prevent recursion.\n   };\n \n   const handleClose = (event) => {\n@@ -460,7 +458,13 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n   }\n \n   if (!disableFocusListener) {\n-    childrenProps.onFocus = handleFocus;\n+    const userOnFocus = childrenProps.onFocus;\n+    childrenProps.onFocus = (event) => {\n+      handleFocus(event);\n+      if (userOnFocus && event.currentTarget === childNode) {\n+        userOnFocus(event);\n+      }\n+    };\n     childrenProps.onBlur = handleLeave;\n   }\n \n",
                "diff --git a/packages/material-ui/src/Tooltip/Tooltip.js b/packages/material-ui/src/Tooltip/Tooltip.js\nindex 01eb0d8..52af043 100644\n--- a/packages/material-ui/src/Tooltip/Tooltip.js\n+++ b/packages/material-ui/src/Tooltip/Tooltip.js\n@@ -340,7 +340,7 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n     }\n \n     const childrenProps = children.props;\n-    if (childrenProps.onFocus && event.currentTarget === childNode) {\n+    if (childrenProps.onFocus) {\n       childrenProps.onFocus(event);\n     }\n   };\n@@ -366,7 +366,7 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n     const childrenProps = children.props;\n \n     if (event.type === 'blur') {\n-      if (childrenProps.onBlur && event.currentTarget === childNode) {\n+      if (childrenProps.onBlur) {\n         childrenProps.onBlur(event);\n       }\n       handleBlur(event);\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/packages/material-ui/src/Tooltip/Tooltip.js b/packages/material-ui/src/Tooltip/Tooltip.js\nindex 01eb0d8..3321632 100644\n--- a/packages/material-ui/src/Tooltip/Tooltip.js\n+++ b/packages/material-ui/src/Tooltip/Tooltip.js\n@@ -340,7 +340,7 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n     }\n \n     const childrenProps = children.props;\n-    if (childrenProps.onFocus && event.currentTarget === childNode) {\n+    if (childrenProps.onFocus && (childNode == null || event.currentTarget === childNode)) {\n       childrenProps.onFocus(event);\n     }\n   };\n@@ -366,7 +366,7 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n     const childrenProps = children.props;\n \n     if (event.type === 'blur') {\n-      if (childrenProps.onBlur && event.currentTarget === childNode) {\n+      if (childrenProps.onBlur && (childNode == null || event.currentTarget === childNode)) {\n         childrenProps.onBlur(event);\n       }\n       handleBlur(event);\n@@ -375,7 +375,7 @@ const Tooltip = React.forwardRef(function Tooltip(props, ref) {\n     if (\n       event.type === 'mouseleave' &&\n       childrenProps.onMouseLeave &&\n-      event.currentTarget === childNode\n+      (childNode == null || event.currentTarget === childNode)\n     ) {\n       childrenProps.onMouseLeave(event);\n     }\n"
}