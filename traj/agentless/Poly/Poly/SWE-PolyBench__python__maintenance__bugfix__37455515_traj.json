{
    "instance_id": "SWE-PolyBench__python__maintenance__bugfix__37455515",
    "original_id": "yt-dlp__yt-dlp-5933",
    "1_model_selected_files": [
        "yt_dlp/options.py",
        "yt_dlp/__main__.py",
        "yt_dlp/utils.py",
        "yt_dlp/YoutubeDL.py"
    ],
    "2_embedding_selected_files": [],
    "3_final_combined_files": [
        "yt_dlp/options.py",
        "yt_dlp/__main__.py",
        "yt_dlp/utils.py"
    ],
    "4_related_elements": {
        "yt_dlp/options.py": [
            "function: parseOpts\nclass: _YoutubeDLOptionParser\nfunction: create_parser"
        ],
        "yt_dlp/utils.py": [
            "class: Config\nfunction: cli_configuration_args\nfunction: _configuration_args\nfunction: get_system_config_dirs\nfunction: get_user_config_dirs\nfunction: expand_path"
        ],
        "yt_dlp/__main__.py": [
            ""
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "yt_dlp/options.py": [
                    "function: parseOpts._read_system_conf"
                ],
                "yt_dlp/__main__.py": [
                    ""
                ],
                "yt_dlp/utils.py": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/yt_dlp/options.py b/yt_dlp/options.py\nindex ac704c9..9d1298f 100644\n--- a/yt_dlp/options.py\n+++ b/yt_dlp/options.py\n@@ -79,6 +79,13 @@ def parseOpts(overrideArguments=None, ignore_config_files='if_override'):\n         return default if default is not None else [], None\n \n     def _read_system_conf(package_name, default=None):\n+        # First check legacy system-wide config at /etc/<package_name>.conf\n+        legacy_conf_file = os.path.join('/etc', f'{package_name}.conf')\n+        legacy_conf = Config.read_file(legacy_conf_file, default=None)\n+        if legacy_conf is not None:\n+            return legacy_conf, legacy_conf_file\n+\n+        # Then check system config directories (e.g. /etc/xdg/<package_name>/<package_name>.conf)\n         system_conf, system_conf_file = _load_from_config_dirs(get_system_config_dirs(package_name))\n         if system_conf is not None:\n             return system_conf, system_conf_file\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "yt_dlp/options.py": [
                    "function: parseOpts._read_system_conf\nline: 81\nline: 82\nline: 83\nline: 84\nline: 85"
                ],
                "yt_dlp/__main__.py": [
                    ""
                ],
                "yt_dlp/utils.py": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/yt_dlp/options.py b/yt_dlp/options.py\nindex ac704c9..1b8f866 100644\n--- a/yt_dlp/options.py\n+++ b/yt_dlp/options.py\n@@ -79,6 +79,13 @@ def parseOpts(overrideArguments=None, ignore_config_files='if_override'):\n         return default if default is not None else [], None\n \n     def _read_system_conf(package_name, default=None):\n+        # First check legacy global config file: /etc/<package_name>.conf\n+        legacy_conf_file = os.path.join('/etc', f'{package_name}.conf')\n+        legacy_conf = Config.read_file(legacy_conf_file, default=None)\n+        if legacy_conf is not None:\n+            return legacy_conf, legacy_conf_file\n+\n+        # Then check XDG system config directories (e.g. /etc/xdg/<package_name>/...)\n         system_conf, system_conf_file = _load_from_config_dirs(get_system_config_dirs(package_name))\n         if system_conf is not None:\n             return system_conf, system_conf_file\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/yt_dlp/options.py b/yt_dlp/options.py\nindex ac704c9..9d1298f 100644\n--- a/yt_dlp/options.py\n+++ b/yt_dlp/options.py\n@@ -79,6 +79,13 @@ def parseOpts(overrideArguments=None, ignore_config_files='if_override'):\n         return default if default is not None else [], None\n \n     def _read_system_conf(package_name, default=None):\n+        # First check legacy system-wide config at /etc/<package_name>.conf\n+        legacy_conf_file = os.path.join('/etc', f'{package_name}.conf')\n+        legacy_conf = Config.read_file(legacy_conf_file, default=None)\n+        if legacy_conf is not None:\n+            return legacy_conf, legacy_conf_file\n+\n+        # Then check system config directories (e.g. /etc/xdg/<package_name>/<package_name>.conf)\n         system_conf, system_conf_file = _load_from_config_dirs(get_system_config_dirs(package_name))\n         if system_conf is not None:\n             return system_conf, system_conf_file\n"
}