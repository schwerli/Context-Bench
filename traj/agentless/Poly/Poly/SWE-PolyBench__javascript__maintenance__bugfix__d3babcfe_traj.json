{
    "instance_id": "SWE-PolyBench__javascript__maintenance__bugfix__d3babcfe",
    "original_id": "sveltejs__svelte-1227",
    "1_model_selected_files": [
        "src/generators/nodes/Element.ts",
        "src/generators/nodes/Fragment.ts",
        "src/generators/dom/Block.ts"
    ],
    "2_embedding_selected_files": [
        "src/generators/nodes/Element.ts",
        "src/generators/dom/index.ts",
        "src/css/Stylesheet.ts",
        "src/css/Selector.ts",
        "src/generators/server-side-rendering/visitors/Element.ts",
        "src/shared/dom.js",
        "src/generators/nodes/shared/Tag.ts",
        "src/parse/state/tag.ts",
        "src/validate/html/validateElement.ts",
        "src/validate/html/index.ts",
        "src/generators/nodes/MustacheTag.ts",
        "src/generators/nodes/Attribute.ts",
        "src/generators/nodes/EachBlock.ts",
        "src/validate/html/a11y.ts",
        "src/generators/nodes/Slot.ts",
        "src/generators/nodes/Component.ts",
        "src/generators/nodes/Fragment.ts",
        "src/generators/nodes/Title.ts",
        "src/generators/server-side-rendering/visitors/MustacheTag.ts",
        "src/generators/nodes/RawMustacheTag.ts",
        "src/validate/html/validateHead.ts",
        "src/generators/server-side-rendering/visitors/index.ts",
        "src/generators/Generator.ts",
        "src/generators/server-side-rendering/visitors/Component.ts",
        "src/utils/__test__.ts",
        "src/parse/state/fragment.ts",
        "src/generators/nodes/IfBlock.ts",
        "src/parse/state/mustache.ts",
        "src/shared/transitions.js",
        "src/generators/nodes/shared/Node.ts",
        "src/generators/dom/Block.ts",
        "src/generators/nodes/Text.ts",
        "src/shared/index.js",
        "src/validate/js/propValidators/tag.ts",
        "src/parse/read/style.ts",
        "src/index.ts",
        "src/generators/server-side-rendering/index.ts",
        "src/generators/server-side-rendering/visitors/EachBlock.ts",
        "src/generators/server-side-rendering/visitors/Head.ts",
        "src/generators/nodes/Window.ts",
        "src/generators/nodes/Head.ts",
        "src/validate/html/validateWindow.ts",
        "src/generators/server-side-rendering/visitors/Title.ts",
        "src/generators/server-side-rendering/visitors/Slot.ts",
        "src/generators/nodes/index.ts",
        "src/generators/server-side-rendering/visitors/Comment.ts",
        "src/generators/nodes/PendingBlock.ts",
        "src/generators/nodes/ElseBlock.ts",
        "src/generators/server-side-rendering/visitors/IfBlock.ts",
        "src/generators/server-side-rendering/visitors/RawMustacheTag.ts",
        "src/generators/server-side-rendering/interfaces.ts",
        "src/generators/server-side-rendering/visitors/Text.ts"
    ],
    "3_final_combined_files": [
        "src/generators/nodes/Element.ts",
        "src/generators/nodes/Fragment.ts",
        "src/generators/dom/Block.ts",
        "src/generators/dom/index.ts",
        "src/css/Stylesheet.ts"
    ],
    "4_related_elements": {
        "src/generators/nodes/Element.ts": [
            "function: stringifyAttributeValue\nfunction: toHTML\nfunction: Element.build"
        ],
        "src/generators/nodes/Fragment.ts": [
            ""
        ],
        "src/generators/dom/Block.ts": [
            ""
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "src/generators/nodes/Element.ts": [
                    "function: stringifyAttributeValue\nline: 733\nline: 734\nline: 735\nline: 736\nline: 737\nline: 738\nline: 739\nline: 740"
                ],
                "src/generators/nodes/Fragment.ts": [
                    ""
                ],
                "src/generators/dom/Block.ts": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/generators/nodes/Element.ts b/src/generators/nodes/Element.ts\nindex 7b67e57..f0e6ef6 100644\n--- a/src/generators/nodes/Element.ts\n+++ b/src/generators/nodes/Element.ts\n@@ -731,11 +731,11 @@ function quoteProp(name: string, legacy: boolean) {\n \treturn name;\n }\n \n-function stringifyAttributeValue(value: Node | true) {\n+function stringifyAttributeValue(value: Node[] | true) {\n \tif (value === true) return '';\n \tif (value.length === 0) return `=\"\"`;\n \n-\tconst data = value[0].data;\n+\tconst data = value.map((n: Node) => n.data).join('');\n \treturn `=${JSON.stringify(data)}`;\n }\n \n",
                "diff --git a/src/generators/nodes/Element.ts b/src/generators/nodes/Element.ts\nindex 7b67e57..a452e63 100644\n--- a/src/generators/nodes/Element.ts\n+++ b/src/generators/nodes/Element.ts\n@@ -731,11 +731,11 @@ function quoteProp(name: string, legacy: boolean) {\n \treturn name;\n }\n \n-function stringifyAttributeValue(value: Node | true) {\n+function stringifyAttributeValue(value: Array<Node> | true) {\n \tif (value === true) return '';\n \tif (value.length === 0) return `=\"\"`;\n \n-\tconst data = value[0].data;\n+\tconst data = value.map(node => node.data).join('');\n \treturn `=${JSON.stringify(data)}`;\n }\n \n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "src/generators/nodes/Element.ts": [
                    "function: stringifyAttributeValue\nline: 733\nline: 734\nline: 735\nline: 736\nline: 737\nline: 738\nline: 739\nline: 740"
                ],
                "src/generators/nodes/Fragment.ts": [
                    ""
                ],
                "src/generators/dom/Block.ts": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/generators/nodes/Element.ts b/src/generators/nodes/Element.ts\nindex 7b67e57..d39fb3a 100644\n--- a/src/generators/nodes/Element.ts\n+++ b/src/generators/nodes/Element.ts\n@@ -731,11 +731,11 @@ function quoteProp(name: string, legacy: boolean) {\n \treturn name;\n }\n \n-function stringifyAttributeValue(value: Node | true) {\n+function stringifyAttributeValue(value: Node[] | true) {\n \tif (value === true) return '';\n \tif (value.length === 0) return `=\"\"`;\n \n-\tconst data = value[0].data;\n+\tconst data = value.map(v => v.data).join('');\n \treturn `=${JSON.stringify(data)}`;\n }\n \n",
                "diff --git a/src/generators/nodes/Element.ts b/src/generators/nodes/Element.ts\nindex 7b67e57..d6a6187 100644\n--- a/src/generators/nodes/Element.ts\n+++ b/src/generators/nodes/Element.ts\n@@ -731,11 +731,17 @@ function quoteProp(name: string, legacy: boolean) {\n \treturn name;\n }\n \n-function stringifyAttributeValue(value: Node | true) {\n+function stringifyAttributeValue(value: Node[] | Node | true) {\n \tif (value === true) return '';\n-\tif (value.length === 0) return `=\"\"`;\n+\tif (Array.isArray(value)) {\n+\t\tif (value.length === 0) return `=\"\"`;\n+\t\t// concatenate all static attribute chunks (including any injected scoping class)\n+\t\tconst data = value.map(node => node.data).join('');\n+\t\treturn `=${JSON.stringify(data)}`;\n+\t}\n \n-\tconst data = value[0].data;\n+\t// fallback for single node value\n+\tconst data = (value as Node).data;\n \treturn `=${JSON.stringify(data)}`;\n }\n \n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/src/generators/nodes/Element.ts b/src/generators/nodes/Element.ts\nindex 7b67e57..f0e6ef6 100644\n--- a/src/generators/nodes/Element.ts\n+++ b/src/generators/nodes/Element.ts\n@@ -731,11 +731,11 @@ function quoteProp(name: string, legacy: boolean) {\n \treturn name;\n }\n \n-function stringifyAttributeValue(value: Node | true) {\n+function stringifyAttributeValue(value: Node[] | true) {\n \tif (value === true) return '';\n \tif (value.length === 0) return `=\"\"`;\n \n-\tconst data = value[0].data;\n+\tconst data = value.map((n: Node) => n.data).join('');\n \treturn `=${JSON.stringify(data)}`;\n }\n \n"
}