{
    "instance_id": "SWE-PolyBench__typescript__maintenance__bugfix__1de1bd3c",
    "original_id": "mui__material-ui-18683",
    "1_model_selected_files": [
        "packages/material-ui/src/useMediaQuery/useMediaQuery.js",
        "packages/material-ui/src/useMediaQuery/useMediaQuery.test.js",
        "packages/material-ui/src/useMediaQuery/useMediaQueryTheme.js",
        "packages/material-ui/src/useMediaQuery/useMediaQuery.d.ts",
        "packages/material-ui/src/useMediaQuery/index.js"
    ],
    "2_embedding_selected_files": [
        "packages/material-ui/src/useMediaQuery/useMediaQuery.js",
        "packages/material-ui/src/useMediaQuery/useMediaQuery.test.js",
        "docs/src/pages/components/use-media-query/UseWidth.js",
        "docs/src/pages/components/use-media-query/ServerSide.js",
        "docs/src/pages/components/use-media-query/ThemeHelper.js",
        "packages/material-ui/src/withWidth/withWidth.test.js",
        "docs/src/pages/customization/breakpoints/MediaQuery.js",
        "packages/material-ui/src/Grow/Grow.test.js",
        "docs/src/pages/components/use-media-query/JavaScriptMedia.js",
        "packages/material-ui/src/useMediaQuery/useMediaQueryTheme.js",
        "docs/pages/components/use-media-query.js",
        "packages/material-ui/src/useScrollTrigger/useScrollTrigger.test.js",
        "packages/material-ui/src/CardMedia/CardMedia.test.js",
        "packages/material-ui-styles/src/makeStyles/makeStyles.test.js",
        "packages/material-ui/src/LinearProgress/LinearProgress.test.js",
        "docs/src/pages/components/use-media-query/SimpleMediaQuery.js",
        "packages/material-ui/src/utils/focusVisible.test.js",
        "packages/material-ui/src/Zoom/Zoom.test.js",
        "packages/material-ui/src/Collapse/Collapse.test.js",
        "packages/material-ui/src/Hidden/HiddenCss.test.js",
        "packages/material-ui/src/SwipeableDrawer/SwipeableDrawer.test.js",
        "packages/material-ui/src/Modal/Modal.test.js",
        "packages/material-ui/src/NoSsr/NoSsr.test.js",
        "packages/material-ui-styles/src/StylesProvider/StylesProvider.test.js",
        "docs/src/pages/components/progress/DelayingAppearance.js",
        "packages/material-ui/src/Hidden/HiddenJs.test.js",
        "packages/material-ui-styles/src/ThemeProvider/ThemeProvider.test.js",
        "packages/material-ui/src/Fade/Fade.test.js",
        "packages/material-ui-styles/src/styled/styled.test.js",
        "packages/material-ui/src/Tabs/ScrollbarSize.test.js",
        "packages/material-ui/src/Switch/Switch.test.js",
        "packages/material-ui/src/withWidth/withWidth.js",
        "packages/material-ui/src/utils/index.test.js",
        "packages/material-ui/src/internal/SwitchBase.test.js",
        "packages/material-ui/src/GridListTile/GridListTile.test.js",
        "packages/material-ui/src/Tabs/Tabs.test.js",
        "packages/material-ui/src/TextareaAutosize/TextareaAutosize.test.js",
        "packages/material-ui/src/Portal/Portal.test.js",
        "packages/material-ui/src/FormHelperText/FormHelperText.test.js",
        "packages/material-ui/src/Tooltip/Tooltip.test.js",
        "packages/material-ui/src/ButtonBase/ButtonBase.test.js",
        "packages/material-ui/src/NoSsr/NoSsr.js",
        "packages/material-ui/src/styles/transitions.test.js",
        "docs/src/pages/styles/basics/StressTest.js",
        "packages/material-ui/src/ButtonBase/TouchRipple.test.js",
        "packages/material-ui/src/Dialog/Dialog.test.js",
        "docs/src/pages/components/no-ssr/FrameDeferring.js",
        "packages/material-ui/src/ExpansionPanelSummary/ExpansionPanelSummary.test.js",
        "packages/material-ui/src/InputBase/InputBase.test.js",
        "packages/material-ui-utils/src/elementAcceptingRef.test.js",
        "packages/material-ui-utils/src/elementTypeAcceptingRef.test.js",
        "packages/material-ui/src/Typography/Typography.test.js",
        "packages/material-ui/src/Hidden/HiddenJs.js",
        "packages/material-ui/src/InputAdornment/InputAdornment.test.js",
        "packages/material-ui-styles/src/withStyles/withStyles.test.js",
        "docs/src/pages/components/hidden/BreakpointOnly.js",
        "packages/material-ui/src/GridList/GridList.test.js",
        "packages/material-ui/src/ButtonBase/Ripple.test.js",
        "packages/material-ui/src/Tab/Tab.test.js",
        "packages/material-ui/src/FormControl/FormControl.test.js",
        "packages/material-ui-lab/src/ToggleButton/ToggleButton.test.js",
        "packages/material-ui/src/Popper/Popper.test.js",
        "packages/material-ui/src/OutlinedInput/NotchedOutline.test.js",
        "packages/material-ui/src/TablePagination/TablePagination.test.js"
    ],
    "3_final_combined_files": [
        "packages/material-ui/src/useMediaQuery/useMediaQuery.js",
        "packages/material-ui/src/useMediaQuery/useMediaQuery.test.js",
        "packages/material-ui/src/useMediaQuery/useMediaQueryTheme.js",
        "docs/src/pages/components/use-media-query/UseWidth.js"
    ],
    "4_related_elements": {
        "packages/material-ui/src/useMediaQuery/useMediaQuery.js": [
            "variable: hydrationCompleted\nfunction: useMediaQuery\nfunction: testReset\nvariable: supportMatchMedia"
        ],
        "packages/material-ui/src/useMediaQuery/useMediaQuery.test.js": [
            "function: createMatchMedia\nvariable: window.matchMedia"
        ],
        "packages/material-ui/src/useMediaQuery/useMediaQueryTheme.js": [
            "function: useMediaQueryTheme"
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "packages/material-ui/src/useMediaQuery/useMediaQuery.js": [
                    "line: 5\nline: 43\nline: 57\nline: 84\nline: 85"
                ],
                "packages/material-ui/src/useMediaQuery/useMediaQuery.test.js": [
                    "line: 10"
                ],
                "packages/material-ui/src/useMediaQuery/useMediaQueryTheme.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/material-ui/src/useMediaQuery/useMediaQuery.js b/packages/material-ui/src/useMediaQuery/useMediaQuery.js\nindex 1faccf1..54a877d 100644\n--- a/packages/material-ui/src/useMediaQuery/useMediaQuery.js\n+++ b/packages/material-ui/src/useMediaQuery/useMediaQuery.js\n@@ -1,8 +1,8 @@\n+\n import React from 'react';\n import { getThemeProps, useTheme } from '@material-ui/styles';\n \n-// This variable will be true once the server-side hydration is completed.\n-let hydrationCompleted = false;\n+ // Deprecated: hydration tracking removed to avoid cross-component side-effects across roots.\n \n function useMediaQuery(queryInput, options = {}) {\n   const theme = useTheme();\n@@ -40,7 +40,7 @@ function useMediaQuery(queryInput, options = {}) {\n   };\n \n   const [match, setMatch] = React.useState(() => {\n-    if ((hydrationCompleted || noSsr) && supportMatchMedia) {\n+    if (noSsr && supportMatchMedia) {\n       return window.matchMedia(query).matches;\n     }\n     if (ssrMatchMedia) {\n@@ -54,7 +54,6 @@ function useMediaQuery(queryInput, options = {}) {\n \n   React.useEffect(() => {\n     let active = true;\n-    hydrationCompleted = true;\n \n     if (!supportMatchMedia) {\n       return undefined;\n@@ -81,7 +80,7 @@ function useMediaQuery(queryInput, options = {}) {\n }\n \n export function testReset() {\n-  hydrationCompleted = false;\n+  // no-op: hydration tracking removed\n }\n \n export default useMediaQuery;\n",
                "diff --git a/packages/material-ui/src/useMediaQuery/useMediaQuery.js b/packages/material-ui/src/useMediaQuery/useMediaQuery.js\nindex 1faccf1..c141940 100644\n--- a/packages/material-ui/src/useMediaQuery/useMediaQuery.js\n+++ b/packages/material-ui/src/useMediaQuery/useMediaQuery.js\n@@ -1,8 +1,8 @@\n+\n import React from 'react';\n import { getThemeProps, useTheme } from '@material-ui/styles';\n \n-// This variable will be true once the server-side hydration is completed.\n-let hydrationCompleted = false;\n+/* Tracking hydration globally has been removed to avoid cross-app side effects. */\n \n function useMediaQuery(queryInput, options = {}) {\n   const theme = useTheme();\n@@ -40,7 +40,7 @@ function useMediaQuery(queryInput, options = {}) {\n   };\n \n   const [match, setMatch] = React.useState(() => {\n-    if ((hydrationCompleted || noSsr) && supportMatchMedia) {\n+    if (noSsr && supportMatchMedia) {\n       return window.matchMedia(query).matches;\n     }\n     if (ssrMatchMedia) {\n@@ -54,7 +54,6 @@ function useMediaQuery(queryInput, options = {}) {\n \n   React.useEffect(() => {\n     let active = true;\n-    hydrationCompleted = true;\n \n     if (!supportMatchMedia) {\n       return undefined;\n@@ -81,7 +80,7 @@ function useMediaQuery(queryInput, options = {}) {\n }\n \n export function testReset() {\n-  hydrationCompleted = false;\n+  // no-op: hydration is no longer tracked globally\n }\n \n export default useMediaQuery;\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "packages/material-ui/src/useMediaQuery/useMediaQuery.js": [
                    "line: 5\nline: 42\nline: 43\nline: 44\nline: 45\nline: 46\nline: 57\nline: 83\nline: 84\nline: 85"
                ],
                "packages/material-ui/src/useMediaQuery/useMediaQuery.test.js": [
                    "line: 10"
                ],
                "packages/material-ui/src/useMediaQuery/useMediaQueryTheme.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/material-ui/src/useMediaQuery/useMediaQuery.js b/packages/material-ui/src/useMediaQuery/useMediaQuery.js\nindex 1faccf1..5d8159a 100644\n--- a/packages/material-ui/src/useMediaQuery/useMediaQuery.js\n+++ b/packages/material-ui/src/useMediaQuery/useMediaQuery.js\n@@ -1,3 +1,4 @@\n+\n import React from 'react';\n import { getThemeProps, useTheme } from '@material-ui/styles';\n \n@@ -40,7 +41,7 @@ function useMediaQuery(queryInput, options = {}) {\n   };\n \n   const [match, setMatch] = React.useState(() => {\n-    if ((hydrationCompleted || noSsr) && supportMatchMedia) {\n+    if (noSsr && supportMatchMedia) {\n       return window.matchMedia(query).matches;\n     }\n     if (ssrMatchMedia) {\n@@ -54,7 +55,6 @@ function useMediaQuery(queryInput, options = {}) {\n \n   React.useEffect(() => {\n     let active = true;\n-    hydrationCompleted = true;\n \n     if (!supportMatchMedia) {\n       return undefined;\n@@ -81,7 +81,7 @@ function useMediaQuery(queryInput, options = {}) {\n }\n \n export function testReset() {\n-  hydrationCompleted = false;\n+  // no-op: hydration tracking removed to avoid cross-component side-effects\n }\n \n export default useMediaQuery;\n",
                "diff --git a/packages/material-ui/src/useMediaQuery/useMediaQuery.js b/packages/material-ui/src/useMediaQuery/useMediaQuery.js\nindex 1faccf1..2c58a01 100644\n--- a/packages/material-ui/src/useMediaQuery/useMediaQuery.js\n+++ b/packages/material-ui/src/useMediaQuery/useMediaQuery.js\n@@ -1,3 +1,4 @@\n+\n import React from 'react';\n import { getThemeProps, useTheme } from '@material-ui/styles';\n \n@@ -40,7 +41,7 @@ function useMediaQuery(queryInput, options = {}) {\n   };\n \n   const [match, setMatch] = React.useState(() => {\n-    if ((hydrationCompleted || noSsr) && supportMatchMedia) {\n+    if (noSsr && supportMatchMedia) {\n       return window.matchMedia(query).matches;\n     }\n     if (ssrMatchMedia) {\n@@ -54,7 +55,6 @@ function useMediaQuery(queryInput, options = {}) {\n \n   React.useEffect(() => {\n     let active = true;\n-    hydrationCompleted = true;\n \n     if (!supportMatchMedia) {\n       return undefined;\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/packages/material-ui/src/useMediaQuery/useMediaQuery.js b/packages/material-ui/src/useMediaQuery/useMediaQuery.js\nindex 1faccf1..54a877d 100644\n--- a/packages/material-ui/src/useMediaQuery/useMediaQuery.js\n+++ b/packages/material-ui/src/useMediaQuery/useMediaQuery.js\n@@ -1,8 +1,8 @@\n+\n import React from 'react';\n import { getThemeProps, useTheme } from '@material-ui/styles';\n \n-// This variable will be true once the server-side hydration is completed.\n-let hydrationCompleted = false;\n+ // Deprecated: hydration tracking removed to avoid cross-component side-effects across roots.\n \n function useMediaQuery(queryInput, options = {}) {\n   const theme = useTheme();\n@@ -40,7 +40,7 @@ function useMediaQuery(queryInput, options = {}) {\n   };\n \n   const [match, setMatch] = React.useState(() => {\n-    if ((hydrationCompleted || noSsr) && supportMatchMedia) {\n+    if (noSsr && supportMatchMedia) {\n       return window.matchMedia(query).matches;\n     }\n     if (ssrMatchMedia) {\n@@ -54,7 +54,6 @@ function useMediaQuery(queryInput, options = {}) {\n \n   React.useEffect(() => {\n     let active = true;\n-    hydrationCompleted = true;\n \n     if (!supportMatchMedia) {\n       return undefined;\n@@ -81,7 +80,7 @@ function useMediaQuery(queryInput, options = {}) {\n }\n \n export function testReset() {\n-  hydrationCompleted = false;\n+  // no-op: hydration tracking removed\n }\n \n export default useMediaQuery;\n"
}