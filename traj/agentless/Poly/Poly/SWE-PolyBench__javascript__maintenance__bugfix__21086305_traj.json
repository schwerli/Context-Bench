{
    "instance_id": "SWE-PolyBench__javascript__maintenance__bugfix__21086305",
    "original_id": "prettier__prettier-11000",
    "1_model_selected_files": [
        "src/cli/expand-patterns.js",
        "src/cli/index.js",
        "src/cli/core.js",
        "src/common/util.js",
        "bin/prettier.js"
    ],
    "2_embedding_selected_files": [
        "bin/prettier.js",
        "src/cli/prettier-internal.js",
        "src/cli/format.js",
        "scripts/install-prettier.js",
        "src/cli/expand-patterns.js",
        "prettier/index.js",
        "src/cli/core.js",
        "src/cli/index.js",
        "prettier/standalone.js",
        "scripts/sync-flow-tests.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/require-json-extensions.js",
        "prettier/jest.config.js",
        "scripts/release/steps/bump-prettier.js",
        "src/main/core-options.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/index.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/no-unnecessary-ast-path-call.js",
        "src/cli/is-tty.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/no-identifier-n.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/flat-ast-path-call.js",
        "src/language-js/print/comment.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/no-empty-flat-contents-for-if-break.js",
        "src/language-markdown/printer-markdown.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/prefer-ast-path-each.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/no-node-comments.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/directly-loc-start-end.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/prefer-indent-if-break.js",
        "scripts/release/steps/publish-to-npm.js",
        "website/playground/markdown.js",
        "scripts/release/steps/post-publish-steps.js",
        "src/main/options.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/prefer-is-non-empty-array.js",
        "src/language-js/printer-estree.js",
        "src/language-js/embed/css.js",
        "src/common/resolve.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/better-parent-property-check-in-needs-parens.js",
        "src/cli/context.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/no-conflicting-comment-check-flags.js",
        "website/playground/util.js",
        "src/cli/constant.js",
        "src/config/find-project-root.js",
        "website/playground/PrettierFormat.js",
        "src/language-js/print/ternary.js",
        "scripts/release/steps/check-git-status.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/jsx-identifier-case.js",
        "src/cli/option.js",
        "src/language-css/printer-postcss.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/no-doc-builder-concat.js",
        "src/language-js/parse-postprocess.js",
        "scripts/tools/eslint-plugin-prettier-internal-rules/consistent-negative-index-access.js",
        "src/language-handlebars/printer-glimmer.js",
        "src/index.js",
        "src/language-css/options.js",
        "scripts/release/steps/update-changelog.js",
        "src/language-js/print/literal.js",
        "src/main/comments.js",
        "src/common/common-options.js",
        "src/language-js/print/typescript.js",
        "website/static/worker.js",
        "src/language-js/print/binaryish.js",
        "src/language-js/print/array.js",
        "src/language-yaml/printer-yaml.js",
        "src/main/multiparser.js",
        "scripts/release/steps/run-tests.js",
        "src/common/load-plugins.js",
        "src/cli/option-map.js",
        "scripts/generate-schema.js",
        "src/language-yaml/utils.js",
        "src/language-js/print/template-literal.js",
        "scripts/release/release.js",
        "scripts/release/utils.js",
        "src/language-js/embed/markdown.js",
        "src/language-html/print-preprocess.js",
        "src/language-js/printer-estree-json.js",
        "src/language-markdown/print-preprocess.js",
        "src/language-js/print/jsx.js",
        "src/language-js/print/module.js",
        "src/language-css/parser-postcss.js"
    ],
    "3_final_combined_files": [
        "src/cli/expand-patterns.js",
        "src/cli/index.js",
        "src/cli/core.js",
        "bin/prettier.js",
        "src/cli/prettier-internal.js",
        "src/cli/format.js"
    ],
    "4_related_elements": {
        "src/cli/expand-patterns.js": [
            "function: expandPatterns\nfunction: expandPatternsInternal\nfunction: escapePathForGlob\nfunction: fixWindowsSlashes\nfunction: containsIgnoredPathSegment\nfunction: sortPaths\nfunction: statSafe\nvariable: errorMessages\nfunction: getSupportedFilesGlob"
        ],
        "src/cli/index.js": [
            "function: main\nfunction: run"
        ],
        "src/cli/core.js": [
            "class: Context\nfunction: formatFiles\nfunction: parseArgvWithoutPlugins"
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "src/cli/expand-patterns.js": [
                    "function: expandPatternsInternal\nline: 81\nline: 82\nline: 83\nline: 84"
                ],
                "src/cli/index.js": [
                    ""
                ],
                "src/cli/core.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/cli/expand-patterns.js b/src/cli/expand-patterns.js\nindex 2556db9..a0a8b87 100644\n--- a/src/cli/expand-patterns.js\n+++ b/src/cli/expand-patterns.js\n@@ -1,3 +1,4 @@\n+\n \"use strict\";\n \n const path = require(\"path\");\n@@ -76,10 +77,15 @@ async function* expandPatternsInternal(context) {\n           input: pattern,\n         });\n       } else if (stat.isDirectory()) {\n+        const fixed = fixWindowsSlashes(pattern);\n+        // Normalize trailing slashes for directory patterns to avoid issues like \"dir//**/...\"\n+        // Preserve root paths like \"/\" or \"C:/\"\n+        const normalizedDir =\n+          fixed === \"/\" || /^[A-Za-z]:\\/$/.test(fixed) ? fixed : fixed.replace(/\\/+$/, \"\");\n         entries.push({\n           type: \"dir\",\n           glob:\n-            escapePathForGlob(fixWindowsSlashes(pattern)) +\n+            escapePathForGlob(normalizedDir) +\n             \"/\" +\n             getSupportedFilesGlob(),\n           input: pattern,\n@@ -214,4 +220,4 @@ function fixWindowsSlashes(pattern) {\n module.exports = {\n   expandPatterns,\n   fixWindowsSlashes,\n-};\n+};\n",
                "diff --git a/src/cli/expand-patterns.js b/src/cli/expand-patterns.js\nindex 2556db9..774ca2b 100644\n--- a/src/cli/expand-patterns.js\n+++ b/src/cli/expand-patterns.js\n@@ -1,3 +1,4 @@\n+\n \"use strict\";\n \n const path = require(\"path\");\n@@ -76,10 +77,11 @@ async function* expandPatternsInternal(context) {\n           input: pattern,\n         });\n       } else if (stat.isDirectory()) {\n+        const normalizedPattern = fixWindowsSlashes(pattern).replace(/\\/+$/, \"\");\n         entries.push({\n           type: \"dir\",\n           glob:\n-            escapePathForGlob(fixWindowsSlashes(pattern)) +\n+            escapePathForGlob(normalizedPattern) +\n             \"/\" +\n             getSupportedFilesGlob(),\n           input: pattern,\n@@ -214,4 +216,4 @@ function fixWindowsSlashes(pattern) {\n module.exports = {\n   expandPatterns,\n   fixWindowsSlashes,\n-};\n+};\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "src/cli/expand-patterns.js": [
                    "function: expandPatternsInternal\nline: 82\nline: 83\nline: 84\nline: 85"
                ],
                "src/cli/index.js": [
                    ""
                ],
                "src/cli/core.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/cli/expand-patterns.js b/src/cli/expand-patterns.js\nindex 2556db9..774ca2b 100644\n--- a/src/cli/expand-patterns.js\n+++ b/src/cli/expand-patterns.js\n@@ -1,3 +1,4 @@\n+\n \"use strict\";\n \n const path = require(\"path\");\n@@ -76,10 +77,11 @@ async function* expandPatternsInternal(context) {\n           input: pattern,\n         });\n       } else if (stat.isDirectory()) {\n+        const normalizedPattern = fixWindowsSlashes(pattern).replace(/\\/+$/, \"\");\n         entries.push({\n           type: \"dir\",\n           glob:\n-            escapePathForGlob(fixWindowsSlashes(pattern)) +\n+            escapePathForGlob(normalizedPattern) +\n             \"/\" +\n             getSupportedFilesGlob(),\n           input: pattern,\n@@ -214,4 +216,4 @@ function fixWindowsSlashes(pattern) {\n module.exports = {\n   expandPatterns,\n   fixWindowsSlashes,\n-};\n+};\n",
                "diff --git a/src/cli/expand-patterns.js b/src/cli/expand-patterns.js\nindex 2556db9..eccd82a 100644\n--- a/src/cli/expand-patterns.js\n+++ b/src/cli/expand-patterns.js\n@@ -1,3 +1,4 @@\n+\n \"use strict\";\n \n const path = require(\"path\");\n@@ -79,7 +80,7 @@ async function* expandPatternsInternal(context) {\n         entries.push({\n           type: \"dir\",\n           glob:\n-            escapePathForGlob(fixWindowsSlashes(pattern)) +\n+            escapePathForGlob(fixWindowsSlashes(pattern).replace(/\\/+$/, \"\")) +\n             \"/\" +\n             getSupportedFilesGlob(),\n           input: pattern,\n@@ -214,4 +215,4 @@ function fixWindowsSlashes(pattern) {\n module.exports = {\n   expandPatterns,\n   fixWindowsSlashes,\n-};\n+};\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/src/cli/expand-patterns.js b/src/cli/expand-patterns.js\nindex 2556db9..774ca2b 100644\n--- a/src/cli/expand-patterns.js\n+++ b/src/cli/expand-patterns.js\n@@ -1,3 +1,4 @@\n+\n \"use strict\";\n \n const path = require(\"path\");\n@@ -76,10 +77,11 @@ async function* expandPatternsInternal(context) {\n           input: pattern,\n         });\n       } else if (stat.isDirectory()) {\n+        const normalizedPattern = fixWindowsSlashes(pattern).replace(/\\/+$/, \"\");\n         entries.push({\n           type: \"dir\",\n           glob:\n-            escapePathForGlob(fixWindowsSlashes(pattern)) +\n+            escapePathForGlob(normalizedPattern) +\n             \"/\" +\n             getSupportedFilesGlob(),\n           input: pattern,\n@@ -214,4 +216,4 @@ function fixWindowsSlashes(pattern) {\n module.exports = {\n   expandPatterns,\n   fixWindowsSlashes,\n-};\n+};\n"
}