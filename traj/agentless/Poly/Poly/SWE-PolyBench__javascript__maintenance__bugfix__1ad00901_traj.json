{
    "instance_id": "SWE-PolyBench__javascript__maintenance__bugfix__1ad00901",
    "original_id": "sveltejs__svelte-510",
    "1_model_selected_files": [
        "src/generators/dom/visitors/EachBlock.js",
        "src/generators/dom/visitors/IfBlock.js"
    ],
    "2_embedding_selected_files": [
        "src/generators/dom/visitors/EachBlock.js",
        "src/generators/dom/visitors/IfBlock.js",
        "src/generators/dom/preprocess.js",
        "src/generators/server-side-rendering/visitors/EachBlock.js",
        "src/parse/state/mustache.js",
        "src/generators/dom/Block.js",
        "src/generators/dom/visitors/Component/Component.js",
        "src/generators/server-side-rendering/visitors/IfBlock.js",
        "src/generators/server-side-rendering/Block.js",
        "src/generators/Generator.js",
        "src/generators/dom/visitors/Element/Ref.js",
        "src/generators/dom/visitors/index.js",
        "src/generators/dom/visitors/Component/Ref.js",
        "src/generators/dom/visitors/Element/Binding.js",
        "src/generators/dom/visitors/Element/Element.js",
        "src/generators/dom/visitors/Component/Binding.js",
        "src/parse/index.js",
        "src/generators/dom/index.js",
        "src/generators/dom/visitors/Element/EventHandler.js",
        "src/generators/dom/visitors/Element/meta/Window.js",
        "src/generators/server-side-rendering/visitors/index.js",
        "src/generators/dom/visitors/Element/Attribute.js",
        "src/generators/server-side-rendering/visitors/Component.js",
        "src/validate/js/propValidators/ondestroy.js",
        "src/generators/dom/visitors/Component/EventHandler.js",
        "src/utils/removeNode.js",
        "src/generators/dom/visitors/MustacheTag.js",
        "src/utils/CodeBuilder.js",
        "src/generators/dom/visitors/YieldTag.js",
        "src/generators/server-side-rendering/visitors/Element.js",
        "src/generators/dom/visitors/RawMustacheTag.js",
        "src/utils/__test__.js",
        "src/generators/dom/visitors/Text.js",
        "src/generators/dom/visitors/Component/Attribute.js",
        "src/validate/js/propValidators/onteardown.js",
        "src/generators/dom/visitors/shared/binding/getSetter.js",
        "src/generators/server-side-rendering/visitors/MustacheTag.js",
        "src/utils/isReference.js",
        "src/generators/server-side-rendering/index.js",
        "src/generators/shared/processCss.js",
        "src/generators/server-side-rendering/visitors/Text.js",
        "src/utils/flattenReference.js",
        "src/parse/state/tag.js",
        "src/validate/html/validateElement.js",
        "src/shared/dom.js",
        "src/shared/index.js",
        "src/generators/server-side-rendering/visitors/RawMustacheTag.js",
        "src/index.js",
        "src/parse/state/text.js",
        "src/parse/state/fragment.js",
        "src/generators/dom/visit.js",
        "src/validate/js/propValidators/onrender.js",
        "src/validate/js/index.js",
        "src/generators/dom/visitors/Element/getStaticAttributeValue.js",
        "src/validate/js/utils/usesThisOrArguments.js",
        "src/validate/js/propValidators/helpers.js",
        "src/parse/utils/html.js",
        "src/validate/html/index.js",
        "rollup/rollup.config.main.js",
        "src/validate/js/propValidators/components.js",
        "rollup/rollup.config.ssr.js",
        "src/utils/annotateWithScopes.js",
        "src/generators/server-side-rendering/visit.js",
        "src/generators/server-side-rendering/visitors/Comment.js",
        "src/utils/reservedNames.js",
        "src/utils/deindent.js",
        "src/validate/js/propValidators/oncreate.js",
        "src/generators/server-side-rendering/visitors/YieldTag.js",
        "src/generators/server-side-rendering/visitors/meta/Window.js",
        "src/parse/read/script.js",
        "src/generators/shared/utils/getIntro.js",
        "src/validate/js/propValidators/methods.js",
        "src/generators/shared/utils/walkHtml.js",
        "src/utils/getCodeFrame.js",
        "src/utils/isVoidElementName.js",
        "src/generators/dom/visitors/Element/lookup.js",
        "src/validate/index.js"
    ],
    "3_final_combined_files": [
        "src/generators/dom/visitors/EachBlock.js",
        "src/generators/dom/visitors/IfBlock.js",
        "src/generators/dom/preprocess.js"
    ],
    "4_related_elements": {
        "src/generators/dom/visitors/EachBlock.js": [
            "function: visitEachBlock"
        ],
        "src/generators/dom/visitors/IfBlock.js": [
            "function: visitIfBlock\nfunction: simple\nfunction: compound"
        ],
        "src/generators/dom/preprocess.js": [
            "function: preprocessors.EachBlock\nfunction: preprocessors.IfBlock"
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "src/generators/dom/visitors/EachBlock.js": [
                    "line: 68\nline: 74"
                ],
                "src/generators/dom/visitors/IfBlock.js": [
                    ""
                ],
                "src/generators/dom/preprocess.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/generators/dom/visitors/EachBlock.js b/src/generators/dom/visitors/EachBlock.js\nindex dbb1d2c..5a1a71d 100644\n--- a/src/generators/dom/visitors/EachBlock.js\n+++ b/src/generators/dom/visitors/EachBlock.js\n@@ -66,12 +66,16 @@ export default function visitEachBlock ( generator, block, state, node ) {\n \t\t\t\t\t${each_block_else}.mount( ${anchor}.parentNode, ${anchor} );\n \t\t\t\t} else if ( ${each_block_else} ) {\n \t\t\t\t\t${each_block_else}.destroy( true );\n+\t\t\t\t\t${each_block_else} = null;\n \t\t\t\t}\n \t\t\t` );\n \t\t} else {\n \t\t\tblock.builders.update.addBlock( deindent`\n \t\t\t\tif ( ${each_block_value}.length ) {\n-\t\t\t\t\tif ( ${each_block_else} ) ${each_block_else}.destroy( true );\n+\t\t\t\t\tif ( ${each_block_else} ) {\n+\t\t\t\t\t\t${each_block_else}.destroy( true );\n+\t\t\t\t\t\t${each_block_else} = null;\n+\t\t\t\t\t}\n \t\t\t\t} else if ( !${each_block_else} ) {\n \t\t\t\t\t${each_block_else} = ${node.else._block.name}( ${params}, ${block.component} );\n \t\t\t\t\t${each_block_else}.mount( ${anchor}.parentNode, ${anchor} );\n",
                "diff --git a/src/generators/dom/visitors/EachBlock.js b/src/generators/dom/visitors/EachBlock.js\nindex dbb1d2c..d13d2c7 100644\n--- a/src/generators/dom/visitors/EachBlock.js\n+++ b/src/generators/dom/visitors/EachBlock.js\n@@ -1,3 +1,4 @@\n+\n import CodeBuilder from '../../../utils/CodeBuilder.js';\n import deindent from '../../../utils/deindent.js';\n import visit from '../visit.js';\n@@ -66,12 +67,16 @@ export default function visitEachBlock ( generator, block, state, node ) {\n \t\t\t\t\t${each_block_else}.mount( ${anchor}.parentNode, ${anchor} );\n \t\t\t\t} else if ( ${each_block_else} ) {\n \t\t\t\t\t${each_block_else}.destroy( true );\n+\t\t\t\t\t${each_block_else} = null;\n \t\t\t\t}\n \t\t\t` );\n \t\t} else {\n \t\t\tblock.builders.update.addBlock( deindent`\n \t\t\t\tif ( ${each_block_value}.length ) {\n-\t\t\t\t\tif ( ${each_block_else} ) ${each_block_else}.destroy( true );\n+\t\t\t\t\tif ( ${each_block_else} ) {\n+\t\t\t\t\t\t${each_block_else}.destroy( true );\n+\t\t\t\t\t\t${each_block_else} = null;\n+\t\t\t\t\t}\n \t\t\t\t} else if ( !${each_block_else} ) {\n \t\t\t\t\t${each_block_else} = ${node.else._block.name}( ${params}, ${block.component} );\n \t\t\t\t\t${each_block_else}.mount( ${anchor}.parentNode, ${anchor} );\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "src/generators/dom/visitors/EachBlock.js": [
                    "function: visitEachBlock\nline: 68\nline: 74"
                ],
                "src/generators/dom/visitors/IfBlock.js": [
                    ""
                ],
                "src/generators/dom/preprocess.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/generators/dom/visitors/EachBlock.js b/src/generators/dom/visitors/EachBlock.js\nindex dbb1d2c..5a1a71d 100644\n--- a/src/generators/dom/visitors/EachBlock.js\n+++ b/src/generators/dom/visitors/EachBlock.js\n@@ -66,12 +66,16 @@ export default function visitEachBlock ( generator, block, state, node ) {\n \t\t\t\t\t${each_block_else}.mount( ${anchor}.parentNode, ${anchor} );\n \t\t\t\t} else if ( ${each_block_else} ) {\n \t\t\t\t\t${each_block_else}.destroy( true );\n+\t\t\t\t\t${each_block_else} = null;\n \t\t\t\t}\n \t\t\t` );\n \t\t} else {\n \t\t\tblock.builders.update.addBlock( deindent`\n \t\t\t\tif ( ${each_block_value}.length ) {\n-\t\t\t\t\tif ( ${each_block_else} ) ${each_block_else}.destroy( true );\n+\t\t\t\t\tif ( ${each_block_else} ) {\n+\t\t\t\t\t\t${each_block_else}.destroy( true );\n+\t\t\t\t\t\t${each_block_else} = null;\n+\t\t\t\t\t}\n \t\t\t\t} else if ( !${each_block_else} ) {\n \t\t\t\t\t${each_block_else} = ${node.else._block.name}( ${params}, ${block.component} );\n \t\t\t\t\t${each_block_else}.mount( ${anchor}.parentNode, ${anchor} );\n",
                "diff --git a/src/generators/dom/visitors/EachBlock.js b/src/generators/dom/visitors/EachBlock.js\nindex dbb1d2c..d13d2c7 100644\n--- a/src/generators/dom/visitors/EachBlock.js\n+++ b/src/generators/dom/visitors/EachBlock.js\n@@ -1,3 +1,4 @@\n+\n import CodeBuilder from '../../../utils/CodeBuilder.js';\n import deindent from '../../../utils/deindent.js';\n import visit from '../visit.js';\n@@ -66,12 +67,16 @@ export default function visitEachBlock ( generator, block, state, node ) {\n \t\t\t\t\t${each_block_else}.mount( ${anchor}.parentNode, ${anchor} );\n \t\t\t\t} else if ( ${each_block_else} ) {\n \t\t\t\t\t${each_block_else}.destroy( true );\n+\t\t\t\t\t${each_block_else} = null;\n \t\t\t\t}\n \t\t\t` );\n \t\t} else {\n \t\t\tblock.builders.update.addBlock( deindent`\n \t\t\t\tif ( ${each_block_value}.length ) {\n-\t\t\t\t\tif ( ${each_block_else} ) ${each_block_else}.destroy( true );\n+\t\t\t\t\tif ( ${each_block_else} ) {\n+\t\t\t\t\t\t${each_block_else}.destroy( true );\n+\t\t\t\t\t\t${each_block_else} = null;\n+\t\t\t\t\t}\n \t\t\t\t} else if ( !${each_block_else} ) {\n \t\t\t\t\t${each_block_else} = ${node.else._block.name}( ${params}, ${block.component} );\n \t\t\t\t\t${each_block_else}.mount( ${anchor}.parentNode, ${anchor} );\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/src/generators/dom/visitors/EachBlock.js b/src/generators/dom/visitors/EachBlock.js\nindex dbb1d2c..5a1a71d 100644\n--- a/src/generators/dom/visitors/EachBlock.js\n+++ b/src/generators/dom/visitors/EachBlock.js\n@@ -66,12 +66,16 @@ export default function visitEachBlock ( generator, block, state, node ) {\n \t\t\t\t\t${each_block_else}.mount( ${anchor}.parentNode, ${anchor} );\n \t\t\t\t} else if ( ${each_block_else} ) {\n \t\t\t\t\t${each_block_else}.destroy( true );\n+\t\t\t\t\t${each_block_else} = null;\n \t\t\t\t}\n \t\t\t` );\n \t\t} else {\n \t\t\tblock.builders.update.addBlock( deindent`\n \t\t\t\tif ( ${each_block_value}.length ) {\n-\t\t\t\t\tif ( ${each_block_else} ) ${each_block_else}.destroy( true );\n+\t\t\t\t\tif ( ${each_block_else} ) {\n+\t\t\t\t\t\t${each_block_else}.destroy( true );\n+\t\t\t\t\t\t${each_block_else} = null;\n+\t\t\t\t\t}\n \t\t\t\t} else if ( !${each_block_else} ) {\n \t\t\t\t\t${each_block_else} = ${node.else._block.name}( ${params}, ${block.component} );\n \t\t\t\t\t${each_block_else}.mount( ${anchor}.parentNode, ${anchor} );\n"
}