{
    "instance_id": "SWE-PolyBench__typescript__maintenance__bugfix__0307e40c",
    "original_id": "mui__material-ui-15526",
    "1_model_selected_files": [
        "packages/material-ui/src/Zoom/Zoom.js",
        "packages/material-ui/src/transitions/utils.js",
        "packages/material-ui-utils/src/elementTypeAcceptingRef.js",
        "packages/material-ui/src/Grow/Grow.js",
        "packages/material-ui/src/Fade/Fade.js"
    ],
    "2_embedding_selected_files": [
        "packages/material-ui/src/Zoom/Zoom.js",
        "packages/material-ui/src/TextField/TextField.js",
        "packages/material-ui/src/Zoom/Zoom.test.js",
        "packages/material-ui/src/Zoom/Zoom.d.ts",
        "docs/src/pages/utils/transitions/SimpleZoom.js",
        "packages/material-ui/src/Grow/Grow.js",
        "docs/src/pages/demos/buttons/FloatingActionButtonZoom.js",
        "docs/src/pages/demos/text-fields/ComposedTextField.js",
        "packages/material-ui/src/FormHelperText/FormHelperText.js",
        "packages/material-ui/src/FormControl/FormControl.js",
        "packages/material-ui/src/Input/Input.js",
        "packages/material-ui/src/FilledInput/FilledInput.js",
        "packages/material-ui/src/FormLabel/FormLabel.js",
        "packages/material-ui/src/InputLabel/InputLabel.js",
        "packages/material-ui/src/OutlinedInput/OutlinedInput.js",
        "packages/material-ui/src/InputAdornment/InputAdornment.js",
        "packages/material-ui/src/Fade/Fade.js",
        "packages/material-ui/src/Select/SelectInput.js",
        "packages/material-ui/src/InputBase/InputBase.js",
        "docs/src/pages/demos/text-fields/FormattedInputs.js",
        "packages/material-ui/src/Slide/Slide.js",
        "packages/material-ui/src/InputBase/Textarea.js",
        "packages/material-ui/src/utils/withForwardedRef.js",
        "packages/material-ui/src/Collapse/Collapse.js",
        "packages/material-ui/src/Modal/TrapFocus.js",
        "docs/src/pages/demos/dialogs/FormDialog.js",
        "packages/material-ui/src/OutlinedInput/NotchedOutline.js",
        "packages/material-ui/src/TextField/TextField.test.js",
        "docs/src/pages/demos/tooltips/TransitionsTooltips.js",
        "packages/material-ui/src/NativeSelect/NativeSelectInput.js",
        "docs/src/pages/demos/text-fields/CustomizedInputs.js",
        "docs/src/pages/utils/popper/ScrollPlayground.js",
        "packages/material-ui/src/FormControl/withFormControlContext.js",
        "packages/material-ui/src/NativeSelect/NativeSelect.js",
        "docs/src/pages/premium-themes/onepirate/modules/form/FormFeedback.js",
        "packages/material-ui-utils/src/elementTypeAcceptingRef.test.js",
        "packages/material-ui/src/FormHelperText/FormHelperText.test.js",
        "packages/material-ui/src/Select/Select.js",
        "packages/material-ui/src/RadioGroup/RadioGroup.js",
        "docs/src/pages/demos/text-fields/FilledInputAdornments.js",
        "packages/material-ui/src/InputAdornment/InputAdornment.test.js",
        "packages/material-ui/src/InputLabel/InputLabel.test.js",
        "docs/src/pages/demos/text-fields/InputAdornments.js",
        "packages/material-ui/src/FormLabel/FormLabel.test.js",
        "packages/material-ui/src/FilledInput/FilledInput.test.js",
        "packages/material-ui/src/FormGroup/FormGroup.js",
        "packages/material-ui-lab/src/SpeedDial/SpeedDial.js",
        "docs/src/pages/demos/text-fields/InputWithIcon.js",
        "packages/material-ui/src/StepContent/StepContent.js",
        "packages/material-ui/src/FormControl/FormControl.test.js",
        "packages/material-ui/src/RootRef/RootRef.js",
        "packages/material-ui/src/Checkbox/Checkbox.js",
        "packages/material-ui/src/internal/SwitchBase.js",
        "docs/src/pages/premium-themes/onepirate/modules/components/TextField.js",
        "packages/material-ui/src/InputBase/InputBase.test.js",
        "docs/src/pages/utils/popover/AnchorPlayground.js",
        "docs/src/pages/demos/text-fields/OutlinedInputAdornments.js",
        "packages/material-ui/src/FormControlLabel/FormControlLabel.js",
        "docs/src/pages/demos/text-fields/Inputs.js",
        "packages/material-ui-icons/src/ZoomInOutlined.js",
        "docs/src/pages/demos/text-fields/FilledTextFields.js",
        "docs/src/pages/getting-started/page-layout-examples/checkout/AddressForm.js",
        "packages/material-ui/src/Grow/Grow.test.js",
        "packages/material-ui/src/Modal/Modal.test.js",
        "packages/material-ui/src/Dialog/Dialog.js",
        "packages/material-ui/src/Tooltip/Tooltip.js",
        "docs/src/pages/premium-themes/onepirate/modules/views/AppForm.js",
        "packages/material-ui/src/Step/Step.js",
        "packages/material-ui/src/FormHelperText/FormHelperText.d.ts",
        "packages/material-ui-icons/src/ZoomIn.js",
        "docs/src/pages/demos/text-fields/CustomizedInputBase.js",
        "packages/material-ui/src/Modal/Modal.js",
        "packages/material-ui/src/Input/Input.test.js",
        "packages/material-ui/src/OutlinedInput/NotchedOutline.d.ts",
        "packages/material-ui/src/Switch/Switch.js",
        "packages/material-ui/src/FilledInput/FilledInput.d.ts",
        "packages/material-ui/src/Zoom/index.js",
        "docs/src/pages/premium-themes/onepirate/modules/form/RFTextField.js",
        "packages/material-ui/src/InputLabel/InputLabel.d.ts",
        "packages/material-ui/src/StepLabel/StepLabel.js",
        "pages/demos/text-fields.js",
        "docs/src/pages/demos/text-fields/OutlinedTextFields.js",
        "packages/material-ui/src/Grow/Grow.d.ts",
        "packages/material-ui/src/TextField/TextField.d.ts",
        "packages/material-ui-utils/src/elementTypeAcceptingRef.js",
        "docs/src/pages/getting-started/page-layout-examples/checkout/PaymentForm.js"
    ],
    "3_final_combined_files": [
        "packages/material-ui/src/Zoom/Zoom.js",
        "packages/material-ui/src/transitions/utils.js",
        "packages/material-ui-utils/src/elementTypeAcceptingRef.js",
        "packages/material-ui/src/TextField/TextField.js",
        "packages/material-ui/src/Zoom/Zoom.test.js"
    ],
    "4_related_elements": {
        "packages/material-ui/src/Zoom/Zoom.js": [
            "function: Zoom\nvariable: Zoom.propTypes.children"
        ],
        "packages/material-ui-utils/src/elementTypeAcceptingRef.js": [
            "function: elementTypeAcceptingRef\nfunction: isClassComponent"
        ],
        "packages/material-ui/src/transitions/utils.js": [
            ""
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "packages/material-ui/src/Zoom/Zoom.js": [
                    "function: Zoom"
                ],
                "packages/material-ui-utils/src/elementTypeAcceptingRef.js": [
                    "function: elementTypeAcceptingRef"
                ],
                "packages/material-ui/src/transitions/utils.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/material-ui-utils/src/elementTypeAcceptingRef.js b/packages/material-ui-utils/src/elementTypeAcceptingRef.js\nindex c107283..d3c705e 100644\n--- a/packages/material-ui-utils/src/elementTypeAcceptingRef.js\n+++ b/packages/material-ui-utils/src/elementTypeAcceptingRef.js\n@@ -1,3 +1,4 @@\n+\n import * as PropTypes from 'prop-types';\n import chainPropTypes from './chainPropTypes';\n \n@@ -35,11 +36,11 @@ function elementTypeAcceptingRef(props, propName, componentName, location, propF\n     return new Error(\n       `Invalid ${location} \\`${safePropName}\\` supplied to \\`${componentName}\\`. ` +\n         `Expected an element type that can hold a ref. ${warningHint} ` +\n-        'For more information see https://next.material-ui.com/guides/composition/#caveat-with-refs',\n+        'For more information see https://material-ui.com/guides/composition/#caveat-with-refs',\n     );\n   }\n \n   return null;\n }\n \n-export default chainPropTypes(PropTypes.elementType, elementTypeAcceptingRef);\n+export default chainPropTypes(PropTypes.elementType, elementTypeAcceptingRef);\n",
                "diff --git a/packages/material-ui/src/Zoom/Zoom.js b/packages/material-ui/src/Zoom/Zoom.js\nindex 067df6c..dcab2b9 100644\n--- a/packages/material-ui/src/Zoom/Zoom.js\n+++ b/packages/material-ui/src/Zoom/Zoom.js\n@@ -23,7 +23,30 @@ const styles = {\n  * It uses [react-transition-group](https://github.com/reactjs/react-transition-group) internally.\n  */\n const Zoom = React.forwardRef(function Zoom(props, ref) {\n-  const { children, in: inProp, onEnter, onExit, style, theme, ...other } = props;\n+  const { children: childrenProp, in: inProp, onEnter, onExit, style, theme, ...other } = props;\n+\n+  // Ensure Transition can attach a ref. If the child is a plain function component (no forwardRef),\n+  // wrap it in a div so that the ref can be attached to a DOM node.\n+  let children = React.Children.only(childrenProp);\n+\n+  const isClassComponent =\n+    typeof children.type === 'function' &&\n+    children.type.prototype &&\n+    children.type.prototype.isReactComponent;\n+\n+  const isForwardRefType =\n+    typeof children.type === 'object' &&\n+    children.type !== null &&\n+    children.type.$$typeof &&\n+    children.type.$$typeof.toString() === 'Symbol(react.forward_ref)';\n+\n+  const needsWrapper =\n+    typeof children.type === 'function' && !isClassComponent && !isForwardRefType;\n+\n+  if (needsWrapper) {\n+    children = <div>{children}</div>;\n+  }\n+\n   const handleRef = useForkRef(children.ref, ref);\n \n   const handleEnter = node => {\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "packages/material-ui/src/Zoom/Zoom.js": [
                    "function: Zoom\nline: 27"
                ],
                "packages/material-ui-utils/src/elementTypeAcceptingRef.js": [
                    "function: elementTypeAcceptingRef"
                ],
                "packages/material-ui/src/transitions/utils.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/material-ui-utils/src/elementTypeAcceptingRef.js b/packages/material-ui-utils/src/elementTypeAcceptingRef.js\nindex c107283..072b3a2 100644\n--- a/packages/material-ui-utils/src/elementTypeAcceptingRef.js\n+++ b/packages/material-ui-utils/src/elementTypeAcceptingRef.js\n@@ -1,4 +1,6 @@\n+\n import * as PropTypes from 'prop-types';\n+import { isForwardRef } from 'react-is';\n import chainPropTypes from './chainPropTypes';\n \n function isClassComponent(elementType) {\n@@ -19,27 +21,31 @@ function elementTypeAcceptingRef(props, propName, componentName, location, propF\n   let warningHint;\n \n   /**\n-   * Blacklisting instead of whitelisting\n-   *\n-   * Blacklisting will miss some components, such as React.Fragment. Those will at least\n-   * trigger a warning in React.\n-   * We can't whitelist because there is no safe way to detect React.forwardRef\n-   * or class components. \"Safe\" means there's no public API.\n+   * Prefer whitelisting known ref-capable element types.\n    *\n+   * We can detect class components and React.forwardRef via react-is.\n+   * Function components without forwardRef cannot hold refs.\n+   * Some types like React.Fragment will still trigger a React warning if used incorrectly.\n    */\n   if (typeof propValue === 'function' && !isClassComponent(propValue)) {\n+    // Plain function component: warn unless it's wrapped with React.forwardRef\n     warningHint = 'Did you accidentally provide a plain function component instead?';\n   }\n \n+  // Allow React.forwardRef wrapped components\n+  if (warningHint !== undefined && isForwardRef(propValue)) {\n+    warningHint = undefined;\n+  }\n+\n   if (warningHint !== undefined) {\n     return new Error(\n       `Invalid ${location} \\`${safePropName}\\` supplied to \\`${componentName}\\`. ` +\n         `Expected an element type that can hold a ref. ${warningHint} ` +\n-        'For more information see https://next.material-ui.com/guides/composition/#caveat-with-refs',\n+        'For more information see https://material-ui.com/guides/composition/#caveat-with-refs',\n     );\n   }\n \n   return null;\n }\n \n-export default chainPropTypes(PropTypes.elementType, elementTypeAcceptingRef);\n+export default chainPropTypes(PropTypes.elementType, elementTypeAcceptingRef);\n",
                "diff --git a/packages/material-ui/src/Zoom/Zoom.js b/packages/material-ui/src/Zoom/Zoom.js\nindex 067df6c..790a0e7 100644\n--- a/packages/material-ui/src/Zoom/Zoom.js\n+++ b/packages/material-ui/src/Zoom/Zoom.js\n@@ -24,7 +24,9 @@ const styles = {\n  */\n const Zoom = React.forwardRef(function Zoom(props, ref) {\n   const { children, in: inProp, onEnter, onExit, style, theme, ...other } = props;\n-  const handleRef = useForkRef(children.ref, ref);\n+  // Use an internal wrapper node so that children don't need to accept refs.\n+  const nodeRef = React.useRef(null);\n+  const handleRef = useForkRef(ref, nodeRef);\n \n   const handleEnter = node => {\n     reflow(node); // So the animation always start from the start.\n@@ -53,6 +55,28 @@ const Zoom = React.forwardRef(function Zoom(props, ref) {\n   };\n \n   return (\n+    <Transition\n+      in={inProp}\n+      onEnter={handleEnter}\n+      onExit={handleExit}\n+      nodeRef={nodeRef}\n+      {...other}\n+    >\n+      {(state, childProps) => {\n+        return (\n+          <div\n+            ref={handleRef}\n+            style={{\n+              ...(state === 'entered' ? styles.entered : styles.entering),\n+              ...style,\n+            }}\n+            {...childProps}\n+          >\n+            {children}\n+          </div>\n+        );\n+      }}\n+    </Transition>\n     <Transition appear in={inProp} onEnter={handleEnter} onExit={handleExit} {...other}>\n       {(state, childProps) => {\n         return React.cloneElement(children, {\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/packages/material-ui-utils/src/elementTypeAcceptingRef.js b/packages/material-ui-utils/src/elementTypeAcceptingRef.js\nindex c107283..d3c705e 100644\n--- a/packages/material-ui-utils/src/elementTypeAcceptingRef.js\n+++ b/packages/material-ui-utils/src/elementTypeAcceptingRef.js\n@@ -1,3 +1,4 @@\n+\n import * as PropTypes from 'prop-types';\n import chainPropTypes from './chainPropTypes';\n \n@@ -35,11 +36,11 @@ function elementTypeAcceptingRef(props, propName, componentName, location, propF\n     return new Error(\n       `Invalid ${location} \\`${safePropName}\\` supplied to \\`${componentName}\\`. ` +\n         `Expected an element type that can hold a ref. ${warningHint} ` +\n-        'For more information see https://next.material-ui.com/guides/composition/#caveat-with-refs',\n+        'For more information see https://material-ui.com/guides/composition/#caveat-with-refs',\n     );\n   }\n \n   return null;\n }\n \n-export default chainPropTypes(PropTypes.elementType, elementTypeAcceptingRef);\n+export default chainPropTypes(PropTypes.elementType, elementTypeAcceptingRef);\n"
}