{
    "instance_id": "SWE-PolyBench__typescript__maintenance__bugfix__678fa217",
    "original_id": "mui__material-ui-28186",
    "1_model_selected_files": [
        "packages/mui-material/src/ButtonBase/ButtonBase.js",
        "packages/mui-material/src/ButtonBase/TouchRipple.js",
        "packages/mui-material/src/ButtonBase/Ripple.js",
        "packages/mui-material/src/ButtonBase/ButtonBase.test.js",
        "packages/mui-material/src/ButtonBase/TouchRipple.test.js"
    ],
    "2_embedding_selected_files": [],
    "3_final_combined_files": [
        "packages/mui-material/src/ButtonBase/ButtonBase.js",
        "packages/mui-material/src/ButtonBase/TouchRipple.js",
        "packages/mui-material/src/ButtonBase/Ripple.js"
    ],
    "4_related_elements": {
        "packages/mui-material/src/ButtonBase/ButtonBase.js": [
            "function: ButtonBase\nfunction: useButton\nfunction: getRootProps\nfunction: useTouchRipple\nfunction: getRippleHandlers\nvariable: rippleRef\nvariable: focusVisible\nvariable: setFocusVisible\nvariable: onBlur\nvariable: onFocusVisible"
        ],
        "packages/mui-material/src/ButtonBase/TouchRipple.js": [
            "function: TouchRipple\nfunction: start\nfunction: stop\nfunction: pulsate"
        ],
        "packages/mui-material/src/ButtonBase/Ripple.js": [
            "function: Ripple"
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "packages/mui-material/src/ButtonBase/ButtonBase.js": [
                    "function: ButtonBase\nline: 176\nline: 177"
                ],
                "packages/mui-material/src/ButtonBase/TouchRipple.js": [
                    ""
                ],
                "packages/mui-material/src/ButtonBase/Ripple.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/mui-material/src/ButtonBase/ButtonBase.js b/packages/mui-material/src/ButtonBase/ButtonBase.js\nindex a332af7..e2514d6 100644\n--- a/packages/mui-material/src/ButtonBase/ButtonBase.js\n+++ b/packages/mui-material/src/ButtonBase/ButtonBase.js\n@@ -168,6 +168,13 @@ const ButtonBase = React.forwardRef(function ButtonBase(inProps, ref) {\n \n   const classes = useUtilityClasses(ownerState);\n \n+  React.useEffect(() => {\n+    if (!focusVisible) {\n+      // Ensure any focus ripple is cleared when focus is lost (e.g., keyboard navigation)\n+      rippleRef.current && rippleRef.current.stop();\n+    }\n+  }, [focusVisible]);\n+\n   return (\n     <ButtonBaseRoot\n       as={ComponentProp}\n",
                "diff --git a/packages/mui-material/src/ButtonBase/ButtonBase.js b/packages/mui-material/src/ButtonBase/ButtonBase.js\nindex a332af7..abe946a 100644\n--- a/packages/mui-material/src/ButtonBase/ButtonBase.js\n+++ b/packages/mui-material/src/ButtonBase/ButtonBase.js\n@@ -173,8 +173,8 @@ const ButtonBase = React.forwardRef(function ButtonBase(inProps, ref) {\n       as={ComponentProp}\n       className={clsx(classes.root, className)}\n       ownerState={ownerState}\n-      {...getRootProps(getRippleHandlers(props))}\n       {...other}\n+      {...getRootProps(getRippleHandlers(props))}\n     >\n       {children}\n       {enableTouchRipple ? (\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "packages/mui-material/src/ButtonBase/ButtonBase.js": [
                    "line: 176"
                ],
                "packages/mui-material/src/ButtonBase/TouchRipple.js": [
                    ""
                ],
                "packages/mui-material/src/ButtonBase/Ripple.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/mui-material/src/ButtonBase/ButtonBase.js b/packages/mui-material/src/ButtonBase/ButtonBase.js\nindex a332af7..abe946a 100644\n--- a/packages/mui-material/src/ButtonBase/ButtonBase.js\n+++ b/packages/mui-material/src/ButtonBase/ButtonBase.js\n@@ -173,8 +173,8 @@ const ButtonBase = React.forwardRef(function ButtonBase(inProps, ref) {\n       as={ComponentProp}\n       className={clsx(classes.root, className)}\n       ownerState={ownerState}\n-      {...getRootProps(getRippleHandlers(props))}\n       {...other}\n+      {...getRootProps(getRippleHandlers(props))}\n     >\n       {children}\n       {enableTouchRipple ? (\n",
                "diff --git a/packages/mui-material/src/ButtonBase/ButtonBase.js b/packages/mui-material/src/ButtonBase/ButtonBase.js\nindex a332af7..6b127cb 100644\n--- a/packages/mui-material/src/ButtonBase/ButtonBase.js\n+++ b/packages/mui-material/src/ButtonBase/ButtonBase.js\n@@ -173,8 +173,7 @@ const ButtonBase = React.forwardRef(function ButtonBase(inProps, ref) {\n       as={ComponentProp}\n       className={clsx(classes.root, className)}\n       ownerState={ownerState}\n-      {...getRootProps(getRippleHandlers(props))}\n-      {...other}\n+      {...getRootProps(getRippleHandlers(other))}\n     >\n       {children}\n       {enableTouchRipple ? (\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/packages/mui-material/src/ButtonBase/ButtonBase.js b/packages/mui-material/src/ButtonBase/ButtonBase.js\nindex a332af7..abe946a 100644\n--- a/packages/mui-material/src/ButtonBase/ButtonBase.js\n+++ b/packages/mui-material/src/ButtonBase/ButtonBase.js\n@@ -173,8 +173,8 @@ const ButtonBase = React.forwardRef(function ButtonBase(inProps, ref) {\n       as={ComponentProp}\n       className={clsx(classes.root, className)}\n       ownerState={ownerState}\n-      {...getRootProps(getRippleHandlers(props))}\n       {...other}\n+      {...getRootProps(getRippleHandlers(props))}\n     >\n       {children}\n       {enableTouchRipple ? (\n"
}