{
    "instance_id": "SWE-PolyBench__typescript__maintenance__bugfix__18d389e5",
    "original_id": "mui__material-ui-15359",
    "1_model_selected_files": [
        "packages/material-ui/src/Popper/Popper.js",
        "packages/material-ui/src/Popper/Popper.test.js",
        "packages/material-ui/src/Popper/Popper.d.ts",
        "pages/api/popper.js"
    ],
    "2_embedding_selected_files": [
        "packages/material-ui/src/Popper/Popper.test.js",
        "packages/material-ui/src/Popper/Popper.js",
        "packages/material-ui/src/Popover/Popover.js",
        "docs/src/pages/utils/popper/PopperPopupState.js",
        "docs/src/pages/utils/popper/PositionedPopper.js",
        "docs/src/pages/utils/popper/FakedReferencePopper.js",
        "packages/material-ui/src/Popover/Popover.test.js",
        "docs/src/pages/utils/popover/PopoverPopupState.js",
        "docs/src/pages/utils/popper/NoTransitionPopper.js",
        "docs/src/pages/utils/popper/SimplePopper.js",
        "docs/src/pages/utils/popper/MinimalPopper.js",
        "docs/src/pages/utils/popper/ScrollPlayground.js",
        "packages/material-ui/src/Menu/Menu.test.js",
        "packages/material-ui/src/Popper/Popper.d.ts",
        "docs/src/pages/utils/popover/MouseOverPopover.js",
        "packages/material-ui/src/Tooltip/Tooltip.js",
        "docs/src/pages/utils/popover/AnchorPlayground.js",
        "packages/material-ui/src/Menu/Menu.js",
        "docs/src/pages/utils/popover/SimplePopover.js",
        "packages/material-ui/src/Tooltip/Tooltip.test.js",
        "docs/src/pages/demos/menus/MenuPopupState.js",
        "packages/material-ui/src/Popover/Popover.d.ts",
        "packages/material-ui/src/withWidth/withWidth.js",
        "packages/material-ui/src/Select/Select.js",
        "packages/material-ui/src/Dialog/Dialog.js",
        "packages/material-ui/src/Tabs/ScrollbarSize.test.js",
        "packages/material-ui/src/Dialog/Dialog.test.js",
        "pages/utils/popper.js",
        "packages/material-ui/src/Snackbar/Snackbar.js",
        "packages/material-ui/src/Snackbar/Snackbar.test.js",
        "packages/material-ui/src/Modal/Modal.test.js",
        "pages/api/popper.js",
        "packages/material-ui/src/Grow/Grow.test.js",
        "packages/material-ui/src/Grow/Grow.js",
        "packages/material-ui/src/withWidth/withWidth.test.js",
        "docs/src/pages/demos/dialogs/MaxWidthDialog.js",
        "packages/material-ui/src/SwipeableDrawer/SwipeableDrawer.test.js",
        "packages/material-ui/src/ButtonBase/focusVisible.js",
        "packages/material-ui/src/Portal/Portal.test.js",
        "pages/utils/popover.js",
        "packages/material-ui/src/Tabs/Tabs.test.js",
        "packages/material-ui/src/Zoom/Zoom.test.js",
        "packages/material-ui/src/Modal/ModalManager.js",
        "packages/material-ui/src/Tabs/ScrollbarSize.js",
        "packages/material-ui/src/Popper/index.js",
        "packages/material-ui/src/ButtonBase/createRippleHandler.js",
        "packages/material-ui-icons/src/UpdateOutlined.js",
        "packages/material-ui/src/Backdrop/Backdrop.js",
        "packages/material-ui-icons/src/Update.js",
        "docs/src/pages/demos/tooltips/CustomizedTooltips.js",
        "packages/material-ui/src/ButtonBase/TouchRipple.js",
        "packages/material-ui/src/SwipeableDrawer/SwipeableDrawer.js",
        "packages/material-ui/src/ButtonBase/TouchRipple.test.js",
        "packages/material-ui/src/Select/SelectInput.test.js",
        "packages/material-ui/src/Modal/Modal.js",
        "packages/material-ui/src/ButtonBase/ButtonBase.js",
        "packages/material-ui/src/ClickAwayListener/ClickAwayListener.js",
        "packages/material-ui/src/Popper/index.d.ts",
        "packages/material-ui/src/OutlinedInput/NotchedOutline.js",
        "packages/material-ui/src/ButtonBase/ButtonBase.test.js",
        "packages/material-ui/src/NativeSelect/NativeSelect.js",
        "packages/material-ui/src/Modal/TrapFocus.js"
    ],
    "3_final_combined_files": [
        "packages/material-ui/src/Popper/Popper.js",
        "packages/material-ui/src/Popper/Popper.test.js",
        "packages/material-ui/src/Popper/Popper.d.ts",
        "packages/material-ui/src/Popover/Popover.js"
    ],
    "4_related_elements": {
        "packages/material-ui/src/Popper/Popper.js": [
            "function: Popper.handleOpen\nfunction: Popper.handlePopperUpdate\nfunction: Popper.componentDidUpdate\nfunction: Popper.render"
        ],
        "packages/material-ui/src/Popper/Popper.test.js": [
            ""
        ],
        "packages/material-ui/src/Popper/Popper.d.ts": [
            ""
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "packages/material-ui/src/Popper/Popper.js": [
                    "function: Popper.handleOpen"
                ],
                "packages/material-ui/src/Popper/Popper.test.js": [
                    ""
                ],
                "packages/material-ui/src/Popper/Popper.d.ts": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/material-ui/src/Popper/Popper.js b/packages/material-ui/src/Popper/Popper.js\nindex f963de0..fd6e20c 100644\n--- a/packages/material-ui/src/Popper/Popper.js\n+++ b/packages/material-ui/src/Popper/Popper.js\n@@ -96,8 +96,19 @@ class Popper extends React.Component {\n       },\n       // We could have been using a custom modifier like react-popper is doing.\n       // But it seems this is the best public API for this use case.\n-      onCreate: this.handlePopperUpdate,\n-      onUpdate: this.handlePopperUpdate,\n+      // Call internal update handler and then any user-provided callbacks from popperOptions.\n+      onCreate: data => {\n+        this.handlePopperUpdate(data);\n+        if (popperOptions.onCreate) {\n+          popperOptions.onCreate(data);\n+        }\n+      },\n+      onUpdate: data => {\n+        this.handlePopperUpdate(data);\n+        if (popperOptions.onUpdate) {\n+          popperOptions.onUpdate(data);\n+        }\n+      },\n     });\n   };\n \n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "packages/material-ui/src/Popper/Popper.js": [
                    "class: Popper\nfunction: Popper.handleOpen"
                ],
                "packages/material-ui/src/Popper/Popper.test.js": [
                    ""
                ],
                "packages/material-ui/src/Popper/Popper.d.ts": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/material-ui/src/Popper/Popper.js b/packages/material-ui/src/Popper/Popper.js\nindex f963de0..da62917 100644\n--- a/packages/material-ui/src/Popper/Popper.js\n+++ b/packages/material-ui/src/Popper/Popper.js\n@@ -79,6 +79,8 @@ class Popper extends React.Component {\n       this.popper = null;\n     }\n \n+    const { onCreate: popperOnCreate, onUpdate: popperOnUpdate } = popperOptions;\n+\n     this.popper = new PopperJS(getAnchorEl(anchorEl), popperNode, {\n       placement: flipPlacement(placement),\n       ...popperOptions,\n@@ -96,8 +98,18 @@ class Popper extends React.Component {\n       },\n       // We could have been using a custom modifier like react-popper is doing.\n       // But it seems this is the best public API for this use case.\n-      onCreate: this.handlePopperUpdate,\n-      onUpdate: this.handlePopperUpdate,\n+      onCreate: data => {\n+        if (typeof popperOnCreate === 'function') {\n+          popperOnCreate(data);\n+        }\n+        this.handlePopperUpdate(data);\n+      },\n+      onUpdate: data => {\n+        if (typeof popperOnUpdate === 'function') {\n+          popperOnUpdate(data);\n+        }\n+        this.handlePopperUpdate(data);\n+      },\n     });\n   };\n \n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/packages/material-ui/src/Popper/Popper.js b/packages/material-ui/src/Popper/Popper.js\nindex f963de0..fd6e20c 100644\n--- a/packages/material-ui/src/Popper/Popper.js\n+++ b/packages/material-ui/src/Popper/Popper.js\n@@ -96,8 +96,19 @@ class Popper extends React.Component {\n       },\n       // We could have been using a custom modifier like react-popper is doing.\n       // But it seems this is the best public API for this use case.\n-      onCreate: this.handlePopperUpdate,\n-      onUpdate: this.handlePopperUpdate,\n+      // Call internal update handler and then any user-provided callbacks from popperOptions.\n+      onCreate: data => {\n+        this.handlePopperUpdate(data);\n+        if (popperOptions.onCreate) {\n+          popperOptions.onCreate(data);\n+        }\n+      },\n+      onUpdate: data => {\n+        this.handlePopperUpdate(data);\n+        if (popperOptions.onUpdate) {\n+          popperOptions.onUpdate(data);\n+        }\n+      },\n     });\n   };\n \n"
}