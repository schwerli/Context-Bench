{
    "instance_id": "SWE-PolyBench__typescript__maintenance__bugfix__7827bc22",
    "original_id": "mui__material-ui-26061",
    "1_model_selected_files": [
        "packages/material-ui/src/Tabs/Tabs.js",
        "packages/material-ui/src/Tabs/Tabs.test.js"
    ],
    "2_embedding_selected_files": [
        "packages/material-ui/src/Tabs/Tabs.test.js",
        "packages/material-ui/src/Tabs/Tabs.js",
        "docs/src/pages/components/tabs/DisabledTabs.js",
        "docs/src/pages/components/tabs/AccessibleTabs1.js",
        "packages/material-ui-lab/src/TreeItem/TreeItem.test.js",
        "docs/src/pages/components/tabs/AccessibleTabs2.js",
        "packages/material-ui/src/ButtonBase/ButtonBase.test.js",
        "packages/material-ui-unstyled/src/Unstable_TrapFocus/Unstable_TrapFocus.js",
        "packages/material-ui/src/Tab/Tab.test.js",
        "packages/material-ui/src/TabScrollButton/TabScrollButton.js",
        "packages/material-ui/src/Autocomplete/Autocomplete.test.js",
        "packages/material-ui/src/TabScrollButton/TabScrollButton.test.js",
        "docs/src/pages/components/tabs/ScrollableTabsButtonPrevent.js",
        "packages/material-ui-unstyled/src/Unstable_TrapFocus/Unstable_TrapFocus.test.js",
        "packages/material-ui-lab/src/TabList/TabList.test.js",
        "packages/material-ui/src/Slider/Slider.test.js",
        "packages/material-ui/src/SpeedDial/SpeedDial.test.js",
        "docs/src/pages/components/tabs/BasicTabs.js",
        "packages/material-ui/src/Tab/Tab.js",
        "docs/src/pages/components/tabs/ScrollableTabsButtonForce.js",
        "docs/src/pages/components/tabs/FullWidthTabs.js",
        "docs/src/pages/components/trap-focus/DisableEnforceFocus.js",
        "docs/src/pages/components/tabs/VerticalTabs.js",
        "docs/src/pages/components/tabs/ScrollableTabsButtonVisible.js",
        "docs/src/pages/components/tabs/ScrollableTabsButtonAuto.js",
        "docs/src/modules/components/DemoToolbar.js",
        "packages/material-ui/src/Modal/Modal.test.js",
        "packages/material-ui-lab/src/TabContext/TabContext.test.js",
        "docs/src/pages/components/tabs/CustomizedTabs.js",
        "packages/material-ui/src/Tabs/Tabs.d.ts",
        "packages/material-ui/src/TablePagination/TablePagination.test.js",
        "docs/src/pages/components/tree-view/DisabledTreeItems.js",
        "packages/material-ui/src/InputBase/InputBase.js",
        "packages/material-ui/src/useAutocomplete/useAutocomplete.js",
        "packages/material-ui/src/SwipeableDrawer/SwipeableDrawer.test.js",
        "packages/material-ui/src/InputBase/InputBase.test.js",
        "packages/material-ui-unstyled/src/SliderUnstyled/SliderUnstyled.js",
        "packages/material-ui/src/Tabs/ScrollbarSize.test.js",
        "docs/src/pages/guides/routing/TabsRouter.js",
        "docs/src/pages/components/tabs/TabsWrappedLabel.js",
        "packages/material-ui-lab/src/TreeView/TreeView.js",
        "packages/material-ui/src/Tooltip/Tooltip.test.js",
        "packages/material-ui/src/Hidden/HiddenJs.test.js",
        "packages/material-ui/src/MenuList/MenuList.js",
        "packages/material-ui/src/AccordionSummary/AccordionSummary.test.js",
        "packages/material-ui/src/ButtonBase/ButtonBase.js"
    ],
    "3_final_combined_files": [
        "packages/material-ui/src/Tabs/Tabs.js",
        "packages/material-ui/src/Tabs/Tabs.test.js",
        "docs/src/pages/components/tabs/DisabledTabs.js"
    ],
    "4_related_elements": {
        "packages/material-ui/src/Tabs/Tabs.js": [
            "function: handleKeyDown\nfunction: Tabs\nvariable: tabListRef\nvariable: children"
        ],
        "packages/material-ui/src/Tabs/Tabs.test.js": [
            ""
        ],
        "docs/src/pages/components/tabs/DisabledTabs.js": [
            ""
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "packages/material-ui/src/Tabs/Tabs.js": [
                    "function: handleKeyDown\nline: 611\nline: 614\nline: 617\nline: 620"
                ],
                "packages/material-ui/src/Tabs/Tabs.test.js": [
                    ""
                ],
                "docs/src/pages/components/tabs/DisabledTabs.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/material-ui/src/Tabs/Tabs.js b/packages/material-ui/src/Tabs/Tabs.js\nindex d003e3c..9bdf38e 100644\n--- a/packages/material-ui/src/Tabs/Tabs.js\n+++ b/packages/material-ui/src/Tabs/Tabs.js\n@@ -1,3 +1,4 @@\n+\n import * as React from 'react';\n import { isFragment } from 'react-is';\n import PropTypes from 'prop-types';\n@@ -597,6 +598,65 @@ const Tabs = React.forwardRef(function Tabs(inProps, ref) {\n       return;\n     }\n \n+    // Helper to determine whether a tab is disabled\n+    const isTabDisabled = (el) => {\n+      if (!el) {\n+        return false;\n+      }\n+      const ariaDisabled = el.getAttribute('aria-disabled');\n+      return ariaDisabled === 'true' || el.hasAttribute('disabled');\n+    };\n+\n+    // Move to the next/previous element with wrap-around\n+    const move = (el, dir) => {\n+      if (!el || !tabListRef.current) {\n+        return null;\n+      }\n+      if (dir === 'next') {\n+        return el.nextElementSibling || tabListRef.current.firstChild;\n+      }\n+      // dir === 'prev'\n+      return el.previousElementSibling || tabListRef.current.lastChild;\n+    };\n+\n+    // Find the next enabled tab in the given direction skipping disabled tabs\n+    const findAdjacentEnabledTab = (from, dir) => {\n+      let candidate = move(from, dir);\n+      const startCandidate = candidate;\n+      while (candidate && (candidate.getAttribute('role') !== 'tab' || isTabDisabled(candidate))) {\n+        candidate = move(candidate, dir);\n+        if (candidate === startCandidate) {\n+          // We looped through all tabs and didn't find an enabled one\n+          return null;\n+        }\n+      }\n+      return candidate;\n+    };\n+\n+    // Find the first/last enabled tab (Home/End)\n+    const findEdgeEnabledTab = (edge) => {\n+      if (!tabListRef.current) {\n+        return null;\n+      }\n+      let candidate =\n+        edge === 'start' ? tabListRef.current.firstChild : tabListRef.current.lastChild;\n+      if (!candidate) {\n+        return null;\n+      }\n+      const startCandidate = candidate;\n+      while (candidate && (candidate.getAttribute('role') !== 'tab' || isTabDisabled(candidate))) {\n+        candidate =\n+          edge === 'start'\n+            ? candidate.nextElementSibling || tabListRef.current.firstChild\n+            : candidate.previousElementSibling || tabListRef.current.lastChild;\n+        if (candidate === startCandidate) {\n+          // No enabled tabs found\n+          return null;\n+        }\n+      }\n+      return candidate;\n+    };\n+\n     let newFocusTarget = null;\n     let previousItemKey = orientation === 'horizontal' ? 'ArrowLeft' : 'ArrowUp';\n     let nextItemKey = orientation === 'horizontal' ? 'ArrowRight' : 'ArrowDown';\n@@ -608,16 +668,16 @@ const Tabs = React.forwardRef(function Tabs(inProps, ref) {\n \n     switch (event.key) {\n       case previousItemKey:\n-        newFocusTarget = target.previousElementSibling || tabListRef.current.lastChild;\n+        newFocusTarget = findAdjacentEnabledTab(target, 'prev');\n         break;\n       case nextItemKey:\n-        newFocusTarget = target.nextElementSibling || tabListRef.current.firstChild;\n+        newFocusTarget = findAdjacentEnabledTab(target, 'next');\n         break;\n       case 'Home':\n-        newFocusTarget = tabListRef.current.firstChild;\n+        newFocusTarget = findEdgeEnabledTab('start');\n         break;\n       case 'End':\n-        newFocusTarget = tabListRef.current.lastChild;\n+        newFocusTarget = findEdgeEnabledTab('end');\n         break;\n       default:\n         break;\n@@ -806,4 +866,4 @@ Tabs.propTypes /* remove-proptypes */ = {\n   visibleScrollbar: PropTypes.bool,\n };\n \n-export default Tabs;\n+export default Tabs;\n",
                "diff --git a/packages/material-ui/src/Tabs/Tabs.js b/packages/material-ui/src/Tabs/Tabs.js\nindex d003e3c..6d728ec 100644\n--- a/packages/material-ui/src/Tabs/Tabs.js\n+++ b/packages/material-ui/src/Tabs/Tabs.js\n@@ -1,3 +1,4 @@\n+\n import * as React from 'react';\n import { isFragment } from 'react-is';\n import PropTypes from 'prop-types';\n@@ -606,18 +607,89 @@ const Tabs = React.forwardRef(function Tabs(inProps, ref) {\n       nextItemKey = 'ArrowLeft';\n     }\n \n+    // Helper to determine if a tab is disabled\n+    const isTabDisabled = (el) => {\n+      if (!el) {\n+        return true;\n+      }\n+      return el.hasAttribute('disabled') || el.getAttribute('aria-disabled') === 'true';\n+    };\n+\n+    const getNextEnabledTab = () => {\n+      const list = tabListRef.current;\n+      if (!list) {\n+        return null;\n+      }\n+      let next = target.nextElementSibling || list.firstChild;\n+      // Loop until we find a non-disabled tab or we are back to the original target\n+      while (next && isTabDisabled(next) && next !== target) {\n+        next = next.nextElementSibling || list.firstChild;\n+      }\n+      return next && !isTabDisabled(next) ? next : null;\n+    };\n+\n+    const getPreviousEnabledTab = () => {\n+      const list = tabListRef.current;\n+      if (!list) {\n+        return null;\n+      }\n+      let prev = target.previousElementSibling || list.lastChild;\n+      while (prev && isTabDisabled(prev) && prev !== target) {\n+        prev = prev.previousElementSibling || list.lastChild;\n+      }\n+      return prev && !isTabDisabled(prev) ? prev : null;\n+    };\n+\n+    const getFirstEnabledTab = () => {\n+      const list = tabListRef.current;\n+      if (!list) {\n+        return null;\n+      }\n+      let first = list.firstChild;\n+      if (!first) {\n+        return null;\n+      }\n+      if (!isTabDisabled(first)) {\n+        return first;\n+      }\n+      let next = first.nextElementSibling || list.firstChild;\n+      while (next && next !== first && isTabDisabled(next)) {\n+        next = next.nextElementSibling || list.firstChild;\n+      }\n+      return next && !isTabDisabled(next) ? next : null;\n+    };\n+\n+    const getLastEnabledTab = () => {\n+      const list = tabListRef.current;\n+      if (!list) {\n+        return null;\n+      }\n+      let last = list.lastChild;\n+      if (!last) {\n+        return null;\n+      }\n+      if (!isTabDisabled(last)) {\n+        return last;\n+      }\n+      let prev = last.previousElementSibling || list.lastChild;\n+      while (prev && prev !== last && isTabDisabled(prev)) {\n+        prev = prev.previousElementSibling || list.lastChild;\n+      }\n+      return prev && !isTabDisabled(prev) ? prev : null;\n+    };\n+\n     switch (event.key) {\n       case previousItemKey:\n-        newFocusTarget = target.previousElementSibling || tabListRef.current.lastChild;\n+        newFocusTarget = getPreviousEnabledTab();\n         break;\n       case nextItemKey:\n-        newFocusTarget = target.nextElementSibling || tabListRef.current.firstChild;\n+        newFocusTarget = getNextEnabledTab();\n         break;\n       case 'Home':\n-        newFocusTarget = tabListRef.current.firstChild;\n+        newFocusTarget = getFirstEnabledTab();\n         break;\n       case 'End':\n-        newFocusTarget = tabListRef.current.lastChild;\n+        newFocusTarget = getLastEnabledTab();\n         break;\n       default:\n         break;\n@@ -806,4 +878,4 @@ Tabs.propTypes /* remove-proptypes */ = {\n   visibleScrollbar: PropTypes.bool,\n };\n \n-export default Tabs;\n+export default Tabs;\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "packages/material-ui/src/Tabs/Tabs.js": [
                    "function: handleKeyDown\nline: 586\nline: 611\nline: 614\nline: 617\nline: 620\nline: 626\nline: 627\nline: 628\nline: 629"
                ],
                "packages/material-ui/src/Tabs/Tabs.test.js": [
                    ""
                ],
                "docs/src/pages/components/tabs/DisabledTabs.js": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/packages/material-ui/src/Tabs/Tabs.js b/packages/material-ui/src/Tabs/Tabs.js\nindex d003e3c..4a766d0 100644\n--- a/packages/material-ui/src/Tabs/Tabs.js\n+++ b/packages/material-ui/src/Tabs/Tabs.js\n@@ -1,3 +1,4 @@\n+\n import * as React from 'react';\n import { isFragment } from 'react-is';\n import PropTypes from 'prop-types';\n@@ -597,6 +598,55 @@ const Tabs = React.forwardRef(function Tabs(inProps, ref) {\n       return;\n     }\n \n+    const list = tabListRef.current;\n+    if (!list) {\n+      return;\n+    }\n+\n+    const isDisabled = (el) =>\n+      el.hasAttribute('disabled') || el.getAttribute('aria-disabled') === 'true';\n+\n+    const tabs = Array.from(list.children).filter((el) => el.getAttribute('role') === 'tab');\n+    if (tabs.length === 0) {\n+      return;\n+    }\n+\n+    const currentIndex = tabs.indexOf(target);\n+    if (currentIndex === -1) {\n+      return;\n+    }\n+\n+    const getNextEnabled = (startIndex, forward) => {\n+      let index = startIndex;\n+      // iterate through all other tabs at most once\n+      for (let i = 0; i < tabs.length - 1; i += 1) {\n+        index = forward ? (index + 1) % tabs.length : (index - 1 + tabs.length) % tabs.length;\n+        const candidate = tabs[index];\n+        if (!isDisabled(candidate)) {\n+          return candidate;\n+        }\n+      }\n+      return null;\n+    };\n+\n+    const getFirstEnabled = () => {\n+      for (let i = 0; i < tabs.length; i += 1) {\n+        if (!isDisabled(tabs[i])) {\n+          return tabs[i];\n+        }\n+      }\n+      return null;\n+    };\n+\n+    const getLastEnabled = () => {\n+      for (let i = tabs.length - 1; i >= 0; i -= 1) {\n+        if (!isDisabled(tabs[i])) {\n+          return tabs[i];\n+        }\n+      }\n+      return null;\n+    };\n+\n     let newFocusTarget = null;\n     let previousItemKey = orientation === 'horizontal' ? 'ArrowLeft' : 'ArrowUp';\n     let nextItemKey = orientation === 'horizontal' ? 'ArrowRight' : 'ArrowDown';\n@@ -607,18 +657,22 @@ const Tabs = React.forwardRef(function Tabs(inProps, ref) {\n     }\n \n     switch (event.key) {\n-      case previousItemKey:\n-        newFocusTarget = target.previousElementSibling || tabListRef.current.lastChild;\n+      case previousItemKey: {\n+        newFocusTarget = getNextEnabled(currentIndex, false);\n         break;\n-      case nextItemKey:\n-        newFocusTarget = target.nextElementSibling || tabListRef.current.firstChild;\n+      }\n+      case nextItemKey: {\n+        newFocusTarget = getNextEnabled(currentIndex, true);\n         break;\n-      case 'Home':\n-        newFocusTarget = tabListRef.current.firstChild;\n+      }\n+      case 'Home': {\n+        newFocusTarget = getFirstEnabled();\n         break;\n-      case 'End':\n-        newFocusTarget = tabListRef.current.lastChild;\n+      }\n+      case 'End': {\n+        newFocusTarget = getLastEnabled();\n         break;\n+      }\n       default:\n         break;\n     }\n@@ -806,4 +860,4 @@ Tabs.propTypes /* remove-proptypes */ = {\n   visibleScrollbar: PropTypes.bool,\n };\n \n-export default Tabs;\n+export default Tabs;\n",
                "diff --git a/packages/material-ui/src/Tabs/Tabs.js b/packages/material-ui/src/Tabs/Tabs.js\nindex d003e3c..3a482d4 100644\n--- a/packages/material-ui/src/Tabs/Tabs.js\n+++ b/packages/material-ui/src/Tabs/Tabs.js\n@@ -1,3 +1,4 @@\n+\n import * as React from 'react';\n import { isFragment } from 'react-is';\n import PropTypes from 'prop-types';\n@@ -597,6 +598,39 @@ const Tabs = React.forwardRef(function Tabs(inProps, ref) {\n       return;\n     }\n \n+    const isDisabled = (el) =>\n+      !!el &&\n+      (el.hasAttribute('disabled') || el.getAttribute('aria-disabled') === 'true');\n+\n+    const getNextEnabled = (el) => {\n+      if (!tabListRef.current) {\n+        return null;\n+      }\n+      let next = el.nextElementSibling || tabListRef.current.firstChild;\n+      while (next && isDisabled(next)) {\n+        next = next.nextElementSibling || tabListRef.current.firstChild;\n+        // if we wrapped all the way around back to the starting element, abort\n+        if (next === el) {\n+          return null;\n+        }\n+      }\n+      return next;\n+    };\n+\n+    const getPreviousEnabled = (el) => {\n+      if (!tabListRef.current) {\n+        return null;\n+      }\n+      let prev = el.previousElementSibling || tabListRef.current.lastChild;\n+      while (prev && isDisabled(prev)) {\n+        prev = prev.previousElementSibling || tabListRef.current.lastChild;\n+        if (prev === el) {\n+          return null;\n+        }\n+      }\n+      return prev;\n+    };\n+\n     let newFocusTarget = null;\n     let previousItemKey = orientation === 'horizontal' ? 'ArrowLeft' : 'ArrowUp';\n     let nextItemKey = orientation === 'horizontal' ? 'ArrowRight' : 'ArrowDown';\n@@ -607,18 +641,30 @@ const Tabs = React.forwardRef(function Tabs(inProps, ref) {\n     }\n \n     switch (event.key) {\n-      case previousItemKey:\n-        newFocusTarget = target.previousElementSibling || tabListRef.current.lastChild;\n+      case previousItemKey: {\n+        newFocusTarget = getPreviousEnabled(target);\n         break;\n-      case nextItemKey:\n-        newFocusTarget = target.nextElementSibling || tabListRef.current.firstChild;\n+      }\n+      case nextItemKey: {\n+        newFocusTarget = getNextEnabled(target);\n         break;\n-      case 'Home':\n-        newFocusTarget = tabListRef.current.firstChild;\n+      }\n+      case 'Home': {\n+        let first = tabListRef.current && tabListRef.current.firstChild;\n+        if (first && isDisabled(first)) {\n+          first = getNextEnabled(first);\n+        }\n+        newFocusTarget = first;\n         break;\n-      case 'End':\n-        newFocusTarget = tabListRef.current.lastChild;\n+      }\n+      case 'End': {\n+        let last = tabListRef.current && tabListRef.current.lastChild;\n+        if (last && isDisabled(last)) {\n+          last = getPreviousEnabled(last);\n+        }\n+        newFocusTarget = last;\n         break;\n+      }\n       default:\n         break;\n     }\n@@ -806,4 +852,4 @@ Tabs.propTypes /* remove-proptypes */ = {\n   visibleScrollbar: PropTypes.bool,\n };\n \n-export default Tabs;\n+export default Tabs;\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/packages/material-ui/src/Tabs/Tabs.js b/packages/material-ui/src/Tabs/Tabs.js\nindex d003e3c..9bdf38e 100644\n--- a/packages/material-ui/src/Tabs/Tabs.js\n+++ b/packages/material-ui/src/Tabs/Tabs.js\n@@ -1,3 +1,4 @@\n+\n import * as React from 'react';\n import { isFragment } from 'react-is';\n import PropTypes from 'prop-types';\n@@ -597,6 +598,65 @@ const Tabs = React.forwardRef(function Tabs(inProps, ref) {\n       return;\n     }\n \n+    // Helper to determine whether a tab is disabled\n+    const isTabDisabled = (el) => {\n+      if (!el) {\n+        return false;\n+      }\n+      const ariaDisabled = el.getAttribute('aria-disabled');\n+      return ariaDisabled === 'true' || el.hasAttribute('disabled');\n+    };\n+\n+    // Move to the next/previous element with wrap-around\n+    const move = (el, dir) => {\n+      if (!el || !tabListRef.current) {\n+        return null;\n+      }\n+      if (dir === 'next') {\n+        return el.nextElementSibling || tabListRef.current.firstChild;\n+      }\n+      // dir === 'prev'\n+      return el.previousElementSibling || tabListRef.current.lastChild;\n+    };\n+\n+    // Find the next enabled tab in the given direction skipping disabled tabs\n+    const findAdjacentEnabledTab = (from, dir) => {\n+      let candidate = move(from, dir);\n+      const startCandidate = candidate;\n+      while (candidate && (candidate.getAttribute('role') !== 'tab' || isTabDisabled(candidate))) {\n+        candidate = move(candidate, dir);\n+        if (candidate === startCandidate) {\n+          // We looped through all tabs and didn't find an enabled one\n+          return null;\n+        }\n+      }\n+      return candidate;\n+    };\n+\n+    // Find the first/last enabled tab (Home/End)\n+    const findEdgeEnabledTab = (edge) => {\n+      if (!tabListRef.current) {\n+        return null;\n+      }\n+      let candidate =\n+        edge === 'start' ? tabListRef.current.firstChild : tabListRef.current.lastChild;\n+      if (!candidate) {\n+        return null;\n+      }\n+      const startCandidate = candidate;\n+      while (candidate && (candidate.getAttribute('role') !== 'tab' || isTabDisabled(candidate))) {\n+        candidate =\n+          edge === 'start'\n+            ? candidate.nextElementSibling || tabListRef.current.firstChild\n+            : candidate.previousElementSibling || tabListRef.current.lastChild;\n+        if (candidate === startCandidate) {\n+          // No enabled tabs found\n+          return null;\n+        }\n+      }\n+      return candidate;\n+    };\n+\n     let newFocusTarget = null;\n     let previousItemKey = orientation === 'horizontal' ? 'ArrowLeft' : 'ArrowUp';\n     let nextItemKey = orientation === 'horizontal' ? 'ArrowRight' : 'ArrowDown';\n@@ -608,16 +668,16 @@ const Tabs = React.forwardRef(function Tabs(inProps, ref) {\n \n     switch (event.key) {\n       case previousItemKey:\n-        newFocusTarget = target.previousElementSibling || tabListRef.current.lastChild;\n+        newFocusTarget = findAdjacentEnabledTab(target, 'prev');\n         break;\n       case nextItemKey:\n-        newFocusTarget = target.nextElementSibling || tabListRef.current.firstChild;\n+        newFocusTarget = findAdjacentEnabledTab(target, 'next');\n         break;\n       case 'Home':\n-        newFocusTarget = tabListRef.current.firstChild;\n+        newFocusTarget = findEdgeEnabledTab('start');\n         break;\n       case 'End':\n-        newFocusTarget = tabListRef.current.lastChild;\n+        newFocusTarget = findEdgeEnabledTab('end');\n         break;\n       default:\n         break;\n@@ -806,4 +866,4 @@ Tabs.propTypes /* remove-proptypes */ = {\n   visibleScrollbar: PropTypes.bool,\n };\n \n-export default Tabs;\n+export default Tabs;\n"
}