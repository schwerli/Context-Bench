{
    "instance_id": "SWE-PolyBench__javascript__maintenance__bugfix__63513ada",
    "original_id": "sveltejs__svelte-3749",
    "1_model_selected_files": [
        "src/compiler/compile/render_dom/wrappers/IfBlock.ts",
        "src/compiler/compile/render_dom/wrappers/shared/changed.ts",
        "src/compiler/compile/render_dom/Block.ts"
    ],
    "2_embedding_selected_files": [
        "src/compiler/compile/render_dom/wrappers/IfBlock.ts",
        "src/compiler/parse/state/mustache.ts",
        "src/compiler/compile/render_ssr/handlers/IfBlock.ts",
        "src/compiler/compile/render_dom/wrappers/InlineComponent/index.ts",
        "src/compiler/compile/nodes/IfBlock.ts",
        "src/compiler/compile/render_dom/index.ts",
        "src/compiler/compile/nodes/shared/Expression.ts",
        "src/compiler/compile/nodes/ElseBlock.ts",
        "src/compiler/compile/render_dom/wrappers/EachBlock.ts",
        "src/compiler/compile/render_dom/wrappers/shared/bind_this.ts",
        "src/compiler/compile/render_dom/wrappers/shared/create_debugging_comment.ts",
        "src/compiler/compile/Component.ts",
        "src/compiler/compile/render_ssr/handlers/InlineComponent.ts",
        "src/compiler/compile/nodes/EachBlock.ts",
        "src/compiler/compile/render_dom/wrappers/DebugTag.ts",
        "src/runtime/internal/ssr.ts",
        "src/compiler/compile/render_ssr/index.ts",
        "src/compiler/compile/render_dom/wrappers/AwaitBlock.ts",
        "src/compiler/compile/render_dom/wrappers/MustacheTag.ts",
        "src/compiler/compile/css/Selector.ts",
        "src/compiler/compile/render_ssr/handlers/DebugTag.ts",
        "src/compiler/compile/render_ssr/handlers/EachBlock.ts",
        "src/compiler/compile/render_dom/wrappers/RawMustacheTag.ts",
        "src/compiler/compile/render_dom/wrappers/Element/Attribute.ts",
        "src/compiler/compile/nodes/InlineComponent.ts",
        "src/compiler/parse/state/tag.ts",
        "src/compiler/compile/nodes/ThenBlock.ts",
        "src/compiler/compile/render_dom/wrappers/shared/get_context_merger.ts",
        "src/compiler/compile/render_dom/Block.ts",
        "src/compiler/compile/nodes/Element.ts",
        "src/compiler/compile/render_dom/Renderer.ts",
        "src/compiler/compile/render_dom/wrappers/Element/Binding.ts",
        "src/compiler/compile/utils/invalidate.ts",
        "src/compiler/compile/nodes/DebugTag.ts",
        "src/compiler/compile/render_dom/wrappers/Fragment.ts",
        "src/compiler/compile/render_dom/wrappers/Element/index.ts",
        "src/compiler/compile/nodes/shared/Tag.ts",
        "src/compiler/compile/render_dom/wrappers/Slot.ts",
        "src/compiler/compile/render_dom/wrappers/shared/Tag.ts",
        "src/compiler/compile/index.ts",
        "src/compiler/compile/render_ssr/handlers/Element.ts",
        "src/compiler/compile/render_ssr/Renderer.ts",
        "src/compiler/compile/nodes/shared/TemplateScope.ts",
        "src/compiler/compile/nodes/Comment.ts",
        "svelte/.eslintrc.js",
        "src/compiler/compile/nodes/PendingBlock.ts",
        "src/compiler/compile/nodes/MustacheTag.ts",
        "src/compiler/compile/nodes/shared/AbstractBlock.ts",
        "src/compiler/compile/render_dom/wrappers/shared/add_actions.ts",
        "src/compiler/compile/render_dom/wrappers/Window.ts",
        "src/compiler/compile/nodes/RawMustacheTag.ts",
        "site/content/examples/99-embeds/20181225-blog-svelte-css-in-js/styles.js",
        "src/compiler/interfaces.ts",
        "src/compiler/preprocess/index.ts",
        "src/compiler/compile/render_ssr/handlers/Tag.ts",
        "src/compiler/compile/nodes/Head.ts"
    ],
    "3_final_combined_files": [
        "src/compiler/compile/render_dom/wrappers/IfBlock.ts",
        "src/compiler/compile/render_dom/wrappers/shared/changed.ts",
        "src/compiler/compile/render_dom/Block.ts",
        "src/compiler/parse/state/mustache.ts",
        "src/compiler/compile/render_ssr/handlers/IfBlock.ts"
    ],
    "4_related_elements": {
        "src/compiler/compile/render_dom/wrappers/shared/changed.ts": [
            "function: changed"
        ],
        "src/compiler/compile/render_dom/wrappers/IfBlock.ts": [
            "function: IfBlockWrapper.render_compound_with_outros\nfunction: IfBlockWrapper.render_compound"
        ],
        "src/compiler/compile/render_dom/Block.ts": [
            ""
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "src/compiler/compile/render_dom/wrappers/shared/changed.ts": [
                    "function: changed"
                ],
                "src/compiler/compile/render_dom/wrappers/IfBlock.ts": [
                    "function: IfBlock.render_compound_with_outros\nline: 391"
                ],
                "src/compiler/compile/render_dom/Block.ts": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/compiler/compile/render_dom/wrappers/shared/changed.ts b/src/compiler/compile/render_dom/wrappers/shared/changed.ts\nindex b7dc12e..48dd767 100644\n--- a/src/compiler/compile/render_dom/wrappers/shared/changed.ts\n+++ b/src/compiler/compile/render_dom/wrappers/shared/changed.ts\n@@ -1,7 +1,12 @@\n+\n import { x } from 'code-red';\n \n export function changed(dependencies: string[]) {\n+\tif (!dependencies || dependencies.length === 0) {\n+\t\treturn x`false`;\n+\t}\n+\n \treturn dependencies\n \t\t.map(d => x`#changed.${d}`)\n \t\t.reduce((lhs, rhs) => x`${lhs} || ${rhs}`);\n-}\n+}\n",
                "diff --git a/src/compiler/compile/render_dom/wrappers/IfBlock.ts b/src/compiler/compile/render_dom/wrappers/IfBlock.ts\nindex 9733cb4..e467f79 100644\n--- a/src/compiler/compile/render_dom/wrappers/IfBlock.ts\n+++ b/src/compiler/compile/render_dom/wrappers/IfBlock.ts\n@@ -388,7 +388,7 @@ export default class IfBlockWrapper extends Wrapper {\n \t\t\t\t\tfunction ${select_block_type}(#changed, #ctx) {\n \t\t\t\t\t\t${this.branches.map(({ dependencies, condition, snippet }, i) => condition\n \t\t\t\t\t\t? b`\n-\t\t\t\t\t\t${snippet && b`if ((${condition} == null) || ${changed(dependencies)}) ${condition} = !!(${snippet})`}\n+\t\t\t\t\t\t${snippet && b`if ((${condition} == null)${changed(dependencies) ? b` || ${changed(dependencies)}` : ''}) ${condition} = !!(${snippet})`}\n \t\t\t\t\t\tif (${condition}) return ${i};`\n \t\t\t\t\t\t: b`return ${i};`)}\n \t\t\t\t\t\t${!has_else && b`return -1;`}\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "src/compiler/compile/render_dom/wrappers/IfBlock.ts": [
                    "function: IfBlock.render_compound_with_outros\nline: 391"
                ],
                "src/compiler/compile/render_dom/wrappers/shared/changed.ts": [
                    ""
                ],
                "src/compiler/compile/render_dom/Block.ts": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/compiler/compile/render_dom/wrappers/shared/changed.ts b/src/compiler/compile/render_dom/wrappers/shared/changed.ts\nindex b7dc12e..47816ba 100644\n--- a/src/compiler/compile/render_dom/wrappers/shared/changed.ts\n+++ b/src/compiler/compile/render_dom/wrappers/shared/changed.ts\n@@ -1,7 +1,9 @@\n+\n import { x } from 'code-red';\n \n export function changed(dependencies: string[]) {\n+\tif (!dependencies || dependencies.length === 0) return x`false`;\n \treturn dependencies\n \t\t.map(d => x`#changed.${d}`)\n \t\t.reduce((lhs, rhs) => x`${lhs} || ${rhs}`);\n-}\n+}\n",
                "diff --git a/src/compiler/compile/render_dom/wrappers/IfBlock.ts b/src/compiler/compile/render_dom/wrappers/IfBlock.ts\nindex 9733cb4..c171d32 100644\n--- a/src/compiler/compile/render_dom/wrappers/IfBlock.ts\n+++ b/src/compiler/compile/render_dom/wrappers/IfBlock.ts\n@@ -388,7 +388,7 @@ export default class IfBlockWrapper extends Wrapper {\n \t\t\t\t\tfunction ${select_block_type}(#changed, #ctx) {\n \t\t\t\t\t\t${this.branches.map(({ dependencies, condition, snippet }, i) => condition\n \t\t\t\t\t\t? b`\n-\t\t\t\t\t\t${snippet && b`if ((${condition} == null) || ${changed(dependencies)}) ${condition} = !!(${snippet})`}\n+\t\t\t\t\t\t${snippet && b`if ((${condition} == null${changed(dependencies) && b` || ${changed(dependencies)}`})) ${condition} = !!(${snippet})`}\n \t\t\t\t\t\tif (${condition}) return ${i};`\n \t\t\t\t\t\t: b`return ${i};`)}\n \t\t\t\t\t\t${!has_else && b`return -1;`}\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/src/compiler/compile/render_dom/wrappers/shared/changed.ts b/src/compiler/compile/render_dom/wrappers/shared/changed.ts\nindex b7dc12e..48dd767 100644\n--- a/src/compiler/compile/render_dom/wrappers/shared/changed.ts\n+++ b/src/compiler/compile/render_dom/wrappers/shared/changed.ts\n@@ -1,7 +1,12 @@\n+\n import { x } from 'code-red';\n \n export function changed(dependencies: string[]) {\n+\tif (!dependencies || dependencies.length === 0) {\n+\t\treturn x`false`;\n+\t}\n+\n \treturn dependencies\n \t\t.map(d => x`#changed.${d}`)\n \t\t.reduce((lhs, rhs) => x`${lhs} || ${rhs}`);\n-}\n+}\n"
}