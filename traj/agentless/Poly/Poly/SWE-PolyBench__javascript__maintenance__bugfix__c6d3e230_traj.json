{
    "instance_id": "SWE-PolyBench__javascript__maintenance__bugfix__c6d3e230",
    "original_id": "sveltejs__svelte-3305",
    "1_model_selected_files": [
        "src/compiler/compile/render_dom/wrappers/Element/Binding.ts",
        "src/compiler/compile/render_dom/wrappers/Element/index.ts",
        "src/compiler/compile/render_dom/index.ts"
    ],
    "2_embedding_selected_files": [
        "site/src/utils/examples.js",
        "site/src/client.js",
        "svelte/register.js",
        "site/src/service-worker.js",
        "src/compiler/compile/nodes/Element.ts",
        "src/compiler/compile/render_dom/wrappers/shared/bind_this.ts",
        "src/runtime/internal/ssr.ts",
        "src/compiler/compile/nodes/Binding.ts",
        "site/content/tutorial/08-stores/06-store-bindings/app-b/stores.js",
        "svelte/.eslintrc.js",
        "src/compiler/compile/render_dom/wrappers/Element/Binding.ts",
        "site/content/tutorial/08-stores/06-store-bindings/app-a/stores.js",
        "site/src/utils/compat.js",
        "site/src/config.js",
        "site/src/routes/repl/local/[...file].js",
        "src/runtime/index.ts",
        "site/src/user.js",
        "svelte/rollup.config.js",
        "src/compiler/compile/nodes/Window.ts",
        "site/src/routes/repl/create.json.js",
        "src/runtime/internal/utils.ts",
        "src/runtime/internal/Component.ts",
        "src/runtime/ambient.ts",
        "site/src/routes/blog/_posts.js",
        "src/compiler/compile/render_dom/wrappers/Window.ts",
        "site/rollup.config.js",
        "site/content/examples/07-stores/00-writable-stores/stores.js",
        "site/.eslintrc.js",
        "site/scripts/get-contributors.js",
        "site/src/routes/repl/_utils/downloadBlob.js",
        "src/compiler/compile/utils/__test__.ts",
        "site/scripts/update_template.js",
        "src/compiler/compile/Component.ts",
        "site/src/routes/repl/[id]/index.json.js",
        "src/runtime/internal/dom.ts",
        "site/content/tutorial/08-stores/01-writable-stores/app-b/stores.js",
        "site/src/server.js",
        "src/compiler/compile/render_dom/index.ts",
        "site/content/tutorial/08-stores/02-auto-subscriptions/app-b/stores.js",
        "site/src/routes/examples/_examples.js",
        "src/compiler/compile/css/Selector.ts",
        "site/content/examples/07-stores/01-auto-subscriptions/stores.js",
        "site/content/tutorial/08-stores/01-writable-stores/app-a/stores.js",
        "site/content/tutorial/08-stores/02-auto-subscriptions/app-a/stores.js",
        "site/src/routes/tutorial/[slug]/index.json.js",
        "src/compiler/compile/render_dom/wrappers/InlineComponent/index.ts",
        "site/src/routes/blog/rss.xml.js",
        "src/compiler/compile/render_dom/wrappers/Element/index.ts",
        "src/compiler/compile/render_dom/wrappers/Element/fix_attribute_casing.ts",
        "src/compiler/utils/names.ts",
        "site/content/examples/11-easing/00-easing/eases.js",
        "src/compiler/compile/index.ts",
        "src/compiler/compile/render_ssr/handlers/DebugTag.ts",
        "src/compiler/compile/css/Stylesheet.ts",
        "src/compiler/compile/render_dom/Renderer.ts",
        "src/compiler/compile/render_dom/wrappers/Element/Attribute.ts",
        "site/content/examples/09-transitions/06-deferred-transitions/crossfade.js",
        "src/compiler/parse/state/tag.ts",
        "src/runtime/internal/environment.ts",
        "site/content/tutorial/16-special-elements/07-svelte-options/app-a/flash.js",
        "site/content/tutorial/16-special-elements/07-svelte-options/app-b/flash.js",
        "src/runtime/internal/style_manager.ts",
        "site/content/examples/99-embeds/20181225-blog-svelte-css-in-js/styles.js",
        "src/compiler/config.ts",
        "src/compiler/compile/render_ssr/handlers/shared/get_slot_scope.ts",
        "src/compiler/compile/utils/flatten_reference.ts",
        "site/content/tutorial/07-lifecycle/02-ondestroy/app-a/utils.js",
        "site/scripts/get-example-thumbnails/index.js",
        "site/content/examples/07-stores/04-custom-stores/stores.js",
        "site/src/routes/repl/_utils/body.js",
        "src/runtime/internal/globals.ts",
        "src/compiler/compile/nodes/InlineComponent.ts",
        "site/content/tutorial/08-stores/05-custom-stores/app-b/stores.js",
        "src/runtime/internal/lifecycle.ts",
        "src/compiler/compile/render_ssr/handlers/InlineComponent.ts",
        "src/compiler/compile/render_dom/wrappers/shared/get_context_merger.ts",
        "site/src/routes/tutorial/index.json.js",
        "src/compiler/interfaces.ts",
        "src/runtime/store/index.ts",
        "site/scripts/get-examples-from-tutorials/index.js",
        "src/runtime/internal/index.ts",
        "src/compiler/compile/nodes/EventHandler.ts",
        "site/content/examples/06-lifecycle/01-ondestroy/utils.js",
        "src/compiler/compile/render_dom/wrappers/shared/add_event_handlers.ts",
        "site/content/tutorial/08-stores/05-custom-stores/app-a/stores.js",
        "site/content/tutorial/07-lifecycle/02-ondestroy/app-b/utils.js",
        "site/content/tutorial/08-stores/03-readable-stores/app-b/stores.js"
    ],
    "3_final_combined_files": [
        "src/compiler/compile/render_dom/wrappers/Element/Binding.ts",
        "src/compiler/compile/render_dom/wrappers/Element/index.ts",
        "src/compiler/compile/render_dom/index.ts",
        "site/src/utils/examples.js",
        "site/src/client.js",
        "svelte/register.js"
    ],
    "4_related_elements": {
        "src/compiler/compile/render_dom/wrappers/Element/index.ts": [
            "variable: events\nfunction: ElementWrapper.add_bindings"
        ],
        "src/compiler/compile/render_dom/wrappers/Element/Binding.ts": [
            "function: BindingWrapper.render\nfunction: get_dom_updater\nfunction: get_value_from_dom"
        ],
        "src/compiler/compile/render_dom/index.ts": [
            ""
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "src/compiler/compile/render_dom/wrappers/Element/Binding.ts": [
                    "line: 161\nline: 165"
                ],
                "src/compiler/compile/render_dom/wrappers/Element/index.ts": [
                    "function: add_bindings"
                ],
                "src/compiler/compile/render_dom/index.ts": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/compiler/compile/render_dom/wrappers/Element/index.ts b/src/compiler/compile/render_dom/wrappers/Element/index.ts\nindex 98d1133..e8d1032 100644\n--- a/src/compiler/compile/render_dom/wrappers/Element/index.ts\n+++ b/src/compiler/compile/render_dom/wrappers/Element/index.ts\n@@ -1,3 +1,4 @@\n+\n import Renderer from '../../Renderer';\n import Element from '../../../nodes/Element';\n import Wrapper from '../shared/Wrapper';\n@@ -26,7 +27,12 @@ const events = [\n \t\tevent_names: ['input'],\n \t\tfilter: (node: Element, _name: string) =>\n \t\t\tnode.name === 'textarea' ||\n-\t\t\tnode.name === 'input' && !/radio|checkbox|range/.test(node.get_static_attribute_value('type') as string)\n+\t\t\tnode.name === 'input' && !/radio|checkbox|range|file/.test(node.get_static_attribute_value('type') as string)\n+\t},\n+\t{\n+\t\tevent_names: ['change'],\n+\t\tfilter: (node: Element, _name: string) =>\n+\t\t\tnode.name === 'input' && node.get_static_attribute_value('type') === 'file'\n \t},\n \t{\n \t\tevent_names: ['input'],\n@@ -841,4 +847,4 @@ export default class ElementWrapper extends Wrapper {\n \t// \t\t);\n \t// \t}\n \t// }\n-}\n+}\n",
                "diff --git a/src/compiler/compile/render_dom/wrappers/Element/Binding.ts b/src/compiler/compile/render_dom/wrappers/Element/Binding.ts\nindex bfb47e3..ea24783 100644\n--- a/src/compiler/compile/render_dom/wrappers/Element/Binding.ts\n+++ b/src/compiler/compile/render_dom/wrappers/Element/Binding.ts\n@@ -162,6 +162,12 @@ export default class BindingWrapper {\n \t\t\t\tif (parent.node.get_static_attribute_value('type') === 'file') {\n \t\t\t\t\tupdate_dom = null;\n \t\t\t\t}\n+\t\t\t\tbreak;\n+\n+\t\t\tcase 'files':\n+\t\t\t\t// the FileList on <input type=\"file\"> is read-only; do not write to it\n+\t\t\t\tupdate_dom = null;\n+\t\t\t\tbreak;\n \t\t}\n \n \t\tif (update_dom) {\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "src/compiler/compile/render_dom/wrappers/Element/Binding.ts": [
                    "function: BindingWrapper.render\nfunction: get_dom_updater"
                ],
                "src/compiler/compile/render_dom/wrappers/Element/index.ts": [
                    ""
                ],
                "src/compiler/compile/render_dom/index.ts": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/compiler/compile/render_dom/wrappers/Element/index.ts b/src/compiler/compile/render_dom/wrappers/Element/index.ts\nindex 98d1133..404c09a 100644\n--- a/src/compiler/compile/render_dom/wrappers/Element/index.ts\n+++ b/src/compiler/compile/render_dom/wrappers/Element/index.ts\n@@ -1,3 +1,4 @@\n+\n import Renderer from '../../Renderer';\n import Element from '../../../nodes/Element';\n import Wrapper from '../shared/Wrapper';\n@@ -26,7 +27,7 @@ const events = [\n \t\tevent_names: ['input'],\n \t\tfilter: (node: Element, _name: string) =>\n \t\t\tnode.name === 'textarea' ||\n-\t\t\tnode.name === 'input' && !/radio|checkbox|range/.test(node.get_static_attribute_value('type') as string)\n+\t\t\t(node.name === 'input' && !/radio|checkbox|range|file/.test(node.get_static_attribute_value('type') as string))\n \t},\n \t{\n \t\tevent_names: ['input'],\n@@ -38,7 +39,7 @@ const events = [\n \t\tevent_names: ['change'],\n \t\tfilter: (node: Element, _name: string) =>\n \t\t\tnode.name === 'select' ||\n-\t\t\tnode.name === 'input' && /radio|checkbox/.test(node.get_static_attribute_value('type') as string)\n+\t\t\t(node.name === 'input' && /radio|checkbox|file/.test(node.get_static_attribute_value('type') as string))\n \t},\n \t{\n \t\tevent_names: ['change', 'input'],\n@@ -841,4 +842,4 @@ export default class ElementWrapper extends Wrapper {\n \t// \t\t);\n \t// \t}\n \t// }\n-}\n+}\n",
                "diff --git a/src/compiler/compile/render_dom/wrappers/Element/Binding.ts b/src/compiler/compile/render_dom/wrappers/Element/Binding.ts\nindex bfb47e3..5b776f9 100644\n--- a/src/compiler/compile/render_dom/wrappers/Element/Binding.ts\n+++ b/src/compiler/compile/render_dom/wrappers/Element/Binding.ts\n@@ -160,8 +160,15 @@ export default class BindingWrapper {\n \n \t\t\tcase 'value':\n \t\t\t\tif (parent.node.get_static_attribute_value('type') === 'file') {\n+\t\t\t\t\t// file inputs have readonly value/files properties â€” don't attempt model-to-view updates\n \t\t\t\t\tupdate_dom = null;\n \t\t\t\t}\n+\t\t\t\tbreak;\n+\n+\t\t\tcase 'files':\n+\t\t\t\t// input.files is readonly; binding should be view-to-model only\n+\t\t\t\tupdate_dom = null;\n+\t\t\t\tbreak;\n \t\t}\n \n \t\tif (update_dom) {\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/src/compiler/compile/render_dom/wrappers/Element/index.ts b/src/compiler/compile/render_dom/wrappers/Element/index.ts\nindex 98d1133..e8d1032 100644\n--- a/src/compiler/compile/render_dom/wrappers/Element/index.ts\n+++ b/src/compiler/compile/render_dom/wrappers/Element/index.ts\n@@ -1,3 +1,4 @@\n+\n import Renderer from '../../Renderer';\n import Element from '../../../nodes/Element';\n import Wrapper from '../shared/Wrapper';\n@@ -26,7 +27,12 @@ const events = [\n \t\tevent_names: ['input'],\n \t\tfilter: (node: Element, _name: string) =>\n \t\t\tnode.name === 'textarea' ||\n-\t\t\tnode.name === 'input' && !/radio|checkbox|range/.test(node.get_static_attribute_value('type') as string)\n+\t\t\tnode.name === 'input' && !/radio|checkbox|range|file/.test(node.get_static_attribute_value('type') as string)\n+\t},\n+\t{\n+\t\tevent_names: ['change'],\n+\t\tfilter: (node: Element, _name: string) =>\n+\t\t\tnode.name === 'input' && node.get_static_attribute_value('type') === 'file'\n \t},\n \t{\n \t\tevent_names: ['input'],\n@@ -841,4 +847,4 @@ export default class ElementWrapper extends Wrapper {\n \t// \t\t);\n \t// \t}\n \t// }\n-}\n+}\n"
}