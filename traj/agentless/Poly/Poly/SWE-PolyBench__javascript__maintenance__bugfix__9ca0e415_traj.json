{
    "instance_id": "SWE-PolyBench__javascript__maintenance__bugfix__9ca0e415",
    "original_id": "sveltejs__svelte-3403",
    "1_model_selected_files": [
        "src/compiler/compile/render_dom/wrappers/InlineComponent/index.ts",
        "src/compiler/compile/render_dom/wrappers/Slot.ts",
        "src/runtime/internal/dom.ts",
        "src/compiler/compile/render_dom/Block.ts",
        "src/compiler/utils/namespaces.ts"
    ],
    "2_embedding_selected_files": [
        "src/compiler/compile/render_dom/wrappers/Slot.ts",
        "src/compiler/compile/render_dom/wrappers/InlineComponent/index.ts",
        "src/compiler/compile/nodes/Slot.ts",
        "src/compiler/compile/render_ssr/handlers/InlineComponent.ts",
        "src/compiler/compile/render_dom/wrappers/Element/index.ts",
        "src/compiler/compile/render_ssr/handlers/Slot.ts",
        "src/compiler/compile/render_ssr/handlers/Element.ts",
        "src/compiler/compile/nodes/Element.ts",
        "src/compiler/compile/render_dom/index.ts",
        "src/compiler/parse/state/tag.ts",
        "src/compiler/compile/render_dom/wrappers/Fragment.ts",
        "src/runtime/internal/Component.ts",
        "src/compiler/compile/render_dom/wrappers/Element/fix_attribute_casing.ts",
        "src/compiler/compile/nodes/InlineComponent.ts",
        "src/compiler/compile/render_dom/Renderer.ts",
        "src/runtime/internal/ssr.ts",
        "src/compiler/compile/render_dom/wrappers/MustacheTag.ts",
        "src/runtime/internal/dom.ts",
        "src/compiler/compile/render_dom/wrappers/Element/Attribute.ts",
        "src/compiler/compile/render_ssr/handlers/Tag.ts",
        "src/compiler/compile/render_dom/wrappers/shared/Tag.ts",
        "src/compiler/compile/render_dom/wrappers/RawMustacheTag.ts",
        "src/compiler/compile/render_ssr/Renderer.ts",
        "src/compiler/compile/render_ssr/handlers/HtmlTag.ts",
        "src/compiler/compile/render_dom/wrappers/Text.ts",
        "src/compiler/compile/utils/get_slot_data.ts",
        "src/compiler/compile/render_dom/wrappers/Title.ts",
        "src/compiler/compile/render_dom/wrappers/Element/StyleAttribute.ts",
        "site/content/examples/12-svg/05-svg-transitions/custom-transitions.js",
        "site/content/examples/99-embeds/20181225-blog-svelte-css-in-js/styles.js",
        "src/compiler/compile/render_dom/wrappers/DebugTag.ts",
        "site/content/examples/12-svg/05-svg-transitions/shape.js",
        "src/compiler/compile/Component.ts",
        "src/compiler/compile/render_ssr/handlers/Text.ts",
        "src/compiler/compile/render_dom/Block.ts",
        "src/compiler/compile/render_dom/wrappers/shared/Wrapper.ts",
        "src/compiler/compile/render_ssr/handlers/shared/get_slot_scope.ts",
        "src/compiler/compile/render_ssr/index.ts",
        "src/compiler/compile/render_dom/wrappers/EachBlock.ts",
        "src/compiler/compile/render_dom/wrappers/Head.ts",
        "src/compiler/parse/state/mustache.ts",
        "src/compiler/compile/render_dom/wrappers/Element/Binding.ts",
        "src/runtime/ambient.ts",
        "src/compiler/compile/render_dom/wrappers/AwaitBlock.ts",
        "src/compiler/interfaces.ts",
        "site/content/tutorial/16-special-elements/07-svelte-options/app-a/flash.js",
        "src/compiler/compile/render_ssr/handlers/Head.ts",
        "src/compiler/compile/nodes/Head.ts",
        "site/content/tutorial/16-special-elements/07-svelte-options/app-b/flash.js",
        "src/runtime/internal/style_manager.ts",
        "src/compiler/compile/render_ssr/handlers/DebugTag.ts",
        "src/runtime/transition/index.ts",
        "src/compiler/compile/render_ssr/handlers/Title.ts",
        "src/compiler/compile/nodes/Fragment.ts",
        "src/compiler/compile/render_dom/wrappers/IfBlock.ts",
        "src/compiler/compile/css/Selector.ts",
        "src/compiler/compile/render_ssr/handlers/AwaitBlock.ts",
        "src/compiler/compile/render_ssr/handlers/EachBlock.ts",
        "src/compiler/compile/nodes/Attribute.ts",
        "src/compiler/compile/nodes/interfaces.ts",
        "src/compiler/compile/nodes/shared/Tag.ts"
    ],
    "3_final_combined_files": [
        "src/compiler/compile/render_dom/wrappers/InlineComponent/index.ts",
        "src/compiler/compile/render_dom/wrappers/Slot.ts",
        "src/runtime/internal/dom.ts",
        "src/compiler/compile/nodes/Slot.ts"
    ],
    "4_related_elements": {
        "src/compiler/compile/render_dom/wrappers/InlineComponent/index.ts": [
            "class: InlineComponentWrapper"
        ],
        "src/compiler/compile/render_dom/wrappers/Slot.ts": [
            "class: SlotWrapper\nclass: FragmentWrapper\nclass: Wrapper\nclass: Renderer\nclass: Block\nfunction: get_slot_data"
        ],
        "src/runtime/internal/dom.ts": [
            "function: element\nfunction: svg_element\nfunction: claim_element\nclass: HtmlTag\nvariable: $$slots\nvariable: $$scope"
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "src/compiler/compile/render_dom/wrappers/Slot.ts": [
                    "function: SlotWrapper.render\nline: 114"
                ],
                "src/runtime/internal/dom.ts": [
                    "function: element\nline: 19\nfunction: claim_element\nline: 148"
                ],
                "src/compiler/compile/render_dom/wrappers/InlineComponent/index.ts": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/runtime/internal/dom.ts b/src/runtime/internal/dom.ts\nindex 25c804f..a7ae734 100644\n--- a/src/runtime/internal/dom.ts\n+++ b/src/runtime/internal/dom.ts\n@@ -16,7 +16,62 @@ export function destroy_each(iterations, detaching) {\n \t}\n }\n \n+const SVG_ELEMENT_TAGS = new Set([\n+\t'svg',\n+\t'g',\n+\t'rect',\n+\t'circle',\n+\t'ellipse',\n+\t'line',\n+\t'polyline',\n+\t'polygon',\n+\t'path',\n+\t'text',\n+\t'tspan',\n+\t'textPath',\n+\t'foreignObject',\n+\t'defs',\n+\t'use',\n+\t'symbol',\n+\t'marker',\n+\t'pattern',\n+\t'mask',\n+\t'clipPath',\n+\t'linearGradient',\n+\t'radialGradient',\n+\t'stop',\n+\t'image',\n+\t'filter',\n+\t'feBlend',\n+\t'feColorMatrix',\n+\t'feComponentTransfer',\n+\t'feComposite',\n+\t'feConvolveMatrix',\n+\t'feDiffuseLighting',\n+\t'feDisplacementMap',\n+\t'feFlood',\n+\t'feGaussianBlur',\n+\t'feImage',\n+\t'feMerge',\n+\t'feMorphology',\n+\t'feOffset',\n+\t'feSpecularLighting',\n+\t'feTile',\n+\t'feTurbulence',\n+\t'feDistantLight',\n+\t'fePointLight',\n+\t'feSpotLight'\n+]);\n+\n export function element<K extends keyof HTMLElementTagNameMap>(name: K) {\n+\t// If an element is one of the known SVG-only tags, create it in the SVG namespace.\n+\t// This allows slotted SVG children (e.g., <rect/>) passed from a parent HTML context\n+\t// to render correctly inside an <svg> in the child component.\n+\t// Note: Intentionally exclude tags that exist in both HTML and SVG (e.g., 'a', 'title', 'style', 'script').\n+\tif (SVG_ELEMENT_TAGS.has(String(name))) {\n+\t\t// @ts-ignore - the returned element will be an SVGElement\n+\t\treturn svg_element(String(name));\n+\t}\n \treturn document.createElement<K>(name);\n }\n \n",
                "diff --git a/src/compiler/compile/render_dom/wrappers/Slot.ts b/src/compiler/compile/render_dom/wrappers/Slot.ts\nindex 493501a..cd833f8 100644\n--- a/src/compiler/compile/render_dom/wrappers/Slot.ts\n+++ b/src/compiler/compile/render_dom/wrappers/Slot.ts\n@@ -110,7 +110,7 @@ export default class SlotWrapper extends Wrapper {\n \n \t\tblock.builders.init.add_block(deindent`\n \t\t\tconst ${slot_definition} = ctx.$$slots${quote_prop_if_necessary(slot_name)};\n-\t\t\tconst ${slot} = @create_slot(${slot_definition}, ctx, ${get_slot_context});\n+\t\t\tconst ${slot} = @create_slot(${slot_definition}, ctx, ${get_slot_context}, ${this.parent && (this.parent as any).is_svg ? 'true' : 'false'});\n \t\t`);\n \n \t\tconst mount_before = block.builders.mount.toString();\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "src/compiler/compile/render_dom/wrappers/Slot.ts": [
                    "line: 113"
                ],
                "src/compiler/compile/render_dom/wrappers/InlineComponent/index.ts": [
                    ""
                ],
                "src/runtime/internal/dom.ts": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/src/runtime/internal/dom.ts b/src/runtime/internal/dom.ts\nindex 25c804f..a5a5d08 100644\n--- a/src/runtime/internal/dom.ts\n+++ b/src/runtime/internal/dom.ts\n@@ -16,7 +16,25 @@ export function destroy_each(iterations, detaching) {\n \t}\n }\n \n+const SVG_NS = 'http://www.w3.org/2000/svg';\n+const SVG_TAG_NAMES = new Set([\n+\t'svg', 'animate', 'animateMotion', 'animateTransform', 'circle', 'clipPath', 'defs', 'desc', 'ellipse',\n+\t'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting',\n+\t'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR',\n+\t'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight',\n+\t'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter', 'foreignObject', 'g', 'image',\n+\t'line', 'linearGradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline',\n+\t'radialGradient', 'rect', 'stop', 'switch', 'symbol', 'text', 'textPath', 'tspan', 'use', 'view'\n+]);\n+\n export function element<K extends keyof HTMLElementTagNameMap>(name: K) {\n+\t// Ensure SVG-only tag names are created with the SVG namespace.\n+\t// This allows elements passed into slots rendered under <svg> to be correctly created as SVG elements.\n+\t// @ts-ignore\n+\tif (SVG_TAG_NAMES.has(String(name))) {\n+\t\t// @ts-ignore\n+\t\treturn document.createElementNS(SVG_NS, name);\n+\t}\n \treturn document.createElement<K>(name);\n }\n \n",
                "diff --git a/src/compiler/compile/render_dom/wrappers/Slot.ts b/src/compiler/compile/render_dom/wrappers/Slot.ts\nindex 493501a..dee5b2e 100644\n--- a/src/compiler/compile/render_dom/wrappers/Slot.ts\n+++ b/src/compiler/compile/render_dom/wrappers/Slot.ts\n@@ -110,7 +110,7 @@ export default class SlotWrapper extends Wrapper {\n \n \t\tblock.builders.init.add_block(deindent`\n \t\t\tconst ${slot_definition} = ctx.$$slots${quote_prop_if_necessary(slot_name)};\n-\t\t\tconst ${slot} = @create_slot(${slot_definition}, ctx, ${get_slot_context});\n+\t\t\tconst ${slot} = @create_slot(${slot_definition}, ctx, ${get_slot_context}, ${this.parent && this.parent.node && this.parent.node.is_svg ? 'true' : 'false'});\n \t\t`);\n \n \t\tconst mount_before = block.builders.mount.toString();\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/src/runtime/internal/dom.ts b/src/runtime/internal/dom.ts\nindex 25c804f..a7ae734 100644\n--- a/src/runtime/internal/dom.ts\n+++ b/src/runtime/internal/dom.ts\n@@ -16,7 +16,62 @@ export function destroy_each(iterations, detaching) {\n \t}\n }\n \n+const SVG_ELEMENT_TAGS = new Set([\n+\t'svg',\n+\t'g',\n+\t'rect',\n+\t'circle',\n+\t'ellipse',\n+\t'line',\n+\t'polyline',\n+\t'polygon',\n+\t'path',\n+\t'text',\n+\t'tspan',\n+\t'textPath',\n+\t'foreignObject',\n+\t'defs',\n+\t'use',\n+\t'symbol',\n+\t'marker',\n+\t'pattern',\n+\t'mask',\n+\t'clipPath',\n+\t'linearGradient',\n+\t'radialGradient',\n+\t'stop',\n+\t'image',\n+\t'filter',\n+\t'feBlend',\n+\t'feColorMatrix',\n+\t'feComponentTransfer',\n+\t'feComposite',\n+\t'feConvolveMatrix',\n+\t'feDiffuseLighting',\n+\t'feDisplacementMap',\n+\t'feFlood',\n+\t'feGaussianBlur',\n+\t'feImage',\n+\t'feMerge',\n+\t'feMorphology',\n+\t'feOffset',\n+\t'feSpecularLighting',\n+\t'feTile',\n+\t'feTurbulence',\n+\t'feDistantLight',\n+\t'fePointLight',\n+\t'feSpotLight'\n+]);\n+\n export function element<K extends keyof HTMLElementTagNameMap>(name: K) {\n+\t// If an element is one of the known SVG-only tags, create it in the SVG namespace.\n+\t// This allows slotted SVG children (e.g., <rect/>) passed from a parent HTML context\n+\t// to render correctly inside an <svg> in the child component.\n+\t// Note: Intentionally exclude tags that exist in both HTML and SVG (e.g., 'a', 'title', 'style', 'script').\n+\tif (SVG_ELEMENT_TAGS.has(String(name))) {\n+\t\t// @ts-ignore - the returned element will be an SVGElement\n+\t\treturn svg_element(String(name));\n+\t}\n \treturn document.createElement<K>(name);\n }\n \n"
}