{
  "instance_id": "SWE-Bench-Verified__python__maintenance__bugfix__96afaad2",
  "original_id": "django__django-14089",
  "1_model_selected_files": [
    "django/utils/datastructures.py"
  ],
  "2_embedding_selected_files": [
    "django/utils/topological_sort.py",
    "django/utils/datastructures.py",
    "django/utils/deprecation.py",
    "django/utils/functional.py",
    "django/utils/regex_helper.py",
    "django/utils/asyncio.py",
    "django/utils/tree.py",
    "django/utils/translation/trans_real.py",
    "django/utils/timezone.py",
    "django/utils/autoreload.py",
    "django/shortcuts.py",
    "django/setup.py",
    "django/utils/translation/__init__.py",
    "django/utils/xmlutils.py",
    "django/utils/inspect.py",
    "django/utils/deconstruct.py",
    "django/utils/hashable.py",
    "django/utils/itercompat.py",
    "django/utils/decorators.py",
    "django/utils/archive.py",
    "django/utils/_os.py",
    "django/utils/translation/trans_null.py",
    "django/utils/cache.py",
    "django/utils/timesince.py",
    "django/utils/safestring.py",
    "django/utils/version.py",
    "django/utils/html.py",
    "django/utils/log.py",
    "django/utils/connection.py",
    "django/utils/dateformat.py",
    "django/utils/baseconv.py",
    "django/utils/encoding.py",
    "django/__init__.py",
    "django/utils/text.py",
    "django/utils/ipv6.py",
    "django/utils/feedgenerator.py",
    "django/utils/__init__.py",
    "django/utils/http.py",
    "django/utils/duration.py",
    "django/utils/translation/reloader.py",
    "django/utils/datetime_safe.py",
    "django/__main__.py",
    "django/utils/jslex.py",
    "django/utils/dates.py",
    "django/utils/crypto.py",
    "django/utils/translation/template.py",
    "django/utils/lorem_ipsum.py",
    "django/utils/module_loading.py",
    "django/utils/dateparse.py",
    "django/utils/formats.py",
    "django/utils/termcolors.py",
    "django/utils/numberformat.py"
  ],
  "3_final_combined_files": [
    "django/utils/datastructures.py",
    "django/utils/topological_sort.py",
    "django/utils/deprecation.py"
  ],
  "4_related_elements": {
    "django/utils/datastructures.py": [
      "class: OrderedSet"
    ],
    "django/utils/topological_sort.py": [
      ""
    ],
    "django/utils/deprecation.py": [
      ""
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "django/utils/datastructures.py": [
          "\nclass: OrderedSet\nfunction: OrderedSet.__reversed__"
        ]
      },
      "patches": [
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..0042407 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(self.dict)\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..100578b 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,9 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..9034a19 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,10 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        # Support reversed() by returning items in reverse insertion order.\n+        # Convert keys to a list to ensure reversibility across Python versions.\n+        return reversed(list(self.dict))\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..ec6ea80 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..100578b 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,9 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..93b4e4d 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,10 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        # Iterate over the items in reverse insertion order.\n+        return reversed(self.dict)\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..b285efe 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,11 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over the items in reverse insertion order.\n+        # Convert keys to a list to support reversed() across Python versions.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..61ab3dc 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,10 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Iterate over items in reverse insertion order.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..6c7a927 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,9 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(self.dict)\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..ec6ea80 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n"
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "django/utils/datastructures.py": [
          "\nclass: OrderedSet\nfunction: OrderedSet.__reversed__"
        ]
      },
      "patches": [
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..6f8de4f 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,10 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over items in reverse insertion order.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..ec6ea80 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..ec6ea80 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..0042407 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(self.dict)\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..ec6ea80 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..100578b 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,9 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..100578b 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,9 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..ec6ea80 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..cb6da23 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,10 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over the items in reverse insertion order.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..e362b0b 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,11 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over the items in reverse insertion order.\n+        # Use a list to avoid relying on dict.__reversed__ availability.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n"
      ]
    },
    {
      "sample_index": 2,
      "edit_locs": {
        "django/utils/datastructures.py": [
          "\nclass: OrderedSet\nfunction: OrderedSet.__reversed__"
        ]
      },
      "patches": [
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..db56947 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,11 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        # Support reversed(OrderedSet) by returning an iterator over the\n+        # items in reverse insertion order.\n+        return reversed(list(self.dict))\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..ec6ea80 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..cb6da23 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,10 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over the items in reverse insertion order.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..100578b 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,9 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..ec6ea80 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..81a4d88 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,10 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        # Return iterator yielding items in reverse insertion order.\n+        return reversed(list(self.dict))\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..44320ca 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,11 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over the items in reverse insertion order.\n+        # Use list() to support environments where dict isn't reversible.\n+        return reversed(list(self.dict))\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..cb6da23 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,10 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over the items in reverse insertion order.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..1631498 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,12 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over the items in reverse insertion order.\n+        # Use list(...) for compatibility with Python versions where dict\n+        # isn't directly reversible.\n+        return reversed(list(self.dict))\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..da1bac9 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,10 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Iterate over items in reverse insertion order.\n+        return reversed(self.dict)\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n"
      ]
    },
    {
      "sample_index": 3,
      "edit_locs": {
        "django/utils/datastructures.py": [
          "\nclass: OrderedSet\nfunction: OrderedSet.__reversed__"
        ]
      },
      "patches": [
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..150a873 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,11 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over the items in reverse insertion order.\n+        # Build a list of keys to ensure reversibility across Python versions.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..ec6ea80 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..0042407 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(self.dict)\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..64a21f5 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -34,6 +35,12 @@ class OrderedSet:\n     def __len__(self):\n         return len(self.dict)\n \n+    def __reversed__(self):\n+        \"\"\"\n+        Return an iterator that yields items in reverse insertion order.\n+        \"\"\"\n+        return reversed(list(self.dict))\n+\n \n class MultiValueDictKeyError(KeyError):\n     pass\n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..ec6ea80 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..9ab6134 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,11 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Support reversed() by returning items in reverse insertion order.\n+        # dict itself isn't reversible, so iterate over a snapshot of its keys.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..2ea6847 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,11 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over the items in reverse insertion order.\n+        # Using list() ensures compatibility across Python versions.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..2664d6b 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,11 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over the items in reverse insertion order.\n+        # Use list() for compatibility across Python versions.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..dcc7521 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,12 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator that yields items in reverse insertion order.\n+        # Use a list to ensure compatibility across Python versions where\n+        # dict views might not implement __reversed__.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
        "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..cb6da23 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,10 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        # Return an iterator over the items in reverse insertion order.\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n"
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/django/utils/datastructures.py b/django/utils/datastructures.py\nindex d3f62c3..ec6ea80 100644\n--- a/django/utils/datastructures.py\n+++ b/django/utils/datastructures.py\n@@ -1,3 +1,4 @@\n+\n import copy\n from collections.abc import Mapping\n \n@@ -25,6 +26,9 @@ class OrderedSet:\n     def __iter__(self):\n         return iter(self.dict)\n \n+    def __reversed__(self):\n+        return reversed(list(self.dict))\n+\n     def __contains__(self, item):\n         return item in self.dict\n \n",
  "7_resolved": true
}