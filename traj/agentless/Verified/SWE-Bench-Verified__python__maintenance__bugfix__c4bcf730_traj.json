{
  "instance_id": "SWE-Bench-Verified__python__maintenance__bugfix__c4bcf730",
  "original_id": "sympy__sympy-15976",
  "1_model_selected_files": [
    "sympy/printing/mathml.py",
    "sympy/printing/conventions.py",
    "sympy/core/symbol.py"
  ],
  "2_embedding_selected_files": [
    "sympy/printing/mathml.py",
    "sympy/printing/julia.py",
    "sympy/printing/pretty/pretty.py",
    "sympy/printing/codeprinter.py",
    "sympy/printing/gtk.py",
    "sympy/printing/latex.py",
    "sympy/printing/printer.py",
    "sympy/printing/mathematica.py",
    "sympy/printing/octave.py",
    "sympy/printing/str.py",
    "sympy/printing/glsl.py",
    "sympy/printing/pycode.py",
    "sympy/printing/ccode.py",
    "sympy/printing/pretty/pretty_symbology.py",
    "sympy/printing/fcode.py",
    "sympy/printing/preview.py",
    "sympy/this.py",
    "sympy/utilities/mathml/__init__.py",
    "sympy/printing/repr.py",
    "sympy/printing/rust.py",
    "sympy/printing/conventions.py",
    "sympy/printing/jscode.py",
    "sympy/printing/rcode.py",
    "sympy/printing/__init__.py",
    "sympy/isympy.py",
    "sympy/printing/cxxcode.py",
    "sympy/__init__.py",
    "sympy/printing/tree.py",
    "sympy/printing/pretty/__init__.py",
    "sympy/printing/theanocode.py",
    "sympy/utilities/lambdify.py",
    "sympy/printing/pretty/stringpict.py",
    "sympy/utilities/iterables.py",
    "sympy/printing/tensorflow.py",
    "sympy/printing/lambdarepr.py",
    "sympy/printing/python.py",
    "sympy/printing/dot.py",
    "sympy/printing/llvmjitcode.py",
    "sympy/printing/tableform.py"
  ],
  "3_final_combined_files": [
    "sympy/printing/mathml.py",
    "sympy/printing/conventions.py",
    "sympy/core/symbol.py",
    "sympy/printing/julia.py",
    "sympy/printing/pretty/pretty.py"
  ],
  "4_related_elements": {
    "sympy/printing/mathml.py": [
      "class: MathMLPresentationPrinter\nclass: MathMLContentPrinter\nfunction: mathml\nfunction: print_mathml"
    ],
    "sympy/printing/conventions.py": [
      "variable: _name_with_digits_p\nfunction: split_super_sub"
    ],
    "sympy/core/symbol.py": [
      "class: Symbol\nfunction: symbols"
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "sympy/printing/mathml.py": [
          "\nfunction: MathMLPresentationPrinter._print_Symbol\nline: 752\nline: 753\nline: 754\nline: 755\nline: 756\nline: 757\nline: 758\nline: 759\nline: 760\nline: 761\nline: 762\nline: 763\nline: 764\nline: 765\nline: 766\nfunction: MathMLContentPrinter._print_Symbol\nline: 339\nline: 340\nline: 341\nline: 342\nline: 343\nline: 344\nline: 345\nline: 346\nline: 347\nline: 348\nline: 349\nline: 350\nline: 351\nline: 352\nline: 353"
        ]
      },
      "patches": [
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..335d54f 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -343,14 +343,17 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    # Use <mn> for numeric subscripts/superscripts to ensure proper rendering\n+                    token_tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                    token = self.dom.createElement(token_tag)\n+                    token.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(token)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                token_tag = 'mml:mn' if items[0].isdigit() else 'mml:mi'\n+                token = self.dom.createElement(token_tag)\n+                token.appendChild(self.dom.createTextNode(items[0]))\n+                return token\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -756,14 +759,17 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    # Use <mn> for numeric subscripts/superscripts to ensure proper rendering\n+                    token_tag = 'mn' if item.isdigit() else 'mi'\n+                    token = self.dom.createElement(token_tag)\n+                    token.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(token)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                token_tag = 'mn' if items[0].isdigit() else 'mi'\n+                token = self.dom.createElement(token_tag)\n+                token.appendChild(self.dom.createTextNode(items[0]))\n+                return token\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..9f7ba3c 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -343,14 +343,17 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                    node = self.dom.createElement(tag)\n+                    node.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(node)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(item))\n+                return node\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -756,14 +759,17 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mn' if item.isdigit() else 'mi'\n+                    node = self.dom.createElement(tag)\n+                    node.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(node)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                tag = 'mn' if item.isdigit() else 'mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(item))\n+                return node\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..599508d 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -336,6 +336,13 @@ class MathMLContentPrinter(MathMLPrinterBase):\n         ci = self.dom.createElement(self.mathml_tag(sym))\n \n         def join(items):\n+            def token_node(val):\n+                # Use <mn> for numeric tokens for better browser compatibility (e.g., Safari)\n+                tag = 'mml:mn' if isinstance(val, str) and val.isdigit() else 'mml:mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(val))\n+                return node\n+\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mml:mrow')\n                 for i, item in enumerate(items):\n@@ -343,14 +350,10 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(token_node(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return token_node(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -749,6 +752,13 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n             x.setAttribute('mathvariant', 'bold')\n \n         def join(items):\n+            def token_node(val):\n+                # Use <mn> for numeric tokens for better browser compatibility (e.g., Safari)\n+                tag = 'mn' if isinstance(val, str) and val.isdigit() else 'mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(val))\n+                return node\n+\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n                 for i, item in enumerate(items):\n@@ -756,14 +766,10 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(token_node(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return token_node(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..d9aee0d 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -336,6 +336,15 @@ class MathMLContentPrinter(MathMLPrinterBase):\n         ci = self.dom.createElement(self.mathml_tag(sym))\n \n         def join(items):\n+            def token_element(token):\n+                # Use <mn> for purely numeric tokens, otherwise <mi>\n+                if token.isdigit():\n+                    el = self.dom.createElement('mml:mn')\n+                else:\n+                    el = self.dom.createElement('mml:mi')\n+                el.appendChild(self.dom.createTextNode(token))\n+                return el\n+\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mml:mrow')\n                 for i, item in enumerate(items):\n@@ -343,14 +352,10 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(token_element(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return token_element(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -749,6 +754,15 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n             x.setAttribute('mathvariant', 'bold')\n \n         def join(items):\n+            def token_element(token):\n+                # Use <mn> for purely numeric tokens, otherwise <mi>\n+                if token.isdigit():\n+                    el = self.dom.createElement('mn')\n+                else:\n+                    el = self.dom.createElement('mi')\n+                el.appendChild(self.dom.createTextNode(token))\n+                return el\n+\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n                 for i, item in enumerate(items):\n@@ -756,14 +770,10 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(token_element(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return token_element(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..7f41515 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,9 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Build Presentation MathML for a Symbol. Do not wrap scripted forms\n+        # (msub/msup/msubsup) inside an extra <mi>, as that is invalid and\n+        # causes rendering issues in some browsers.\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -777,29 +775,36 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        # Base identifier\n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n+\n+        # No scripts: return the base identifier directly\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+\n+        # Subscript only\n         if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n-        else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+\n+        # Superscript only\n+        if len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n+\n+        # Both sub- and superscripts\n+        msubsup = self.dom.createElement('msubsup')\n+        msubsup.appendChild(mname)\n+        msubsup.appendChild(join(subs))\n+        msubsup.appendChild(join(supers))\n+        return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..80e9f7c 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -343,14 +343,16 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                    node = self.dom.createElement(tag)\n+                    node.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(node)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                tag = 'mml:mn' if items[0].isdigit() else 'mml:mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(items[0]))\n+                return node\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -756,14 +758,16 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mn' if item.isdigit() else 'mi'\n+                    node = self.dom.createElement(tag)\n+                    node.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(node)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                tag = 'mn' if items[0].isdigit() else 'mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(items[0]))\n+                return node\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..4577a31 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,6 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -777,29 +772,31 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        # base identifier\n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+\n+        # Build appropriate structure without wrapping token elements around layouts\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..c0f7a04 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -343,14 +343,17 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                    mi_mn = self.dom.createElement(tag)\n+                    mi_mn.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(mi_mn)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                mi_mn = self.dom.createElement(tag)\n+                mi_mn.appendChild(self.dom.createTextNode(item))\n+                return mi_mn\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -756,14 +759,17 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mn' if item.isdigit() else 'mi'\n+                    mi_mn = self.dom.createElement(tag)\n+                    mi_mn.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(mi_mn)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                tag = 'mn' if item.isdigit() else 'mi'\n+                mi_mn = self.dom.createElement(tag)\n+                mi_mn.appendChild(self.dom.createTextNode(item))\n+                return mi_mn\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..95a08ad 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,8 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Build a proper presentation MathML node for symbols.\n+        # Do not wrap msub/msup/msubsup inside an <mi>; return them directly.\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -779,27 +776,27 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n \n         mname = self.dom.createElement('mi')\n         mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n+\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..f50aee2 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -343,14 +343,22 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    # Use <mn> for purely numeric items in subs/sups\n+                    if item.isdigit():\n+                        tok = self.dom.createElement('mml:mn')\n+                    else:\n+                        tok = self.dom.createElement('mml:mi')\n+                    tok.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(tok)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                if item.isdigit():\n+                    tok = self.dom.createElement('mml:mn')\n+                else:\n+                    tok = self.dom.createElement('mml:mi')\n+                tok.appendChild(self.dom.createTextNode(item))\n+                return tok\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -756,14 +764,22 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    # Use <mn> for purely numeric items to ensure visibility in browsers\n+                    if item.isdigit():\n+                        tok = self.dom.createElement('mn')\n+                    else:\n+                        tok = self.dom.createElement('mi')\n+                    tok.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(tok)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                if item.isdigit():\n+                    tok = self.dom.createElement('mn')\n+                else:\n+                    tok = self.dom.createElement('mi')\n+                tok.appendChild(self.dom.createTextNode(item))\n+                return tok\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -777,10 +793,19 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        has_alpha = any(ch.isalpha() for ch in name)\n+        has_digit = any(ch.isdigit() for ch in name)\n+\n         mname = self.dom.createElement('mi')\n+        # For mixed alphanumeric identifiers like \"x2\", explicitly use upright variant\n+        # so that digits are rendered in browsers (e.g., Safari) that lack italic digits.\n+        if has_alpha and has_digit and style != 'bold':\n+            mname.setAttribute('mathvariant', 'normal')\n         mname.appendChild(self.dom.createTextNode(name))\n         if len(supers) == 0:\n             if len(subs) == 0:\n+                if has_alpha and has_digit and style != 'bold':\n+                    x.setAttribute('mathvariant', 'normal')\n                 x.appendChild(self.dom.createTextNode(name))\n             else:\n                 msub = self.dom.createElement('msub')\n"
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "sympy/printing/mathml.py": [
          "\nfunction: MathMLPresentationPrinter._print_Symbol\nline: 759\nline: 765\nfunction: MathMLContentPrinter._print_Symbol\nline: 347\nline: 351"
        ]
      },
      "patches": [
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..e29b380 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,12 +743,14 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n+            def token_element(text):\n+                # Use <mn> for purely numeric tokens, otherwise <mi>\n+                tag = 'mn' if text.isdigit() else 'mi'\n+                el = self.dom.createElement(tag)\n+                el.appendChild(self.dom.createTextNode(text))\n+                return el\n+\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n                 for i, item in enumerate(items):\n@@ -756,14 +758,10 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(token_element(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return token_element(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -777,29 +775,31 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        # Base identifier\n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+\n+        # Build appropriate structure without wrapping ms* inside an <mi>\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..e85c982 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -336,6 +336,11 @@ class MathMLContentPrinter(MathMLPrinterBase):\n         ci = self.dom.createElement(self.mathml_tag(sym))\n \n         def join(items):\n+            def token_node(text):\n+                tag = 'mml:mn' if text.isdigit() else 'mml:mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(text))\n+                return node\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mml:mrow')\n                 for i, item in enumerate(items):\n@@ -343,14 +348,10 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(token_node(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return token_node(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -749,6 +750,11 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n             x.setAttribute('mathvariant', 'bold')\n \n         def join(items):\n+            def token_node(text):\n+                tag = 'mn' if text.isdigit() else 'mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(text))\n+                return node\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n                 for i, item in enumerate(items):\n@@ -756,14 +762,10 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(token_node(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return token_node(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..724d662 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,8 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Build a proper Presentation MathML element for symbols, possibly with\n+        # subscripts/superscripts. Avoid wrapping <msub>/<msup>/<msubsup> inside <mi>.\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -756,12 +753,14 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n+                    token_tag = 'mn' if item.isdigit() else 'mi'\n+                    mi = self.dom.createElement(token_tag)\n                     mi.appendChild(self.dom.createTextNode(item))\n                     mrow.appendChild(mi)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n+                token_tag = 'mn' if items[0].isdigit() else 'mi'\n+                mi = self.dom.createElement(token_tag)\n                 mi.appendChild(self.dom.createTextNode(items[0]))\n                 return mi\n \n@@ -777,29 +776,33 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        # Create the base <mi> token and apply styling to it if needed\n         mname = self.dom.createElement('mi')\n         mname.appendChild(self.dom.createTextNode(name))\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n+\n+        # No scripts: return the token directly\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        # Subscript only\n         if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n-        else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        # Superscript only\n+        if len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n+        # Both subscript and superscript\n+        msubsup = self.dom.createElement('msubsup')\n+        msubsup.appendChild(mname)\n+        msubsup.appendChild(join(subs))\n+        msubsup.appendChild(join(supers))\n+        return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..a20a3da 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -343,13 +343,16 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n+                    tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                    mi = self.dom.createElement(tag)\n                     mi.appendChild(self.dom.createTextNode(item))\n                     mrow.appendChild(mi)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n+                item = items[0]\n+                tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                mi = self.dom.createElement(tag)\n+                mi.appendChild(self.dom.createTextNode(item))\n                 return mi\n \n         # translate name, supers and subs to unicode characters\n@@ -756,13 +759,16 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n+                    tag = 'mn' if item.isdigit() else 'mi'\n+                    mi = self.dom.createElement(tag)\n                     mi.appendChild(self.dom.createTextNode(item))\n                     mrow.appendChild(mi)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n+                item = items[0]\n+                tag = 'mn' if item.isdigit() else 'mi'\n+                mi = self.dom.createElement(tag)\n+                mi.appendChild(self.dom.createTextNode(item))\n                 return mi\n \n         # translate name, supers and subs to unicode characters\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..f18d0c1 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -343,14 +343,17 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                    el = self.dom.createElement(tag)\n+                    el.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(el)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                el = self.dom.createElement(tag)\n+                el.appendChild(self.dom.createTextNode(item))\n+                return el\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -756,14 +759,17 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mn' if item.isdigit() else 'mi'\n+                    el = self.dom.createElement(tag)\n+                    el.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(el)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                tag = 'mn' if item.isdigit() else 'mi'\n+                el = self.dom.createElement(tag)\n+                el.appendChild(self.dom.createTextNode(item))\n+                return el\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..b5f0bc9 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,6 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -778,28 +773,28 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         subs = [translate(sub) for sub in subs]\n \n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..f6cc992 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,7 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Build an <mi> for the base name and wrap with msub/msup/msubsup if needed.\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -756,14 +752,16 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mn' if item.isdigit() else 'mi'\n+                    el = self.dom.createElement(tag)\n+                    el.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(el)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                tag = 'mn' if items[0].isdigit() else 'mi'\n+                el = self.dom.createElement(tag)\n+                el.appendChild(self.dom.createTextNode(items[0]))\n+                return el\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -772,34 +770,38 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n             else:\n                 return s\n \n+        # helper to create the base <mi>, applying style if needed\n+        def make_mi(text):\n+            mi = self.dom.createElement('mi')\n+            if style == 'bold':\n+                mi.setAttribute('mathvariant', 'bold')\n+            mi.appendChild(self.dom.createTextNode(text))\n+            return mi\n+\n         name, supers, subs = split_super_sub(sym.name)\n         name = translate(name)\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n-        mname = self.dom.createElement('mi')\n-        mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+        mname = make_mi(name)\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..69ce7e7 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,6 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -779,27 +774,29 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n \n         mname = self.dom.createElement('mi')\n         mname.appendChild(self.dom.createTextNode(name))\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n+\n         if len(supers) == 0:\n             if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n+                return mname\n             else:\n                 msub = self.dom.createElement('msub')\n                 msub.appendChild(mname)\n                 msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+                return msub\n         else:\n             if len(subs) == 0:\n                 msup = self.dom.createElement('msup')\n                 msup.appendChild(mname)\n                 msup.appendChild(join(supers))\n-                x.appendChild(msup)\n+                return msup\n             else:\n                 msubsup = self.dom.createElement('msubsup')\n                 msubsup.appendChild(mname)\n                 msubsup.appendChild(join(subs))\n                 msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+                return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..dcd7c20 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,7 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Build a presentation MathML identifier with optional sub/superscripts.\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -756,14 +752,17 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mn' if item.isdigit() else 'mi'\n+                    node = self.dom.createElement(tag)\n+                    node.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(node)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                tag = 'mn' if item.isdigit() else 'mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(item))\n+                return node\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -778,28 +777,31 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         subs = [translate(sub) for sub in subs]\n \n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n+\n         if len(supers) == 0:\n             if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n+                # simple identifier\n+                return mname\n             else:\n                 msub = self.dom.createElement('msub')\n                 msub.appendChild(mname)\n                 msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+                return msub\n         else:\n             if len(subs) == 0:\n                 msup = self.dom.createElement('msup')\n                 msup.appendChild(mname)\n                 msup.appendChild(join(supers))\n-                x.appendChild(msup)\n+                return msup\n             else:\n                 msubsup = self.dom.createElement('msubsup')\n                 msubsup.appendChild(mname)\n                 msubsup.appendChild(join(subs))\n                 msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+                return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..fd724cc 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,9 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Build a presentation MathML token or scripted element for a Symbol.\n+        # Do not wrap <msub>/<msup>/<msubsup> inside an <mi>, since that results\n+        # in invalid MathML and can cause renderers to hide the symbol.\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -756,14 +754,14 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    token = self.dom.createElement('mn' if item.isdigit() else 'mi')\n+                    token.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(token)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                token = self.dom.createElement('mn' if items[0].isdigit() else 'mi')\n+                token.appendChild(self.dom.createTextNode(items[0]))\n+                return token\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -777,29 +775,32 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        # Base identifier\n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n+\n+        # No superscripts/subscripts: return the identifier token directly\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+\n         if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n"
      ]
    },
    {
      "sample_index": 2,
      "edit_locs": {
        "sympy/printing/mathml.py": [
          "\nfunction: MathMLPresentationPrinter._print_Symbol\nfunction: MathMLContentPrinter._print_Symbol"
        ]
      },
      "patches": [
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..10cd719 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,6 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -756,14 +751,17 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    token_tag = 'mn' if item.isdigit() else 'mi'\n+                    token = self.dom.createElement(token_tag)\n+                    token.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(token)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                token_tag = 'mn' if item.isdigit() else 'mi'\n+                token = self.dom.createElement(token_tag)\n+                token.appendChild(self.dom.createTextNode(item))\n+                return token\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -777,29 +775,30 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        # base identifier\n         mname = self.dom.createElement('mi')\n         mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n+\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..b757413 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,8 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Build an <mi> for the symbol name and return it directly,\n+        # or wrap it in <msub>/<msup>/<msubsup> as appropriate.\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -778,28 +775,28 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         subs = [translate(sub) for sub in subs]\n \n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..bebcd81 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,9 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Return a valid presentation MathML node directly (mi, msub, msup, or msubsup).\n+        # Wrapping layout elements like <msub> inside an <mi> is invalid MathML and can\n+        # cause rendering issues in some browsers (e.g., Safari hiding symbols like x2).\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -779,27 +777,29 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n \n         mname = self.dom.createElement('mi')\n         mname.appendChild(self.dom.createTextNode(name))\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n+\n         if len(supers) == 0:\n             if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n+                return mname\n             else:\n                 msub = self.dom.createElement('msub')\n                 msub.appendChild(mname)\n                 msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+                return msub\n         else:\n             if len(subs) == 0:\n                 msup = self.dom.createElement('msup')\n                 msup.appendChild(mname)\n                 msup.appendChild(join(supers))\n-                x.appendChild(msup)\n+                return msup\n             else:\n                 msubsup = self.dom.createElement('msubsup')\n                 msubsup.appendChild(mname)\n                 msubsup.appendChild(join(subs))\n                 msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+                return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..b54cfd9 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,6 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -778,28 +773,30 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         subs = [translate(sub) for sub in subs]\n \n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n+\n         if len(supers) == 0:\n             if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n+                return mname\n             else:\n                 msub = self.dom.createElement('msub')\n                 msub.appendChild(mname)\n                 msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+                return msub\n         else:\n             if len(subs) == 0:\n                 msup = self.dom.createElement('msup')\n                 msup.appendChild(mname)\n                 msup.appendChild(join(supers))\n-                x.appendChild(msup)\n+                return msup\n             else:\n                 msubsup = self.dom.createElement('msubsup')\n                 msubsup.appendChild(mname)\n                 msubsup.appendChild(join(subs))\n                 msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+                return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..afc2fce 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,7 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Build either a simple <mi> or a scripted element (<msub>, <msup>, <msubsup>)\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -777,29 +773,33 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        # base identifier\n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n+\n+        # No scripts -> return the <mi> directly\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+\n+        # Build scripted structure and return it\n         if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..ac795ff 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -336,6 +336,14 @@ class MathMLContentPrinter(MathMLPrinterBase):\n         ci = self.dom.createElement(self.mathml_tag(sym))\n \n         def join(items):\n+            def make_token(text):\n+                # Use <mn> for purely numeric strings to avoid italic digits,\n+                # which some renderers (e.g., Safari) may not display.\n+                tag = 'mml:mn' if text.isdigit() else 'mml:mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(text))\n+                return node\n+\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mml:mrow')\n                 for i, item in enumerate(items):\n@@ -343,14 +351,10 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(make_token(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return make_token(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -749,6 +753,14 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n             x.setAttribute('mathvariant', 'bold')\n \n         def join(items):\n+            def make_token(text):\n+                # Use <mn> for purely numeric strings to avoid italic digits,\n+                # which some renderers (e.g., Safari) may not display.\n+                tag = 'mn' if text.isdigit() else 'mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(text))\n+                return node\n+\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n                 for i, item in enumerate(items):\n@@ -756,14 +768,10 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(make_token(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return make_token(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..fe1da4d 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,8 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Build a proper MathML tree: return <mi>, <msub>, <msup>, or <msubsup>\n+        # directly rather than nesting them inside <mi>.\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -756,12 +753,14 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n+                    token = 'mn' if item.isdigit() else 'mi'\n+                    mi = self.dom.createElement(token)\n                     mi.appendChild(self.dom.createTextNode(item))\n                     mrow.appendChild(mi)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n+                token = 'mn' if items[0].isdigit() else 'mi'\n+                mi = self.dom.createElement(token)\n                 mi.appendChild(self.dom.createTextNode(items[0]))\n                 return mi\n \n@@ -778,28 +777,29 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         subs = [translate(sub) for sub in subs]\n \n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+\n+        # Decide which node to return based on presence of supers/subs\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..21795b1 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,10 +743,22 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n+        # Build MathML for a symbol, correctly using msub/msup/msubsup without wrapping in <mi>\n+        def make_identifier(text):\n+            mi = self.dom.createElement('mi')\n+            if style == 'bold':\n+                mi.setAttribute('mathvariant', 'bold')\n+            mi.appendChild(self.dom.createTextNode(text))\n+            return mi\n+\n+        def make_atom(text):\n+            # Use <mn> for purely numeric subscripts/superscripts, otherwise <mi>\n+            if text.isdigit():\n+                node = self.dom.createElement('mn')\n+            else:\n+                node = self.dom.createElement('mi')\n+            node.appendChild(self.dom.createTextNode(text))\n+            return node\n \n         def join(items):\n             if len(items) > 1:\n@@ -756,14 +768,10 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(make_atom(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return make_atom(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -777,29 +785,26 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n-        mname = self.dom.createElement('mi')\n-        mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+        mname = make_identifier(name)\n+\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..69ce7e7 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,6 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -779,27 +774,29 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n \n         mname = self.dom.createElement('mi')\n         mname.appendChild(self.dom.createTextNode(name))\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n+\n         if len(supers) == 0:\n             if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n+                return mname\n             else:\n                 msub = self.dom.createElement('msub')\n                 msub.appendChild(mname)\n                 msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+                return msub\n         else:\n             if len(subs) == 0:\n                 msup = self.dom.createElement('msup')\n                 msup.appendChild(mname)\n                 msup.appendChild(join(supers))\n-                x.appendChild(msup)\n+                return msup\n             else:\n                 msubsup = self.dom.createElement('msubsup')\n                 msubsup.appendChild(mname)\n                 msubsup.appendChild(join(subs))\n                 msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+                return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..cbbc9ba 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,6 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -777,29 +772,62 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n-        mname = self.dom.createElement('mi')\n-        mname.appendChild(self.dom.createTextNode(name))\n+        # Build the base element for the symbol name. If the name contains digits,\n+        # split into letter and digit runs and use <mi> for letters and <mn> for digits.\n+        def make_base(nm):\n+            if not any(ch.isdigit() for ch in nm):\n+                mi = self.dom.createElement('mi')\n+                if style == 'bold':\n+                    mi.setAttribute('mathvariant', 'bold')\n+                mi.appendChild(self.dom.createTextNode(nm))\n+                return mi\n+            mrow = self.dom.createElement('mrow')\n+            seq = ''\n+            seq_is_digit = nm[0].isdigit()\n+            for ch in nm:\n+                if ch.isdigit() == seq_is_digit:\n+                    seq += ch\n+                else:\n+                    tag = 'mn' if seq_is_digit else 'mi'\n+                    node = self.dom.createElement(tag)\n+                    if tag == 'mi' and style == 'bold':\n+                        node.setAttribute('mathvariant', 'bold')\n+                    node.appendChild(self.dom.createTextNode(seq))\n+                    mrow.appendChild(node)\n+                    seq = ch\n+                    seq_is_digit = ch.isdigit()\n+            # flush last run\n+            tag = 'mn' if seq_is_digit else 'mi'\n+            node = self.dom.createElement(tag)\n+            if tag == 'mi' and style == 'bold':\n+                node.setAttribute('mathvariant', 'bold')\n+            node.appendChild(self.dom.createTextNode(seq))\n+            mrow.appendChild(node)\n+            return mrow\n+\n+        base = make_base(name)\n+\n+        # No superscripts or subscripts: return base directly\n+        if len(supers) == 0 and len(subs) == 0:\n+            return base\n+\n+        # Add subscripts/superscripts around the base\n         if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(base)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(base)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(base)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n"
      ]
    },
    {
      "sample_index": 3,
      "edit_locs": {
        "sympy/printing/mathml.py": [
          "\nfunction: MathMLPresentationPrinter._print_Symbol\nline: 759\nline: 764\nfunction: MathMLContentPrinter._print_Symbol\nline: 346\nline: 351"
        ]
      },
      "patches": [
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..f774e7b 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -343,14 +343,18 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    # Use <mn> for purely numeric tokens, <mi> otherwise\n+                    tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                    node = self.dom.createElement(tag)\n+                    node.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(node)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(item))\n+                return node\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -743,11 +747,7 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Build MathML tokens for symbols with optional subscripts/superscripts\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -756,14 +756,17 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mn' if item.isdigit() else 'mi'\n+                    node = self.dom.createElement(tag)\n+                    node.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(node)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                item = items[0]\n+                tag = 'mn' if item.isdigit() else 'mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(item))\n+                return node\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -777,29 +780,31 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        # create the base <mi> for the symbol name\n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+\n+        if len(supers) == 0 and len(subs) == 0:\n+            # simple symbol\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..2365d92 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -343,14 +343,17 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    # Use <mn> for numeric tokens, <mi> otherwise\n+                    token_tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                    token_el = self.dom.createElement(token_tag)\n+                    token_el.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(token_el)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                token_tag = 'mml:mn' if items[0].isdigit() else 'mml:mi'\n+                token_el = self.dom.createElement(token_tag)\n+                token_el.appendChild(self.dom.createTextNode(items[0]))\n+                return token_el\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -756,14 +759,17 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    # Use <mn> for numeric tokens, <mi> otherwise\n+                    token_tag = 'mn' if item.isdigit() else 'mi'\n+                    token_el = self.dom.createElement(token_tag)\n+                    token_el.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(token_el)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                token_tag = 'mn' if items[0].isdigit() else 'mi'\n+                token_el = self.dom.createElement(token_tag)\n+                token_el.appendChild(self.dom.createTextNode(items[0]))\n+                return token_el\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..783215f 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,6 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -777,29 +772,33 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        # base identifier\n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n+\n+        # no decorations: return the base identifier directly\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+\n+        # add sub/sup around the base identifier\n         if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..e85c982 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -336,6 +336,11 @@ class MathMLContentPrinter(MathMLPrinterBase):\n         ci = self.dom.createElement(self.mathml_tag(sym))\n \n         def join(items):\n+            def token_node(text):\n+                tag = 'mml:mn' if text.isdigit() else 'mml:mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(text))\n+                return node\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mml:mrow')\n                 for i, item in enumerate(items):\n@@ -343,14 +348,10 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(token_node(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return token_node(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -749,6 +750,11 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n             x.setAttribute('mathvariant', 'bold')\n \n         def join(items):\n+            def token_node(text):\n+                tag = 'mn' if text.isdigit() else 'mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(text))\n+                return node\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n                 for i, item in enumerate(items):\n@@ -756,14 +762,10 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(token_node(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return token_node(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..e72f6df 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,6 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -778,28 +773,31 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         subs = [translate(sub) for sub in subs]\n \n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n+\n+        # No scripts: return the identifier directly\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+\n+        # Scripts present: return the appropriate scripted element\n         if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..ebbc8ab 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -343,14 +343,16 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mml:mn' if str(item).isdigit() else 'mml:mi'\n+                    node = self.dom.createElement(tag)\n+                    node.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(node)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                tag = 'mml:mn' if str(items[0]).isdigit() else 'mml:mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(items[0]))\n+                return node\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -756,14 +758,16 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    tag = 'mn' if str(item).isdigit() else 'mi'\n+                    node = self.dom.createElement(tag)\n+                    node.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(node)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                tag = 'mn' if str(items[0]).isdigit() else 'mi'\n+                node = self.dom.createElement(tag)\n+                node.appendChild(self.dom.createTextNode(items[0]))\n+                return node\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..e3da1f0 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -343,14 +343,17 @@ class MathMLContentPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mml:mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mml:mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    # Use <mml:mn> for numeric items to avoid italic digits rendering issues\n+                    tag = 'mml:mn' if item.isdigit() else 'mml:mi'\n+                    tok = self.dom.createElement(tag)\n+                    tok.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(tok)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mml:mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                tag = 'mml:mn' if items[0].isdigit() else 'mml:mi'\n+                tok = self.dom.createElement(tag)\n+                tok.appendChild(self.dom.createTextNode(items[0]))\n+                return tok\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -756,14 +759,17 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    # Use <mn> for numeric items to avoid italic digits being invisible in some browsers\n+                    tag = 'mn' if item.isdigit() else 'mi'\n+                    tok = self.dom.createElement(tag)\n+                    tok.appendChild(self.dom.createTextNode(item))\n+                    mrow.appendChild(tok)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                tag = 'mn' if items[0].isdigit() else 'mi'\n+                tok = self.dom.createElement(tag)\n+                tok.appendChild(self.dom.createTextNode(items[0]))\n+                return tok\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..118da65 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,10 +743,17 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n+        # Build MathML for a symbol, correctly handling subscripts/superscripts.\n+        # When subscripts/superscripts are present, return the msub/msup/msubsup\n+        # element directly (not wrapped inside an <mi>), which is required by MathML.\n+        def make_identifier(token):\n+            # Use <mn> for purely numeric tokens, otherwise <mi>\n+            if token.isdigit():\n+                el = self.dom.createElement('mn')\n+            else:\n+                el = self.dom.createElement('mi')\n+            el.appendChild(self.dom.createTextNode(token))\n+            return el\n \n         def join(items):\n             if len(items) > 1:\n@@ -756,14 +763,10 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(make_identifier(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return make_identifier(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -779,27 +782,27 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n \n         mname = self.dom.createElement('mi')\n         mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n+\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..91c7353 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,6 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -756,12 +751,14 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n+                    tag = 'mn' if item.isdigit() else 'mi'\n+                    mi = self.dom.createElement(tag)\n                     mi.appendChild(self.dom.createTextNode(item))\n                     mrow.appendChild(mi)\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n+                tag = 'mn' if items[0].isdigit() else 'mi'\n+                mi = self.dom.createElement(tag)\n                 mi.appendChild(self.dom.createTextNode(items[0]))\n                 return mi\n \n@@ -778,28 +775,28 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         subs = [translate(sub) for sub in subs]\n \n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
        "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..35c9356 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,11 +743,8 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n+        # Build an identifier possibly with super/subscripts.\n+        # Do not wrap layout elements (msub/msup/msubsup) inside a token element.\n         def join(items):\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n@@ -777,29 +774,37 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        # No super/subscripts: return a simple <mi>\n+        if len(supers) == 0 and len(subs) == 0:\n+            mi = self.dom.createElement('mi')\n+            if style == 'bold':\n+                mi.setAttribute('mathvariant', 'bold')\n+            mi.appendChild(self.dom.createTextNode(name))\n+            return mi\n+\n+        # Build the base identifier\n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n+\n+        # Attach scripts appropriately and return the layout element directly\n         if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n"
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/sympy/printing/mathml.py b/sympy/printing/mathml.py\nindex 85af872..e29b380 100644\n--- a/sympy/printing/mathml.py\n+++ b/sympy/printing/mathml.py\n@@ -743,12 +743,14 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         return mrow\n \n     def _print_Symbol(self, sym, style='plain'):\n-        x = self.dom.createElement('mi')\n-\n-        if style == 'bold':\n-            x.setAttribute('mathvariant', 'bold')\n-\n         def join(items):\n+            def token_element(text):\n+                # Use <mn> for purely numeric tokens, otherwise <mi>\n+                tag = 'mn' if text.isdigit() else 'mi'\n+                el = self.dom.createElement(tag)\n+                el.appendChild(self.dom.createTextNode(text))\n+                return el\n+\n             if len(items) > 1:\n                 mrow = self.dom.createElement('mrow')\n                 for i, item in enumerate(items):\n@@ -756,14 +758,10 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n                         mo = self.dom.createElement('mo')\n                         mo.appendChild(self.dom.createTextNode(\" \"))\n                         mrow.appendChild(mo)\n-                    mi = self.dom.createElement('mi')\n-                    mi.appendChild(self.dom.createTextNode(item))\n-                    mrow.appendChild(mi)\n+                    mrow.appendChild(token_element(item))\n                 return mrow\n             else:\n-                mi = self.dom.createElement('mi')\n-                mi.appendChild(self.dom.createTextNode(items[0]))\n-                return mi\n+                return token_element(items[0])\n \n         # translate name, supers and subs to unicode characters\n         def translate(s):\n@@ -777,29 +775,31 @@ class MathMLPresentationPrinter(MathMLPrinterBase):\n         supers = [translate(sup) for sup in supers]\n         subs = [translate(sub) for sub in subs]\n \n+        # Base identifier\n         mname = self.dom.createElement('mi')\n+        if style == 'bold':\n+            mname.setAttribute('mathvariant', 'bold')\n         mname.appendChild(self.dom.createTextNode(name))\n-        if len(supers) == 0:\n-            if len(subs) == 0:\n-                x.appendChild(self.dom.createTextNode(name))\n-            else:\n-                msub = self.dom.createElement('msub')\n-                msub.appendChild(mname)\n-                msub.appendChild(join(subs))\n-                x.appendChild(msub)\n+\n+        # Build appropriate structure without wrapping ms* inside an <mi>\n+        if len(supers) == 0 and len(subs) == 0:\n+            return mname\n+        elif len(supers) == 0:\n+            msub = self.dom.createElement('msub')\n+            msub.appendChild(mname)\n+            msub.appendChild(join(subs))\n+            return msub\n+        elif len(subs) == 0:\n+            msup = self.dom.createElement('msup')\n+            msup.appendChild(mname)\n+            msup.appendChild(join(supers))\n+            return msup\n         else:\n-            if len(subs) == 0:\n-                msup = self.dom.createElement('msup')\n-                msup.appendChild(mname)\n-                msup.appendChild(join(supers))\n-                x.appendChild(msup)\n-            else:\n-                msubsup = self.dom.createElement('msubsup')\n-                msubsup.appendChild(mname)\n-                msubsup.appendChild(join(subs))\n-                msubsup.appendChild(join(supers))\n-                x.appendChild(msubsup)\n-        return x\n+            msubsup = self.dom.createElement('msubsup')\n+            msubsup.appendChild(mname)\n+            msubsup.appendChild(join(subs))\n+            msubsup.appendChild(join(supers))\n+            return msubsup\n \n     def _print_MatrixSymbol(self, sym):\n         return self._print_Symbol(sym, style=self._settings['mat_symbol_style'])\n",
  "7_resolved": false
}