{
  "instance_id": "SWE-Bench-Verified__python__maintenance__bugfix__dc72c033",
  "original_id": "django__django-12155",
  "1_model_selected_files": [
    "django/contrib/admindocs/utils.py"
  ],
  "2_embedding_selected_files": [
    "django/contrib/admindocs/utils.py",
    "django/contrib/admindocs/views.py",
    "django/contrib/admindocs/__init__.py",
    "django/contrib/admindocs/urls.py",
    "django/contrib/admindocs/apps.py",
    "django/setup.py",
    "django/contrib/admindocs/middleware.py",
    "django/contrib/__init__.py",
    "django/__init__.py",
    "django/__main__.py",
    "django/shortcuts.py"
  ],
  "3_final_combined_files": [
    "django/contrib/admindocs/utils.py",
    "django/contrib/admindocs/views.py",
    "django/contrib/admindocs/__init__.py"
  ],
  "4_related_elements": {
    "django/contrib/admindocs/utils.py": [
      "function: trim_docstring\nfunction: parse_docstring\nfunction: parse_rst\nfunction: create_reference_role\nfunction: default_reference_role"
    ],
    "django/contrib/admindocs/views.py": [
      "class: ViewDetailView"
    ],
    "django/contrib/admindocs/__init__.py": [
      ""
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "django/contrib/admindocs/utils.py": [
          "\nfunction: trim_docstring\nline: 37"
        ]
      },
      "patches": [
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..2bd3ca1 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,9 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation from the second line onward, per PEP 257.\n+    rest = [line for line in lines[1:] if line.lstrip()]\n+    indent = min(len(line) - len(line.lstrip()) for line in rest) if rest else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..db3ed8b 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,9 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Skip the first line when computing indentation; it may start at column 0.\n+    content_lines = [line for line in lines[1:] if line.lstrip()]\n+    indent = min((len(line) - len(line.lstrip())) for line in content_lines) if content_lines else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..a7f3b78 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,8 +34,12 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n-    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n+    # Compute indentation from all lines except the first so that a non-empty\n+    # first line (summary line) doesn't force indent to 0.\n+    rest = lines[1:]\n+    indents = [len(line) - len(line.lstrip()) for line in rest if line.lstrip()]\n+    indent = min(indents) if indents else 0\n+    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in rest]\n     return \"\\n\".join(trimmed).strip()\n \n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..cbba402 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation from the second line onwards to avoid a first-line\n+    # summary at column 0 preventing dedentation of the rest of the docstring.\n+    content_lines = [line for line in lines[1:] if line.lstrip()]\n+    indent = min((len(line) - len(line.lstrip())) for line in content_lines) if content_lines else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..39dd545 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,9 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation from lines after the first one only, per PEP 257.\n+    indentation_levels = [len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()]\n+    indent = min(indentation_levels) if indentation_levels else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..0e2be53 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,13 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation from lines after the first so that a non-empty first\n+    # line doesn't force indent=0 and break reST processing.\n+    if len(lines) > 1:\n+        nonempty_following = [len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()]\n+        indent = min(nonempty_following) if nonempty_following else 0\n+    else:\n+        indent = 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..a5a2547 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation based on lines after the first one to handle\n+    # docstrings where the first line contains text.\n+    indent_candidates = [line for line in lines[1:] if line.lstrip()]\n+    indent = min(len(line) - len(line.lstrip()) for line in indent_candidates) if indent_candidates else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..2e9eb8a 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indent from non-empty lines after the first line to avoid\n+    # treating first-line text as indentation.\n+    indent_candidates = [len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()]\n+    indent = min(indent_candidates) if indent_candidates else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..dbb2899 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,11 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute the indentation based on all lines except the first one.\n+    # This avoids treating a non-indented first line as setting the indent\n+    # to 0, which breaks docstrings whose text starts on the first line.\n+    indents = [len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()]\n+    indent = min(indents) if indents else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..9265815 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,11 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation from all non-empty lines except the first one.\n+    # This avoids treating an unindented first line (common for summary lines)\n+    # as setting the indent to 0 for the rest of the docstring.\n+    non_empty = [line for line in lines[1:] if line.lstrip()]\n+    indent = min((len(line) - len(line.lstrip())) for line in non_empty) if non_empty else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n"
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "django/contrib/admindocs/utils.py": [
          "\nline: 37"
        ]
      },
      "patches": [
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..f2ae0aa 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,12 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation from all lines except the first one (PEP 257).\n+    if len(lines) > 1:\n+        indents = [len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()]\n+        indent = min(indents) if indents else 0\n+    else:\n+        indent = 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..3a45648 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,8 +34,14 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n-    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n+    # Compute indentation from lines after the first summary line to avoid\n+    # treating a non-indented first line as the common indent.\n+    subsequent = lines[1:]\n+    if subsequent and any(line.lstrip() for line in subsequent):\n+        indent = min(len(line) - len(line.lstrip()) for line in subsequent if line.lstrip())\n+    else:\n+        indent = 0\n+    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in subsequent]\n     return \"\\n\".join(trimmed).strip()\n \n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..ff2a15e 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation from the second line onwards so that a non-empty\n+    # first line doesn't force indent=0.\n+    indent_candidates = [len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()]\n+    indent = min(indent_candidates) if indent_candidates else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..2badf04 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation based on non-empty lines after the first line.\n+    # The first line is treated as the summary and may be unindented.\n+    nonempty_body_lines = [line for line in lines[1:] if line.lstrip()]\n+    indent = min((len(line) - len(line.lstrip())) for line in nonempty_body_lines) if nonempty_body_lines else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..0c41f98 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,13 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation from lines after the first one to avoid the\n+    # first (summary) line forcing indent to 0 (see PEP 257).\n+    non_empty_after_first = [line for line in lines[1:] if line.lstrip()]\n+    if non_empty_after_first:\n+        indent = min(len(line) - len(line.lstrip()) for line in non_empty_after_first)\n+    else:\n+        indent = 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..116cdc2 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,12 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation based on all lines except the first one (PEP 257).\n+    # Fall back to 0 when there are no non-empty lines after the first.\n+    indent = min(\n+        (len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()),\n+        default=0,\n+    )\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..48b2843 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,8 +34,12 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n-    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n+    # Compute indentation from lines after the first, so a non-indented\n+    # first line (common in single-line summaries) doesn't force indent=0.\n+    extra_lines = lines[1:]\n+    indents = [len(line) - len(line.lstrip()) for line in extra_lines if line.lstrip()]\n+    indent = min(indents) if indents else 0\n+    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in extra_lines]\n     return \"\\n\".join(trimmed).strip()\n \n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..f754b72 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Per PEP 257, compute indentation from lines after the first one\n+    # to avoid the first summary line (which often has zero indent)\n+    non_empty = [line for line in lines[1:] if line.lstrip()]\n+    indent = min(len(line) - len(line.lstrip()) for line in non_empty) if non_empty else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..ba3143d 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,8 +34,12 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n-    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n+    # Determine indentation from all non-empty lines except the first one.\n+    # This avoids the first line (which often starts at column 0) forcing indent=0.\n+    other_lines = lines[1:]\n+    indents = [len(line) - len(line.lstrip()) for line in other_lines if line.lstrip()]\n+    indent = min(indents) if indents else 0\n+    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in other_lines]\n     return \"\\n\".join(trimmed).strip()\n \n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..b849056 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation from lines after the first to avoid treating\n+    # non-indented first-line content as the minimum indent.\n+    indents = [len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()]\n+    indent = min(indents) if indents else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n"
      ]
    },
    {
      "sample_index": 2,
      "edit_locs": {
        "django/contrib/admindocs/utils.py": [
          "\nfunction: trim_docstring\nline: 37"
        ]
      },
      "patches": [
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..33ae8b1 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation based on lines after the first one to allow\n+    # single-line summaries that start on the first line.\n+    indents = [len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()]\n+    indent = min(indents) if indents else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..40dbeee 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation from all lines except the first one to avoid a\n+    # non-indented first line forcing zero indentation for the rest.\n+    rest = [line for line in lines[1:] if line.lstrip()]\n+    indent = min((len(line) - len(line.lstrip()) for line in rest), default=0)\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..93cf2c1 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,11 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine minimal indentation from lines after the first one only.\n+    # This avoids treating a first-line summary (which is often unindented)\n+    # as defining the indentation level for the rest of the docstring.\n+    non_empty = [line for line in lines[1:] if line.lstrip()]\n+    indent = min(len(line) - len(line.lstrip()) for line in non_empty) if non_empty else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..38ac587 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,8 +34,14 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n-    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n+    # Compute indentation based on all lines except the first to handle\n+    # docstrings where the first line starts at column 0.\n+    subsequent = lines[1:]\n+    if any(line.lstrip() for line in subsequent):\n+        indent = min(len(line) - len(line.lstrip()) for line in subsequent if line.lstrip())\n+    else:\n+        indent = 0\n+    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in subsequent]\n     return \"\\n\".join(trimmed).strip()\n \n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..9d000ad 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,9 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation (first line doesn't count)\n+    non_empty_lines = [line for line in lines[1:] if line.lstrip()]\n+    indent = min(len(line) - len(line.lstrip()) for line in non_empty_lines) if non_empty_lines else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..0abaa68 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,8 +34,12 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n-    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n+    # Compute indentation from all lines except the first one, so a first-line\n+    # summary (starting at column 0) doesn't force indent to 0.\n+    tail_lines = lines[1:]\n+    indents = [len(line) - len(line.lstrip()) for line in tail_lines if line.lstrip()]\n+    indent = min(indents) if indents else 0\n+    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in tail_lines]\n     return \"\\n\".join(trimmed).strip()\n \n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..47b10ea 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation from lines after the first so a non-empty first line\n+    # (with indent 0) doesn't force indent to 0.\n+    nonempty_after_first = [line for line in lines[1:] if line.lstrip()]\n+    indent = min((len(line) - len(line.lstrip())) for line in nonempty_after_first) if nonempty_after_first else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..2077a5e 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,11 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation from the second line onward. The first line may start\n+    # at column 0 (when the summary is on the same line as the opening quotes),\n+    # which would otherwise force indent=0 and prevent proper dedentation.\n+    non_empty_rest = [line for line in lines[1:] if line.lstrip()]\n+    indent = min((len(line) - len(line.lstrip())) for line in non_empty_rest) if non_empty_rest else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..16df52a 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,9 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine minimum indentation from the second line onward\n+    non_empty_lines = [line for line in lines[1:] if line.lstrip()]\n+    indent = min((len(line) - len(line.lstrip()) for line in non_empty_lines), default=0)\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..cbaf6cc 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,13 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation based on all non-empty lines after the first line.\n+    # This avoids a zero indent when the docstring text starts on the first line.\n+    try:\n+        indent = min(len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip())\n+    except ValueError:\n+        # No subsequent non-empty lines; treat indent as 0.\n+        indent = 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n"
      ]
    },
    {
      "sample_index": 3,
      "edit_locs": {
        "django/contrib/admindocs/utils.py": [
          "\nline: 37"
        ]
      },
      "patches": [
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..2837bbf 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,13 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine the indentation based on lines after the first one.\n+    # This allows docstrings whose text starts on the first line.\n+    if len(lines) > 1:\n+        indents = [len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()]\n+        indent = min(indents) if indents else 0\n+    else:\n+        indent = 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..a80e028 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine the minimum indentation (but ignore the first line).\n+    # This allows docstrings whose summary starts on the first line.\n+    rest = [line for line in lines[1:] if line.lstrip()]\n+    indent = min((len(line) - len(line.lstrip())) for line in rest) if rest else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..70d91d5 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,13 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation from lines after the first one to avoid\n+    # treating a non-indented first line as the baseline.\n+    non_empty_rest = [line for line in lines[1:] if line.lstrip()]\n+    if non_empty_rest:\n+        indent = min(len(line) - len(line.lstrip()) for line in non_empty_rest)\n+    else:\n+        indent = 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..12658ca 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,13 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation using lines after the first one. The first line may\n+    # be unindented (summary line), which would incorrectly force indent = 0.\n+    content_lines = [line for line in lines[1:] if line.lstrip()]\n+    if content_lines:\n+        indent = min(len(line) - len(line.lstrip()) for line in content_lines)\n+    else:\n+        indent = 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..955af2d 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,12 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Determine indentation based on all non-empty lines except the first\n+    non_empty_rest = [line for line in lines[1:] if line.lstrip()]\n+    if non_empty_rest:\n+        indent = min(len(line) - len(line.lstrip()) for line in non_empty_rest)\n+    else:\n+        indent = 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..39d8c66 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,10 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation from the second line onward, per PEP 257.\n+    # The first line is special and should not affect indentation.\n+    indents = [len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()]\n+    indent = min(indents) if indents else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..14ba1de 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,8 +34,14 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n-    trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n+    # Compute indentation based on all lines except the first to handle\n+    # docstrings whose text starts on the first line.\n+    non_first = [line for line in lines[1:] if line.lstrip()]\n+    if non_first:\n+        indent = min(len(line) - len(line.lstrip()) for line in non_first)\n+    else:\n+        indent = 0\n+    trimmed = [lines[0].strip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..442d0f8 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,16 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation from all lines except the first one. This avoids\n+    # the first line (often unindented) forcing indent=0 and breaking\n+    # formatting when the body is indented. If there are no additional\n+    # non-empty lines, don't indent.\n+    non_first_lines = lines[1:]\n+    indent = (\n+        min(len(line) - len(line.lstrip()) for line in non_first_lines if line.lstrip())\n+        if any(line.lstrip() for line in non_first_lines)\n+        else 0\n+    )\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..1c78b4d 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,13 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation from lines after the first, so a non-empty first line\n+    # starting at column 0 doesn't force indent=0 for the rest.\n+    if len(lines) > 1:\n+        indents = [len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip()]\n+        indent = min(indents) if indents else 0\n+    else:\n+        indent = 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
        ""
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/django/contrib/admindocs/utils.py b/django/contrib/admindocs/utils.py\nindex 63ee2fc..2bd3ca1 100644\n--- a/django/contrib/admindocs/utils.py\n+++ b/django/contrib/admindocs/utils.py\n@@ -34,7 +34,9 @@ def trim_docstring(docstring):\n         return ''\n     # Convert tabs to spaces and split into lines\n     lines = docstring.expandtabs().splitlines()\n-    indent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\n+    # Compute indentation from the second line onward, per PEP 257.\n+    rest = [line for line in lines[1:] if line.lstrip()]\n+    indent = min(len(line) - len(line.lstrip()) for line in rest) if rest else 0\n     trimmed = [lines[0].lstrip()] + [line[indent:].rstrip() for line in lines[1:]]\n     return \"\\n\".join(trimmed).strip()\n \n",
  "7_resolved": true
}