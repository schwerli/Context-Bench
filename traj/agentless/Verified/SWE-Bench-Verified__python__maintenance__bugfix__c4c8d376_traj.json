{
  "instance_id": "SWE-Bench-Verified__python__maintenance__bugfix__c4c8d376",
  "original_id": "django__django-13925",
  "1_model_selected_files": [
    "django/core/checks/model_checks.py",
    "django/db/models/base.py",
    "django/db/models/options.py",
    "django/apps/config.py",
    "django/conf/global_settings.py"
  ],
  "2_embedding_selected_files": [
    "django/db/models/base.py",
    "django/db/models/__init__.py",
    "django/core/serializers/base.py",
    "django/db/models/fields/__init__.py",
    "django/db/backends/sqlite3/schema.py",
    "django/db/migrations/autodetector.py",
    "django/db/backends/mysql/features.py",
    "django/db/models/fields/related_descriptors.py",
    "django/db/backends/mysql/schema.py",
    "django/db/migrations/questioner.py",
    "django/db/backends/base/schema.py",
    "django/db/models/constraints.py",
    "django/db/migrations/operations/__init__.py",
    "django/db/backends/base/__init__.py",
    "django/db/migrations/operations/models.py",
    "django/db/models/sql/datastructures.py",
    "django/db/migrations/exceptions.py",
    "django/db/backends/dummy/__init__.py",
    "django/db/backends/sqlite3/__init__.py",
    "django/db/backends/mysql/__init__.py",
    "django/db/models/fields/related.py",
    "django/db/backends/__init__.py",
    "django/db/backends/sqlite3/features.py",
    "django/db/models/options.py",
    "django/core/exceptions.py",
    "django/db/backends/dummy/features.py",
    "django/db/backends/oracle/operations.py",
    "django/db/models/fields/related_lookups.py",
    "django/db/backends/oracle/introspection.py",
    "django/db/migrations/__init__.py",
    "django/db/backends/sqlite3/base.py",
    "django/db/models/sql/__init__.py",
    "django/db/models/manager.py",
    "django/core/__init__.py",
    "django/core/checks/messages.py",
    "django/db/backends/base/introspection.py",
    "django/db/backends/oracle/schema.py",
    "django/db/backends/mysql/base.py",
    "django/db/backends/base/base.py",
    "django/db/backends/postgresql/__init__.py",
    "django/db/models/utils.py",
    "django/core/checks/security/__init__.py",
    "django/db/backends/mysql/validation.py",
    "django/apps/config.py",
    "django/db/backends/postgresql/features.py",
    "django/db/backends/mysql/creation.py",
    "django/db/backends/postgresql/introspection.py",
    "django/db/backends/oracle/features.py",
    "django/db/backends/postgresql/creation.py",
    "django/core/cache/backends/base.py",
    "django/core/checks/model_checks.py",
    "django/core/checks/__init__.py",
    "django/db/utils.py",
    "django/db/migrations/recorder.py",
    "django/db/backends/base/features.py",
    "django/db/migrations/executor.py",
    "django/core/cache/backends/db.py",
    "django/db/models/fields/reverse_related.py",
    "django/db/backends/sqlite3/creation.py",
    "django/db/models/lookups.py",
    "django/conf/global_settings.py",
    "django/db/migrations/state.py",
    "django/core/serializers/xml_serializer.py",
    "django/db/backends/dummy/base.py"
  ],
  "3_final_combined_files": [
    "django/db/models/base.py",
    "django/core/checks/model_checks.py",
    "django/db/models/options.py",
    "django/db/models/__init__.py",
    "django/core/serializers/base.py"
  ],
  "4_related_elements": {
    "django/db/models/base.py": [
      "function: Model.check\nfunction: Model._check_default_pk\nclass: ModelBase"
    ],
    "django/core/checks/model_checks.py": [
      "function: check_all_models"
    ],
    "django/db/models/options.py": [
      "function: Options._get_default_pk_class\nfunction: Options.setup_pk\nfunction: Options.add_field\nfunction: Options.concrete_fields\nfunction: Options.local_concrete_fields"
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "django/db/models/base.py": [
          "\nfunction: ModelBase.__new__\nline: 249\nfunction: Model._check_default_pk\nline: 1299\nline: 1300\nline: 1301\nline: 1302\nline: 1303\nline: 1304"
        ]
      },
      "patches": [
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..9b151c7 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,17 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        \"\"\"\n+        Warn only when a model is using the implicit auto-created AutoField\n+        primary key. Don't warn for multi-table inheritance where the primary\n+        key is the parent_link OneToOneField inherited from a base model.\n+        \"\"\"\n+        pk = cls._meta.pk\n+        # In multi-table inheritance, the PK is a parent_link OneToOneField.\n+        is_parent_link_pk = getattr(getattr(pk, 'remote_field', None), 'parent_link', False)\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not is_parent_link_pk and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..b6c33f6 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,10 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not pk.is_relation and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..e658095 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,13 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n+        # Only warn when Django auto-creates an AutoField primary key.\n+        # Skip inherited primary keys (e.g., multi-table inheritance) where\n+        # the PK is a parent_link OneToOneField.\n         if (\n-            cls._meta.pk.auto_created and\n+            isinstance(pk, AutoField) and\n+            pk.auto_created and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..c16a840 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,12 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Only emit this warning for auto-created AutoField-style primary keys.\n+        # In multi-table inheritance, the pk is an auto-created OneToOneField\n+        # to the parent and should not trigger models.W042.\n         if (\n             cls._meta.pk.auto_created and\n+            not getattr(cls._meta.pk, 'one_to_one', False) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..d68b8ef 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,20 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        \"\"\"\n+        Warn only when a model relies on an auto-created AutoField primary key.\n+        Skip models whose primary key is inherited via a parent_link\n+        (multi-table inheritance), since the PK type was explicitly defined\n+        on the parent model.\n+        \"\"\"\n+        pk = cls._meta.pk\n+        inherited_via_parent_link = (\n+            isinstance(pk, OneToOneField) and\n+            getattr(getattr(pk, 'remote_field', None), 'parent_link', False)\n+        )\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not inherited_via_parent_link and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..6df88b6 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,12 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n+        # Only warn for auto-created \"default\" primary keys (e.g., AutoField/BigAutoField).\n+        # Exclude auto-created parent_link OneToOneField primary keys used for multi-table inheritance.\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not (getattr(pk, 'remote_field', None) and getattr(pk.remote_field, 'parent_link', False)) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..f83252f 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,14 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Only warn for auto-created AutoField-based primary keys on concrete models,\n+        # not for inherited parent_link primary keys created for multi-table inheritance.\n+        # pk for MTI children is a OneToOneField and shouldn't trigger this check.\n+        from django.db.models.fields import AutoField\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            isinstance(pk, AutoField) and\n+            pk.auto_created and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..2e37f64 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -69,6 +69,8 @@ def _has_contribute_to_class(value):\n     return not inspect.isclass(value) and hasattr(value, 'contribute_to_class')\n \n \n+from django.db.models import AutoField\n+\n class ModelBase(type):\n     \"\"\"Metaclass for all models.\"\"\"\n     def __new__(cls, name, bases, attrs, **kwargs):\n@@ -1297,8 +1299,11 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Only warn for the auto-created integer primary key (AutoField or a subclass).\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            isinstance(pk, AutoField) and\n+            pk.auto_created and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..351eba4 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -246,6 +246,7 @@ class ModelBase(type):\n                         name=attr_name,\n                         auto_created=True,\n                         parent_link=True,\n+                        primary_key=True,\n                     )\n \n                     if attr_name in field_names:\n@@ -1299,6 +1300,7 @@ class Model(metaclass=ModelBase):\n     def _check_default_pk(cls):\n         if (\n             cls._meta.pk.auto_created and\n+            not cls._meta.pk.is_relation and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..3d7de38 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1299,6 +1299,7 @@ class Model(metaclass=ModelBase):\n     def _check_default_pk(cls):\n         if (\n             cls._meta.pk.auto_created and\n+            not getattr(cls._meta.pk, 'is_relation', False) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n"
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "django/db/models/base.py": [
          "\nfunction: Model._check_default_pk\nline: 1300\nline: 1301\nline: 1302\nline: 1303"
        ]
      },
      "patches": [
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..9bd838a 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,15 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n+        # Skip warning for inherited primary keys (multi-table inheritance),\n+        # where the pk is an auto-created parent_link OneToOneField to the base.\n+        is_parent_link_pk = bool(\n+            getattr(pk, 'remote_field', None) and getattr(pk.remote_field, 'parent_link', False)\n+        )\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not is_parent_link_pk and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..6426cc6 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1299,6 +1299,7 @@ class Model(metaclass=ModelBase):\n     def _check_default_pk(cls):\n         if (\n             cls._meta.pk.auto_created and\n+            cls._meta.pk.remote_field is None and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..288d34c 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,12 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Don't warn for auto-created parent link primary keys that result from\n+        # multi-table inheritance. Those are OneToOneFields to the parent and\n+        # not implicit AutoFields.\n         if (\n             cls._meta.pk.auto_created and\n+            not getattr(cls._meta.pk, 'parent_link', False) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..49ebc4e 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1299,6 +1299,7 @@ class Model(metaclass=ModelBase):\n     def _check_default_pk(cls):\n         if (\n             cls._meta.pk.auto_created and\n+            not getattr(cls._meta.pk, \"is_relation\", False) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..59afb75 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,15 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n+        # Skip warning for auto-created PKs that are inheritance links\n+        # (multi-table inheritance), since the PK type is defined on the parent.\n+        is_inherited_pk = getattr(pk, 'parent_link', False) or any(\n+            link_field is pk for link_field in cls._meta.parents.values()\n+        )\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not is_inherited_pk and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..e636f3c 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,7 +1297,12 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Only warn when the auto-created primary key is an AutoField (or a subclass),\n+        # e.g., the implicit \"id\" field. This excludes inherited PKs like the\n+        # OneToOneField created for multi-table inheritance.\n+        from django.db.models import AutoField\n         if (\n+            isinstance(cls._meta.pk, AutoField) and\n             cls._meta.pk.auto_created and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..13f75a6 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,21 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Only warn when Django auto-created an AutoField-based primary key\n+        # because no explicit primary key was defined on the model itself.\n+        # Exclude inherited primary keys (parent links on multi-table\n+        # inheritance), which are auto_created but not AutoField-based.\n+        pk = cls._meta.pk\n+        # Import locally to avoid potential circular imports at module load time.\n+        from django.db.models import AutoField\n+        is_auto_created_pk = (\n+            pk is not None and\n+            pk.auto_created and\n+            not getattr(pk, 'parent_link', False) and\n+            isinstance(pk, AutoField)\n+        )\n         if (\n-            cls._meta.pk.auto_created and\n+            is_auto_created_pk and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..7863963 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,14 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n+        # Only warn when Django would auto-create an AutoField-based primary key.\n+        # Inheritance may auto-create a OneToOneField primary key on child models,\n+        # which should not trigger this warning.\n         if (\n-            cls._meta.pk.auto_created and\n+            pk is not None and\n+            pk.auto_created and\n+            getattr(pk, 'get_internal_type', lambda: None)() in {'AutoField', 'BigAutoField', 'SmallAutoField'} and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..6a01b7c 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,13 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Only warn when the auto-created primary key is an AutoField (or subclass),\n+        # not when it's a parent link created by multi-table inheritance.\n+        from django.db.models import AutoField\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            isinstance(pk, AutoField) and\n+            pk.auto_created and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..d4a8929 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,20 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        \"\"\"\n+        Warn only for implicit auto-created AutoField primary keys.\n+        Exclude auto-created parent_link PKs created for multi-table inheritance,\n+        since their type is inherited from the parent and not the DEFAULT_AUTO_FIELD.\n+        \"\"\"\n+        pk = cls._meta.pk\n+        if pk is None:\n+            return []\n+        # Import locally to avoid circular imports and to check for AutoField subclasses.\n+        from django.db.models import AutoField\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            isinstance(pk, AutoField) and\n+            not getattr(pk, 'parent_link', False) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n"
      ]
    },
    {
      "sample_index": 2,
      "edit_locs": {
        "django/db/models/base.py": [
          "\nfunction: ModelBase.__new__\nline: 243\nline: 244\nline: 245\nline: 246\nline: 247\nline: 248\nline: 249\nline: 250\nline: 251\nfunction: Model._check_default_pk\nline: 1299\nline: 1300\nline: 1301\nline: 1302\nline: 1303\nline: 1304"
        ]
      },
      "patches": [
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..0a45059 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,14 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n+        # Only warn for auto-created non-relational primary keys (the implicit\n+        # DEFAULT_AUTO_FIELD). Inherited primary keys from a parent link\n+        # (OneToOneField) are relational and should not trigger this warning.\n         if (\n-            cls._meta.pk.auto_created and\n+            pk is not None and\n+            pk.auto_created and\n+            pk.remote_field is None and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..ec17d38 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,12 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Ignore auto-created primary keys that are parent links for\n+        # multi-table inheritance. These are expected and not the\n+        # default auto field warning case.\n         if (\n             cls._meta.pk.auto_created and\n+            not getattr(getattr(cls._meta.pk, 'remote_field', None), 'parent_link', False) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..07c826d 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,12 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n+        # Exclude auto-created parent link primary keys (multi-table inheritance).\n+        is_parent_link = getattr(getattr(pk, 'remote_field', None), 'parent_link', False)\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not is_parent_link and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..f99722b 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,11 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Only warn for auto-created non-relational primary keys (e.g. AutoField).\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not pk.is_relation and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..a128763 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,13 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n+        # Skip warning for inherited primary keys created as parent links in\n+        # multi-table inheritance.\n         if (\n-            cls._meta.pk.auto_created and\n+            pk is not None and\n+            pk.auto_created and\n+            not getattr(pk.remote_field, 'parent_link', False) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..2daa655 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,11 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk is not None and\n+            pk.auto_created and\n+            pk.remote_field is None and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..eb7791f 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,11 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Only warn for the implicit auto-generated \"id\" primary key,\n+        # not for inherited parent links (multi-table inheritance).\n         if (\n             cls._meta.pk.auto_created and\n+            cls._meta.pk.remote_field is None and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..38abeb0 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,13 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n+        # Only warn for auto-created AutoField-based primary keys.\n+        # Exclude auto-created parent-link OneToOneField primary keys used by\n+        # multi-table inheritance where the PK type is inherited from the parent.\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not isinstance(pk, OneToOneField) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..afc48b7 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,13 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Warn only when an auto-created primary key was added because the model\n+        # didn't define any primary key itself. Skip parent-link primary keys\n+        # that are auto-created for multi-table inheritance.\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not getattr(getattr(pk, 'remote_field', None), 'parent_link', False) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..1980f44 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,15 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Warn only for auto-created AutoField-based primary keys.\n+        # Skip models that inherit a PK via multi-table inheritance (parent_link\n+        # OneToOneField) or any explicit non-AutoField PK.\n+        from django.db.models import AutoField\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk is not None and\n+            pk.auto_created and\n+            isinstance(pk, AutoField) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n"
      ]
    },
    {
      "sample_index": 3,
      "edit_locs": {
        "django/db/models/base.py": [
          "\nfunction: Model._check_default_pk\nline: 1299\nline: 1300\nline: 1301\nline: 1302\nline: 1303\nline: 1304"
        ]
      },
      "patches": [
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..b6c33f6 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,10 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not pk.is_relation and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..5303207 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,13 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Only warn for auto-created AutoField primary keys. Skip inherited\n+        # primary keys (e.g., the auto-created parent_link OneToOneField in\n+        # multi-table inheritance) which are not AutoFields.\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            pk.remote_field is None and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..99e00d3 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,10 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not getattr(pk, 'parent_link', False) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..b9d552a 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,14 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk is not None and\n+            pk.auto_created and\n+            # Only warn for auto-created non-relational primary keys\n+            # (e.g. the implicit AutoField \"id\"), not for inherited\n+            # parent links (OneToOneField) or other relational PKs.\n+            getattr(pk, \"remote_field\", None) is None and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..27bc609 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,13 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Only warn for auto-created scalar primary keys (e.g., AutoField).\n+        # Skip models that inherit their primary key via a relation to a parent\n+        # (multi-table inheritance creates an auto-created OneToOneField as the PK).\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            pk.remote_field is None and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..2daa655 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,11 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk is not None and\n+            pk.auto_created and\n+            pk.remote_field is None and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..77372a4 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,10 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            pk.remote_field is None and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..ef3c171 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,12 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n+        # Skip warning for inherited primary keys (parent link in multi-table inheritance).\n+        parent_link = getattr(pk, 'parent_link', False)\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not parent_link and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..f6e3d36 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,13 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        # Only warn for auto-created non-relational primary keys (e.g., AutoField).\n+        # For inherited models using multi-table inheritance, the primary key is an\n+        # auto-created OneToOneField to the parent (a relation), which should not\n+        # trigger this warning.\n         if (\n             cls._meta.pk.auto_created and\n+            not cls._meta.pk.is_relation and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
        "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..e7b0c0c 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,12 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n+        # Ignore inherited primary keys from multi-table inheritance (parent_link=True).\n         if (\n-            cls._meta.pk.auto_created and\n+            pk is not None and\n+            pk.auto_created and\n+            not getattr(pk, 'parent_link', False) and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n"
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 7468862..b6c33f6 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1297,8 +1297,10 @@ class Model(metaclass=ModelBase):\n \n     @classmethod\n     def _check_default_pk(cls):\n+        pk = cls._meta.pk\n         if (\n-            cls._meta.pk.auto_created and\n+            pk.auto_created and\n+            not pk.is_relation and\n             not settings.is_overridden('DEFAULT_AUTO_FIELD') and\n             not cls._meta.app_config._is_default_auto_field_overridden\n         ):\n",
  "7_resolved": true
}