{
  "instance_id": "SWE-Bench-Verified__python__maintenance__bugfix__83fd3b37",
  "original_id": "sphinx-doc__sphinx-8265",
  "1_model_selected_files": [
    "sphinx/domains/python.py",
    "sphinx/util/inspect.py",
    "sphinx/ext/autodoc/__init__.py",
    "sphinx/writers/html5.py",
    "sphinx/writers/html.py"
  ],
  "2_embedding_selected_files": [
    "sphinx/writers/html.py",
    "sphinx/writers/html5.py",
    "sphinx/writers/latex.py",
    "sphinx/writers/texinfo.py",
    "sphinx/setup_command.py",
    "sphinx/ext/autodoc/__init__.py",
    "sphinx/domains/std.py",
    "sphinx/writers/text.py",
    "sphinx/addnodes.py",
    "sphinx/setup.py",
    "sphinx/pygments_styles.py",
    "sphinx/domains/python.py",
    "sphinx/ext/doctest.py",
    "sphinx/util/rst.py",
    "sphinx/builders/html/__init__.py",
    "sphinx/__init__.py",
    "sphinx/builders/singlehtml.py",
    "sphinx/ext/linkcode.py",
    "sphinx/builders/changes.py",
    "sphinx/highlighting.py",
    "sphinx/ext/inheritance_diagram.py",
    "sphinx/writers/manpage.py",
    "sphinx/ext/graphviz.py",
    "sphinx/ext/autosectionlabel.py",
    "sphinx/ext/viewcode.py",
    "sphinx/util/console.py",
    "sphinx/util/pycompat.py",
    "sphinx/builders/devhelp.py",
    "sphinx/transforms/__init__.py",
    "sphinx/util/cfamily.py",
    "sphinx/builders/htmlhelp.py",
    "sphinx/builders/manpage.py",
    "sphinx/builders/texinfo.py",
    "sphinx/transforms/post_transforms/code.py",
    "sphinx/builders/linkcheck.py",
    "sphinx/domains/citation.py",
    "sphinx/ext/imgmath.py",
    "sphinx/deprecation.py",
    "sphinx/__main__.py",
    "sphinx/ext/todo.py",
    "sphinx/builders/__init__.py",
    "sphinx/ext/autodoc/type_comment.py",
    "sphinx/transforms/references.py",
    "sphinx/ext/apidoc.py",
    "sphinx/domains/rst.py",
    "sphinx/util/__init__.py"
  ],
  "3_final_combined_files": [
    "sphinx/domains/python.py",
    "sphinx/util/inspect.py",
    "sphinx/ext/autodoc/__init__.py",
    "sphinx/writers/html.py",
    "sphinx/writers/html5.py",
    "sphinx/writers/latex.py"
  ],
  "4_related_elements": {
    "sphinx/domains/python.py": [
      "variable: py_sig_re\nfunction: _parse_arglist\nfunction: _pseudo_parse_arglist\nfunction: PyObject.handle_signature"
    ],
    "sphinx/util/inspect.py": [
      "function: stringify_signature\nfunction: signature_from_str\nclass: Signature"
    ],
    "sphinx/ext/autodoc/__init__.py": [
      "variable: py_ext_sig_re\nclass: DocstringSignatureMixin\nfunction: DocstringSignatureMixin._find_signature\nfunction: DocstringSignatureMixin.format_signature\nfunction: Documenter.format_signature"
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "sphinx/util/inspect.py": [
          "\nfunction: signature_from_ast"
        ],
        "sphinx/domains/python.py": [
          "\nfunction: _parse_arglist"
        ]
      },
      "patches": [
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..37f8638 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -621,12 +621,25 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     for _ in range(len(defaults), positionals):\n         defaults.insert(0, Parameter.empty)\n \n+    def _format_default(value):\n+        # Returns Parameter.empty or a string representation of the default.\n+        if value is Parameter.empty:\n+            return Parameter.empty\n+        if value is None:\n+            # No default (used in kwonly defaults)\n+            return Parameter.empty\n+        text = ast_unparse(value)\n+        # Wrap tuple defaults with parentheses to preserve them in signatures\n+        if isinstance(value, ast.Tuple):\n+            return '(' + text + ')'\n+        return text\n+\n     if hasattr(args, \"posonlyargs\"):\n         for i, arg in enumerate(args.posonlyargs):  # type: ignore\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _format_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +649,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _format_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +661,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default = _format_default(args.kw_defaults[i])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..45ddcb6 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,7 +626,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default_node = defaults[i]\n+                default = ast_unparse(default_node)\n+                if isinstance(default_node, ast.Tuple):\n+                    default = '(' + default + ')'\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +639,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default_node = defaults[i + posonlyargs]\n+            default = ast_unparse(default_node)\n+            if isinstance(default_node, ast.Tuple):\n+                default = '(' + default + ')'\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +654,13 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        kw_default = args.kw_defaults[i]\n+        if kw_default is None:\n+            default = Parameter.empty\n+        else:\n+            default = ast_unparse(kw_default)\n+            if isinstance(kw_default, ast.Tuple):\n+                default = '(' + default + ')'\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..ccc8537 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,7 +626,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default_node = defaults[i]\n+                default = ast_unparse(default_node)\n+                if isinstance(default_node, ast.Tuple):\n+                    default = '(' + default + ')'\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +639,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default_node = defaults[i + posonlyargs]\n+            default = ast_unparse(default_node)\n+            if isinstance(default_node, ast.Tuple):\n+                default = '(' + default + ')'\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +654,13 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        if args.kw_defaults[i] is not None:\n+            default_node = args.kw_defaults[i]\n+            default = ast_unparse(default_node) or Parameter.empty\n+            if default is not Parameter.empty and isinstance(default_node, ast.Tuple):\n+                default = '(' + default + ')'\n+        else:\n+            default = Parameter.empty\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..5b173c6 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -627,6 +627,8 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                 default = Parameter.empty\n             else:\n                 default = ast_unparse(defaults[i])\n+                if isinstance(defaults[i], ast.Tuple):\n+                    default = f'({default})'\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -637,6 +639,8 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             default = Parameter.empty\n         else:\n             default = ast_unparse(defaults[i + posonlyargs])\n+            if isinstance(defaults[i + posonlyargs], ast.Tuple):\n+                default = f'({default})'\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +652,12 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        if args.kw_defaults[i] is not None:\n+            default = ast_unparse(args.kw_defaults[i])\n+            if isinstance(args.kw_defaults[i], ast.Tuple):\n+                default = f'({default})'\n+        else:\n+            default = Parameter.empty\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..2f1ebfd 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -627,6 +627,9 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                 default = Parameter.empty\n             else:\n                 default = ast_unparse(defaults[i])\n+                # Ensure tuple defaults are represented with parentheses\n+                if isinstance(defaults[i], ast.Tuple):\n+                    default = '(%s)' % default\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -637,6 +640,9 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             default = Parameter.empty\n         else:\n             default = ast_unparse(defaults[i + posonlyargs])\n+            # Ensure tuple defaults are represented with parentheses\n+            if isinstance(defaults[i + posonlyargs], ast.Tuple):\n+                default = '(%s)' % default\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +654,14 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        if default_node is None:\n+            default = Parameter.empty\n+        else:\n+            default = ast_unparse(default_node) or Parameter.empty\n+            # Ensure tuple defaults are represented with parentheses\n+            if isinstance(default_node, ast.Tuple):\n+                default = '(%s)' % default\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..11f318e 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -623,20 +623,30 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n \n     if hasattr(args, \"posonlyargs\"):\n         for i, arg in enumerate(args.posonlyargs):  # type: ignore\n-            if defaults[i] is Parameter.empty:\n+            default_node = defaults[i]\n+            if default_node is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default_str = ast_unparse(default_node)\n+                if isinstance(default_node, ast.Tuple) and not (default_str.startswith('(') and default_str.endswith(')')):\n+                    default = '(' + default_str + ')'\n+                else:\n+                    default = default_str\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n                                     default=default, annotation=annotation))\n \n     for i, arg in enumerate(args.args):\n-        if defaults[i + posonlyargs] is Parameter.empty:\n+        default_node = defaults[i + posonlyargs]\n+        if default_node is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default_str = ast_unparse(default_node)\n+            if isinstance(default_node, ast.Tuple) and not (default_str.startswith('(') and default_str.endswith(')')):\n+                default = '(' + default_str + ')'\n+            else:\n+                default = default_str\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +658,15 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        if default_node is None:\n+            default = Parameter.empty\n+        else:\n+            default_str = ast_unparse(default_node)\n+            if isinstance(default_node, ast.Tuple) and not (default_str.startswith('(') and default_str.endswith(')')):\n+                default = '(' + default_str + ')'\n+            else:\n+                default = default_str\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..e056070 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -627,6 +627,12 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                 default = Parameter.empty\n             else:\n                 default = ast_unparse(defaults[i])\n+                try:\n+                    # keep parentheses for tuple defaults to render correctly (e.g. (1, 1, 1))\n+                    if isinstance(defaults[i], ast.Tuple):\n+                        default = f'({default})'\n+                except Exception:\n+                    pass\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -637,6 +643,12 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             default = Parameter.empty\n         else:\n             default = ast_unparse(defaults[i + posonlyargs])\n+            try:\n+                # keep parentheses for tuple defaults to render correctly (e.g. (1, 1, 1))\n+                if isinstance(defaults[i + posonlyargs], ast.Tuple):\n+                    default = f'({default})'\n+            except Exception:\n+                pass\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +660,18 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        if default_node is not None:\n+            default_str = ast_unparse(default_node)\n+            try:\n+                # keep parentheses for tuple defaults to render correctly (e.g. (1, 1, 1))\n+                if isinstance(default_node, ast.Tuple):\n+                    default_str = f'({default_str})'\n+            except Exception:\n+                pass\n+            default = default_str or Parameter.empty\n+        else:\n+            default = Parameter.empty\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..a077fbe 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,17 +626,25 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                defnode = defaults[i]\n+                default = ast_unparse(defnode)\n+                # Ensure tuple defaults keep parentheses (e.g. (1, 2, 3))\n+                if isinstance(defnode, ast.Tuple) and not (default.startswith('(') and default.endswith(')')):\n+                    default = '(' + default + ')'\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n                                     default=default, annotation=annotation))\n \n     for i, arg in enumerate(args.args):\n-        if defaults[i + posonlyargs] is Parameter.empty:\n+        defnode = defaults[i + posonlyargs]\n+        if defnode is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = ast_unparse(defnode)\n+            # Ensure tuple defaults keep parentheses (e.g. (1, 2, 3))\n+            if isinstance(defnode, ast.Tuple) and not (default.startswith('(') and default.endswith(')')):\n+                default = '(' + default + ')'\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +656,14 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        defnode = args.kw_defaults[i]\n+        if defnode is None:\n+            default = Parameter.empty\n+        else:\n+            default = ast_unparse(defnode) or Parameter.empty\n+            # Ensure tuple defaults keep parentheses (e.g. (1, 2, 3))\n+            if default is not Parameter.empty and isinstance(defnode, ast.Tuple) and not (default.startswith('(') and default.endswith(')')):\n+                default = '(' + default + ')'\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..d63441a 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -621,22 +621,27 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     for _ in range(len(defaults), positionals):\n         defaults.insert(0, Parameter.empty)\n \n+    def _unparse_default(default_node: Any) -> Any:\n+        \"\"\"Unparse default value, ensuring tuples are parenthesized.\"\"\"\n+        if default_node is None or default_node is Parameter.empty:\n+            return Parameter.empty\n+        text = ast_unparse(default_node)\n+        # Parenthesize tuple defaults to avoid being rendered as separate params\n+        if isinstance(default_node, ast.Tuple):\n+            if not (text.startswith('(') and text.endswith(')')):\n+                text = '(' + text + ')'\n+        return text or Parameter.empty\n+\n     if hasattr(args, \"posonlyargs\"):\n         for i, arg in enumerate(args.posonlyargs):  # type: ignore\n-            if defaults[i] is Parameter.empty:\n-                default = Parameter.empty\n-            else:\n-                default = ast_unparse(defaults[i])\n+            default = _unparse_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n                                     default=default, annotation=annotation))\n \n     for i, arg in enumerate(args.args):\n-        if defaults[i + posonlyargs] is Parameter.empty:\n-            default = Parameter.empty\n-        else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+        default = _unparse_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +653,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default = _unparse_default(args.kw_defaults[i])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..6d173a9 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -618,6 +618,14 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         posonlyargs = 0\n         positionals = len(args.args)\n \n+    # Helper to stringify default values while preserving tuple parentheses\n+    def stringify_default(expr):\n+        text = ast_unparse(expr)\n+        if isinstance(expr, ast.Tuple):\n+            # Ensure tuple defaults are shown with parentheses, e.g. (1, 1, 1)\n+            return f'({text})'\n+        return text\n+\n     for _ in range(len(defaults), positionals):\n         defaults.insert(0, Parameter.empty)\n \n@@ -626,7 +634,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = stringify_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +644,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = stringify_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +656,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        kw_default_expr = args.kw_defaults[i]\n+        if kw_default_expr is None:\n+            default = Parameter.empty\n+        else:\n+            default = stringify_default(kw_default_expr)\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n"
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "sphinx/util/inspect.py": [
          "\nfunction: ast_unparse\nfunction: signature_from_ast"
        ],
        "sphinx/domains/python.py": [
          "\nfunction: _parse_arglist\nline: 205"
        ]
      },
      "patches": [
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..f58f3e8 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -618,26 +618,31 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         posonlyargs = 0\n         positionals = len(args.args)\n \n+    # pad defaults for positional args\n     for _ in range(len(defaults), positionals):\n         defaults.insert(0, Parameter.empty)\n \n+    # helper to stringify default values while preserving tuple parens\n+    def _format_default(value):\n+        if value is None or value is Parameter.empty:\n+            return Parameter.empty\n+        text = ast_unparse(value)\n+        if not text:\n+            return Parameter.empty\n+        # ast for tuples does not include parentheses; add them back for display\n+        if isinstance(value, ast.Tuple):\n+            return f'({text})'\n+        return text\n+\n     if hasattr(args, \"posonlyargs\"):\n         for i, arg in enumerate(args.posonlyargs):  # type: ignore\n-            if defaults[i] is Parameter.empty:\n-                default = Parameter.empty\n-            else:\n-                default = ast_unparse(defaults[i])\n-\n+            default = _format_default(defaults[i])\n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n                                     default=default, annotation=annotation))\n \n     for i, arg in enumerate(args.args):\n-        if defaults[i + posonlyargs] is Parameter.empty:\n-            default = Parameter.empty\n-        else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n-\n+        default = _format_default(defaults[i + posonlyargs])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n                                 default=default, annotation=annotation))\n@@ -648,7 +653,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default = _format_default(args.kw_defaults[i])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..26b36ba 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,7 +626,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                text = ast_unparse(defaults[i])\n+                if isinstance(defaults[i], ast.Tuple) and not (text.startswith('(') and text.endswith(')')):\n+                    text = '(' + text + ')'\n+                default = text\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +639,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            text = ast_unparse(defaults[i + posonlyargs])\n+            if isinstance(defaults[i + posonlyargs], ast.Tuple) and not (text.startswith('(') and text.endswith(')')):\n+                text = '(' + text + ')'\n+            default = text\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +654,13 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        if args.kw_defaults[i] is None:\n+            default = Parameter.empty\n+        else:\n+            text = ast_unparse(args.kw_defaults[i])\n+            if isinstance(args.kw_defaults[i], ast.Tuple) and not (text.startswith('(') and text.endswith(')')):\n+                text = '(' + text + ')'\n+            default = text\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..389a581 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -627,6 +627,9 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                 default = Parameter.empty\n             else:\n                 default = ast_unparse(defaults[i])\n+                # Ensure tuple defaults are parenthesized for correct rendering\n+                if isinstance(defaults[i], ast.Tuple) and not (default.startswith('(') and default.endswith(')')):\n+                    default = '(' + default + ')'\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -637,6 +640,9 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             default = Parameter.empty\n         else:\n             default = ast_unparse(defaults[i + posonlyargs])\n+            # Ensure tuple defaults are parenthesized for correct rendering\n+            if isinstance(defaults[i + posonlyargs], ast.Tuple) and not (default.startswith('(') and default.endswith(')')):\n+                default = '(' + default + ')'\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +654,13 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        default = ast_unparse(default_node) or Parameter.empty\n+        # Ensure tuple defaults are parenthesized for correct rendering\n+        if default is not Parameter.empty and isinstance(default_node, ast.Tuple):\n+            default_str = str(default)\n+            if not (default_str.startswith('(') and default_str.endswith(')')):\n+                default = '(' + default_str + ')'\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..0e00787 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -618,6 +618,13 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         posonlyargs = 0\n         positionals = len(args.args)\n \n+    # Helper to stringify default values while preserving tuple parentheses\n+    def _unparse_default(value: ast.AST) -> str:\n+        text = ast_unparse(value)\n+        if isinstance(value, ast.Tuple):\n+            text = '(' + text + ')'\n+        return text\n+\n     for _ in range(len(defaults), positionals):\n         defaults.insert(0, Parameter.empty)\n \n@@ -626,7 +633,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _unparse_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +643,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _unparse_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +655,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        kw_default = args.kw_defaults[i]\n+        if kw_default is None:\n+            default = Parameter.empty\n+        else:\n+            default = _unparse_default(kw_default)\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..026d675 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -621,23 +621,24 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     for _ in range(len(defaults), positionals):\n         defaults.insert(0, Parameter.empty)\n \n+    def _format_default(node_or_empty):\n+        \"\"\"Format default value from AST, ensuring tuples are parenthesized.\"\"\"\n+        if node_or_empty is Parameter.empty:\n+            return Parameter.empty\n+        default_str = ast_unparse(node_or_empty)\n+        if isinstance(node_or_empty, ast.Tuple):\n+            default_str = f'({default_str})'\n+        return default_str\n+\n     if hasattr(args, \"posonlyargs\"):\n         for i, arg in enumerate(args.posonlyargs):  # type: ignore\n-            if defaults[i] is Parameter.empty:\n-                default = Parameter.empty\n-            else:\n-                default = ast_unparse(defaults[i])\n-\n+            default = _format_default(defaults[i])\n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n                                     default=default, annotation=annotation))\n \n     for i, arg in enumerate(args.args):\n-        if defaults[i + posonlyargs] is Parameter.empty:\n-            default = Parameter.empty\n-        else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n-\n+        default = _format_default(defaults[i + posonlyargs])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n                                 default=default, annotation=annotation))\n@@ -648,7 +649,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        if default_node is None:\n+            default = Parameter.empty\n+        else:\n+            default = _format_default(default_node)\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..0fdc3ba 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -623,20 +623,30 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n \n     if hasattr(args, \"posonlyargs\"):\n         for i, arg in enumerate(args.posonlyargs):  # type: ignore\n-            if defaults[i] is Parameter.empty:\n+            default_node = defaults[i]\n+            if default_node is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default_text = ast_unparse(default_node)\n+                if isinstance(default_node, ast.Tuple):\n+                    default = '(' + default_text + ')'\n+                else:\n+                    default = default_text\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n                                     default=default, annotation=annotation))\n \n     for i, arg in enumerate(args.args):\n-        if defaults[i + posonlyargs] is Parameter.empty:\n+        default_node = defaults[i + posonlyargs]\n+        if default_node is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default_text = ast_unparse(default_node)\n+            if isinstance(default_node, ast.Tuple):\n+                default = '(' + default_text + ')'\n+            else:\n+                default = default_text\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +658,15 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        if default_node is None:\n+            default = Parameter.empty\n+        else:\n+            default_text = ast_unparse(default_node)\n+            if isinstance(default_node, ast.Tuple):\n+                default = '(' + default_text + ')'\n+            else:\n+                default = default_text\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..b250c69 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -627,6 +627,9 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                 default = Parameter.empty\n             else:\n                 default = ast_unparse(defaults[i])\n+                # Ensure tuple defaults are represented with parentheses\n+                if isinstance(defaults[i], ast.Tuple):\n+                    default = f'({default})'\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -637,6 +640,9 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             default = Parameter.empty\n         else:\n             default = ast_unparse(defaults[i + posonlyargs])\n+            # Ensure tuple defaults are represented with parentheses\n+            if isinstance(defaults[i + posonlyargs], ast.Tuple):\n+                default = f'({default})'\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +654,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        default = ast_unparse(default_node) or Parameter.empty\n+        # Ensure tuple defaults are represented with parentheses\n+        if default is not Parameter.empty and isinstance(default_node, ast.Tuple):\n+            default = f'({default})'\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..85db31c 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -611,6 +611,15 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     args = node.args\n     defaults = list(args.defaults)\n     params = []\n+\n+    def _stringify_default(value) -> str:\n+        text = ast_unparse(value)\n+        # Ensure tuple defaults are wrapped in parentheses so commas are not\n+        # mistaken for argument separators when rendered.\n+        if isinstance(value, ast.Tuple):\n+            return '(' + text + ')'\n+        return text\n+\n     if hasattr(args, \"posonlyargs\"):\n         posonlyargs = len(args.posonlyargs)  # type: ignore\n         positionals = posonlyargs + len(args.args)\n@@ -626,7 +635,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _stringify_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +645,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _stringify_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +657,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        kw_default = args.kw_defaults[i]\n+        if kw_default is None:\n+            default = Parameter.empty\n+        else:\n+            default = _stringify_default(kw_default)\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..acc6e38 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,7 +626,12 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default_node = defaults[i]\n+                default_str = ast_unparse(default_node)\n+                # Ensure tuple defaults are parenthesized for proper rendering\n+                if isinstance(default_node, ast.Tuple):\n+                    default_str = '(' + default_str + ')'\n+                default = default_str\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +641,12 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default_node = defaults[i + posonlyargs]\n+            default_str = ast_unparse(default_node)\n+            # Ensure tuple defaults are parenthesized for proper rendering\n+            if isinstance(default_node, ast.Tuple):\n+                default_str = '(' + default_str + ')'\n+            default = default_str\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +658,15 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        if default_node is None:\n+            default = Parameter.empty\n+        else:\n+            default_str = ast_unparse(default_node)\n+            # Ensure tuple defaults are parenthesized for proper rendering\n+            if isinstance(default_node, ast.Tuple):\n+                default_str = '(' + default_str + ')'\n+            default = default_str\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..9ef6f39 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -611,6 +611,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     args = node.args\n     defaults = list(args.defaults)\n     params = []\n+\n     if hasattr(args, \"posonlyargs\"):\n         posonlyargs = len(args.posonlyargs)  # type: ignore\n         positionals = posonlyargs + len(args.args)\n@@ -621,23 +622,25 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     for _ in range(len(defaults), positionals):\n         defaults.insert(0, Parameter.empty)\n \n+    def format_default(value):\n+        # Convert an AST default value into a string suitable for display.\n+        # Ensure tuples are parenthesized so defaults like (1, 2) are preserved.\n+        if value is Parameter.empty or value is None:\n+            return Parameter.empty\n+        text = ast_unparse(value)\n+        if isinstance(value, ast.Tuple):\n+            text = f'({text})'\n+        return text or Parameter.empty\n+\n     if hasattr(args, \"posonlyargs\"):\n         for i, arg in enumerate(args.posonlyargs):  # type: ignore\n-            if defaults[i] is Parameter.empty:\n-                default = Parameter.empty\n-            else:\n-                default = ast_unparse(defaults[i])\n-\n+            default = format_default(defaults[i])\n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n                                     default=default, annotation=annotation))\n \n     for i, arg in enumerate(args.args):\n-        if defaults[i + posonlyargs] is Parameter.empty:\n-            default = Parameter.empty\n-        else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n-\n+        default = format_default(defaults[i + posonlyargs])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n                                 default=default, annotation=annotation))\n@@ -648,7 +651,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default = format_default(args.kw_defaults[i])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n"
      ]
    },
    {
      "sample_index": 2,
      "edit_locs": {
        "sphinx/domains/python.py": [
          "\nline: 198\nline: 205\nline: 206"
        ],
        "sphinx/util/inspect.py": [
          "\nfunction: signature_from_ast"
        ]
      },
      "patches": [
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..37a4723 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -618,6 +618,14 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         posonlyargs = 0\n         positionals = len(args.args)\n \n+    # Helper to format default values. Ensure tuples are parenthesized.\n+    def _format_default(expr: Any) -> str:\n+        text = ast_unparse(expr)\n+        # Parenthesize tuple defaults to avoid rendering like \"a=1, 2\"\n+        if isinstance(expr, ast.Tuple) and text and not text.startswith('('):\n+            text = '(' + text + ')'\n+        return text\n+\n     for _ in range(len(defaults), positionals):\n         defaults.insert(0, Parameter.empty)\n \n@@ -626,7 +634,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _format_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +644,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _format_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +656,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        if args.kw_defaults[i] is None:\n+            default = Parameter.empty\n+        else:\n+            default = _format_default(args.kw_defaults[i])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..327734f 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -606,6 +606,21 @@ def signature_from_str(signature: str) -> inspect.Signature:\n     return signature_from_ast(function)\n \n \n+def _format_default_value(expr):\n+    \"\"\"Return text for a default value expression suitable for signature display.\n+    Ensures tuple defaults are parenthesized.\"\"\"\n+    if expr is None or expr is Parameter.empty:\n+        return Parameter.empty\n+    text = ast_unparse(expr)\n+    # Parentheses may be omitted by the unparser for tuple expressions. For\n+    # function default values we want them preserved to avoid rendering like\n+    # \"color=1, 1, 1\" instead of \"color=(1, 1, 1)\".\n+    if isinstance(expr, ast.Tuple):\n+        if not (text.startswith('(') and text.endswith(')')):\n+            text = '(' + text + ')'\n+    return text or Parameter.empty\n+\n+\n def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     \"\"\"Create a Signature object from AST *node*.\"\"\"\n     args = node.args\n@@ -626,7 +641,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _format_default_value(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +651,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _format_default_value(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +663,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default = _format_default_value(args.kw_defaults[i])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..9a3b00f 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -618,6 +618,20 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         posonlyargs = 0\n         positionals = len(args.args)\n \n+    # helper to stringify default expressions while preserving tuple parentheses\n+    def _stringify_default(expr):\n+        if expr is None or expr is Parameter.empty:\n+            return Parameter.empty\n+        text = ast_unparse(expr)\n+        # Ensure tuple defaults are parenthesized, e.g. (1, 1, 1)\n+        try:\n+            is_tuple = isinstance(expr, ast.Tuple)\n+        except Exception:\n+            is_tuple = False\n+        if is_tuple:\n+            text = f'({text})'\n+        return text or Parameter.empty\n+\n     for _ in range(len(defaults), positionals):\n         defaults.insert(0, Parameter.empty)\n \n@@ -626,7 +640,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _stringify_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +650,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _stringify_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +662,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        kw_def = args.kw_defaults[i]\n+        if kw_def is None:\n+            default = Parameter.empty\n+        else:\n+            default = _stringify_default(kw_def)\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..19bf4ec 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -627,6 +627,15 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                 default = Parameter.empty\n             else:\n                 default = ast_unparse(defaults[i])\n+                # Ensure tuple defaults are parenthesized\n+                try:\n+                    is_tuple = isinstance(defaults[i], ast.Tuple)\n+                except Exception:\n+                    is_tuple = False\n+                if is_tuple and isinstance(default, str):\n+                    stripped = default.strip()\n+                    if not (stripped.startswith('(') and stripped.endswith(')')):\n+                        default = '(' + default + ')'\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -637,6 +646,15 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             default = Parameter.empty\n         else:\n             default = ast_unparse(defaults[i + posonlyargs])\n+            # Ensure tuple defaults are parenthesized\n+            try:\n+                is_tuple = isinstance(defaults[i + posonlyargs], ast.Tuple)\n+            except Exception:\n+                is_tuple = False\n+            if is_tuple and isinstance(default, str):\n+                stripped = default.strip()\n+                if not (stripped.startswith('(') and stripped.endswith(')')):\n+                    default = '(' + default + ')'\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +666,12 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        node_default = args.kw_defaults[i]\n+        default = ast_unparse(node_default) or Parameter.empty\n+        if default is not Parameter.empty and isinstance(node_default, ast.Tuple) and isinstance(default, str):\n+            stripped = default.strip()\n+            if not (stripped.startswith('(') and stripped.endswith(')')):\n+                default = '(' + default + ')'\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..f456870 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,7 +626,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default_node = defaults[i]\n+                default = ast_unparse(default_node)\n+                # Ensure tuple defaults are parenthesized (e.g., (1, 1, 1))\n+                if isinstance(default_node, ast.Tuple):\n+                    default = f'({default})'\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +640,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default_node = defaults[i + posonlyargs]\n+            default = ast_unparse(default_node)\n+            # Ensure tuple defaults are parenthesized (e.g., (1, 1, 1))\n+            if isinstance(default_node, ast.Tuple):\n+                default = f'({default})'\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +656,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        default = ast_unparse(default_node) or Parameter.empty\n+        # Ensure tuple defaults are parenthesized (e.g., (1, 1, 1))\n+        if default is not Parameter.empty and isinstance(default_node, ast.Tuple):\n+            default = f'({default})'\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..4e2fe58 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,7 +626,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                d = defaults[i]\n+                text = ast_unparse(d)\n+                if isinstance(d, ast.Tuple):\n+                    text = '(%s)' % text\n+                default = text\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +640,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            d = defaults[i + posonlyargs]\n+            text = ast_unparse(d)\n+            if isinstance(d, ast.Tuple):\n+                text = '(%s)' % text\n+            default = text\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +656,14 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        if args.kw_defaults[i] is None:\n+            default = Parameter.empty\n+        else:\n+            d = args.kw_defaults[i]\n+            text = ast_unparse(d)\n+            if isinstance(d, ast.Tuple):\n+                text = '(%s)' % text\n+            default = text\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..f504798 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,7 +626,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default_node = defaults[i]\n+                default = ast_unparse(default_node)\n+                if isinstance(default_node, ast.Tuple):\n+                    default = f'({default})'\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +639,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default_node = defaults[i + posonlyargs]\n+            default = ast_unparse(default_node)\n+            if isinstance(default_node, ast.Tuple):\n+                default = f'({default})'\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +654,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        default = ast_unparse(default_node) or Parameter.empty\n+        if default is not Parameter.empty and isinstance(default_node, ast.Tuple):\n+            default = f'({default})'\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..a4045a3 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -606,6 +606,18 @@ def signature_from_str(signature: str) -> inspect.Signature:\n     return signature_from_ast(function)\n \n \n+def _stringify_default(node: ast.AST) -> str:\n+    \"\"\"Return a string for default value AST node suitable for function signatures.\n+    Ensures tuples are parenthesized to avoid rendering like a comma-separated list.\"\"\"\n+    if isinstance(node, ast.Tuple):\n+        elts = [ast_unparse(elt) for elt in node.elts]\n+        inner = ', '.join(elts)\n+        if len(elts) == 1:\n+            inner += ','\n+        return f'({inner})'\n+    return ast_unparse(node)\n+\n+\n def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     \"\"\"Create a Signature object from AST *node*.\"\"\"\n     args = node.args\n@@ -626,7 +638,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _stringify_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +648,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _stringify_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +660,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        if args.kw_defaults[i] is None:\n+            default = Parameter.empty\n+        else:\n+            default = _stringify_default(args.kw_defaults[i])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..44dc89d 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -611,6 +611,21 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     args = node.args\n     defaults = list(args.defaults)\n     params = []\n+\n+    def _format_default(expr: Any) -> Any:\n+        # None or Parameter.empty mean \"no default\"\n+        if expr is None or expr is Parameter.empty:\n+            return Parameter.empty\n+        text = ast_unparse(expr)\n+        # Ensure tuple defaults are parenthesized so they don't look like\n+        # multiple parameters in rendered signatures.\n+        if isinstance(expr, ast.Tuple):\n+            if text:\n+                return f'({text})'\n+            else:\n+                return '()'\n+        return text or Parameter.empty\n+\n     if hasattr(args, \"posonlyargs\"):\n         posonlyargs = len(args.posonlyargs)  # type: ignore\n         positionals = posonlyargs + len(args.args)\n@@ -623,21 +638,13 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n \n     if hasattr(args, \"posonlyargs\"):\n         for i, arg in enumerate(args.posonlyargs):  # type: ignore\n-            if defaults[i] is Parameter.empty:\n-                default = Parameter.empty\n-            else:\n-                default = ast_unparse(defaults[i])\n-\n+            default = _format_default(defaults[i])\n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n                                     default=default, annotation=annotation))\n \n     for i, arg in enumerate(args.args):\n-        if defaults[i + posonlyargs] is Parameter.empty:\n-            default = Parameter.empty\n-        else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n-\n+        default = _format_default(defaults[i + posonlyargs])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n                                 default=default, annotation=annotation))\n@@ -648,7 +655,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default = _format_default(args.kw_defaults[i])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..e7cf6ae 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,7 +626,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default_node = defaults[i]\n+                default = ast_unparse(default_node)\n+                # Ensure tuple defaults are wrapped in parentheses\n+                if default and isinstance(default_node, ast.Tuple) and not default.startswith('('):\n+                    default = '(' + default + ')'\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +640,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default_node = defaults[i + posonlyargs]\n+            default = ast_unparse(default_node)\n+            # Ensure tuple defaults are wrapped in parentheses\n+            if default and isinstance(default_node, ast.Tuple) and not default.startswith('('):\n+                default = '(' + default + ')'\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +656,14 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        if default_node is None:\n+            default = Parameter.empty\n+        else:\n+            default = ast_unparse(default_node) or Parameter.empty\n+            # Ensure tuple defaults are wrapped in parentheses\n+            if default is not Parameter.empty and isinstance(default_node, ast.Tuple) and not default.startswith('('):\n+                default = '(' + default + ')'\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n"
      ]
    },
    {
      "sample_index": 3,
      "edit_locs": {
        "sphinx/util/inspect.py": [
          "\nfunction: ast_unparse\nfunction: signature_from_ast"
        ],
        "sphinx/domains/python.py": [
          "\nline: 205\nline: 206"
        ]
      },
      "patches": [
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..ff05db1 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -611,6 +611,17 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     args = node.args\n     defaults = list(args.defaults)\n     params = []\n+\n+    # helper: stringify default value while keeping tuple parentheses\n+    def _stringify_default(value):\n+        \"\"\"Return string for a default value node, preserving tuple parens.\"\"\"\n+        text = ast_unparse(value)\n+        if isinstance(value, ast.Tuple):\n+            # ast_unparse may omit tuple parentheses; ensure they are present\n+            if not (text.startswith('(') and text.endswith(')')):\n+                text = '(' + text + ')'\n+        return text\n+\n     if hasattr(args, \"posonlyargs\"):\n         posonlyargs = len(args.posonlyargs)  # type: ignore\n         positionals = posonlyargs + len(args.args)\n@@ -626,17 +637,18 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _stringify_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n                                     default=default, annotation=annotation))\n \n     for i, arg in enumerate(args.args):\n-        if defaults[i + posonlyargs] is Parameter.empty:\n+        d = defaults[i + posonlyargs]\n+        if d is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _stringify_default(d)\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +660,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        d = args.kw_defaults[i]\n+        if d is None:\n+            default = Parameter.empty\n+        else:\n+            default = _stringify_default(d)\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..61082ed 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,7 +626,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default_node = defaults[i]\n+                default_text = ast_unparse(default_node)\n+                if isinstance(default_node, ast.Tuple):\n+                    default_text = '(' + default_text + ')'\n+                default = default_text\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +640,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default_node = defaults[i + posonlyargs]\n+            default_text = ast_unparse(default_node)\n+            if isinstance(default_node, ast.Tuple):\n+                default_text = '(' + default_text + ')'\n+            default = default_text\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +656,14 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        if default_node is None:\n+            default = Parameter.empty\n+        else:\n+            default_text = ast_unparse(default_node)\n+            if isinstance(default_node, ast.Tuple):\n+                default_text = '(' + default_text + ')'\n+            default = default_text or Parameter.empty\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..24a6a7f 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -611,6 +611,18 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     args = node.args\n     defaults = list(args.defaults)\n     params = []\n+\n+    # Helper to stringify default values while preserving tuple parentheses\n+    def _stringify_default(expr: Optional[ast.AST]) -> Optional[str]:\n+        if expr is None:\n+            return None\n+        text = ast_unparse(expr)\n+        # ast_unparse for tuples typically omits parentheses; add them back\n+        if isinstance(expr, ast.Tuple) and text:\n+            if not (text.startswith('(') and text.endswith(')')):\n+                text = f'({text})'\n+        return text\n+\n     if hasattr(args, \"posonlyargs\"):\n         posonlyargs = len(args.posonlyargs)  # type: ignore\n         positionals = posonlyargs + len(args.args)\n@@ -626,7 +638,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _stringify_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +648,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _stringify_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +660,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default = _stringify_default(args.kw_defaults[i]) or Parameter.empty\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..584d151 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -611,6 +611,15 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     args = node.args\n     defaults = list(args.defaults)\n     params = []\n+\n+    # Ensure tuple defaults are wrapped in parentheses so they render correctly\n+    def _format_default(value):\n+        text = ast_unparse(value)\n+        if isinstance(value, ast.Tuple):\n+            if not (text.startswith('(') and text.endswith(')')):\n+                text = '(' + text + ')'\n+        return text\n+\n     if hasattr(args, \"posonlyargs\"):\n         posonlyargs = len(args.posonlyargs)  # type: ignore\n         positionals = posonlyargs + len(args.args)\n@@ -626,7 +635,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _format_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +645,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _format_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +657,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        kwdefault = args.kw_defaults[i]\n+        if kwdefault is None:\n+            default = Parameter.empty\n+        else:\n+            default = _format_default(kwdefault) or Parameter.empty\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..47dfddb 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,7 +626,12 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default_node = defaults[i]\n+                text = ast_unparse(default_node)\n+                # Ensure tuple defaults keep parentheses in textual representation\n+                if isinstance(default_node, ast.Tuple) and not (text.startswith('(') and text.endswith(')')):\n+                    text = '(' + text + ')'\n+                default = text\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +641,12 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default_node = defaults[i + posonlyargs]\n+            text = ast_unparse(default_node)\n+            # Ensure tuple defaults keep parentheses in textual representation\n+            if isinstance(default_node, ast.Tuple) and not (text.startswith('(') and text.endswith(')')):\n+                text = '(' + text + ')'\n+            default = text\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +658,15 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        if args.kw_defaults[i] is None:\n+            default = Parameter.empty\n+        else:\n+            default_node = args.kw_defaults[i]\n+            text = ast_unparse(default_node)\n+            # Ensure tuple defaults keep parentheses in textual representation\n+            if isinstance(default_node, ast.Tuple) and not (text.startswith('(') and text.endswith(')')):\n+                text = '(' + text + ')'\n+            default = text\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..22a4aa3 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -606,6 +606,18 @@ def signature_from_str(signature: str) -> inspect.Signature:\n     return signature_from_ast(function)\n \n \n+def _stringify_default(node: ast.AST) -> str:\n+    \"\"\"Return a string for a default value node, adding parentheses for tuples.\n+\n+    This keeps tuple defaults like (1, 1, 1) from being rendered without\n+    parentheses, which is ambiguous in function signatures.\n+    \"\"\"\n+    text = ast_unparse(node)\n+    if isinstance(node, ast.Tuple):\n+        return f'({text})'\n+    return text\n+\n+\n def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     \"\"\"Create a Signature object from AST *node*.\"\"\"\n     args = node.args\n@@ -626,7 +638,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _stringify_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +648,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _stringify_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +660,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        if args.kw_defaults[i] is not None:\n+            default = _stringify_default(args.kw_defaults[i])  # type: ignore[arg-type]\n+        else:\n+            default = Parameter.empty\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..baf850c 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -611,6 +611,23 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     args = node.args\n     defaults = list(args.defaults)\n     params = []\n+\n+    # Helper: unparse default values and ensure tuples are parenthesized\n+    def _stringify_default(value: Any) -> Any:\n+        if value is None:\n+            return Parameter.empty\n+        text = ast_unparse(value)\n+        if not text:\n+            return Parameter.empty\n+        # Ensure tuple defaults are shown with parentheses, e.g. \"(1, 2, 3)\"\n+        try:\n+            is_tuple = isinstance(value, ast.Tuple)\n+        except Exception:\n+            is_tuple = False\n+        if is_tuple and not (text.startswith('(') and text.endswith(')')):\n+            text = '(' + text + ')'\n+        return text\n+\n     if hasattr(args, \"posonlyargs\"):\n         posonlyargs = len(args.posonlyargs)  # type: ignore\n         positionals = posonlyargs + len(args.args)\n@@ -626,7 +643,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _stringify_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +653,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _stringify_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +665,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default = _stringify_default(args.kw_defaults[i])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..b461f56 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -611,6 +611,16 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     args = node.args\n     defaults = list(args.defaults)\n     params = []\n+\n+    def _format_default(value):\n+        \"\"\"Unparse a default value AST node preserving tuple parentheses.\"\"\"\n+        text = ast_unparse(value)\n+        # ast_unparse may omit parentheses for tuples; restore them to avoid\n+        # confusion with parameter separators in rendered signatures.\n+        if isinstance(value, ast.Tuple) and not text.startswith('('):\n+            text = '(' + text + ')'\n+        return text\n+\n     if hasattr(args, \"posonlyargs\"):\n         posonlyargs = len(args.posonlyargs)  # type: ignore\n         positionals = posonlyargs + len(args.args)\n@@ -626,7 +636,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _format_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +646,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _format_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +658,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default = _format_default(args.kw_defaults[i]) or Parameter.empty\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..4e89d2f 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -618,15 +618,29 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         posonlyargs = 0\n         positionals = len(args.args)\n \n+    # pad defaults to align with positional args\n     for _ in range(len(defaults), positionals):\n         defaults.insert(0, Parameter.empty)\n \n+    # helper to stringify defaults while preserving tuple parentheses\n+    def _stringify_default(expr):\n+        if expr is Parameter.empty:\n+            return Parameter.empty\n+        if expr is None:  # for kwonlyargs with no default\n+            return Parameter.empty\n+        text = ast_unparse(expr)\n+        if isinstance(expr, ast.Tuple):\n+            # Ensure tuple defaults are wrapped with parentheses for clarity\n+            if not text.startswith('('):\n+                text = '(' + text + ')'\n+        return text\n+\n     if hasattr(args, \"posonlyargs\"):\n         for i, arg in enumerate(args.posonlyargs):  # type: ignore\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _stringify_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +650,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _stringify_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +662,10 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        if args.kw_defaults[i] is None:\n+            default = Parameter.empty\n+        else:\n+            default = _stringify_default(args.kw_defaults[i])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
        "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..24347d8 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -626,7 +626,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default_node = defaults[i]\n+                default = ast_unparse(default_node)\n+                # Add parentheses around tuple defaults to preserve grouping in signatures\n+                if isinstance(default_node, ast.Tuple) and not (default.startswith('(') and default.endswith(')')):\n+                    default = f'({default})'\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +640,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default_node = defaults[i + posonlyargs]\n+            default = ast_unparse(default_node)\n+            # Add parentheses around tuple defaults to preserve grouping in signatures\n+            if isinstance(default_node, ast.Tuple) and not (default.startswith('(') and default.endswith(')')):\n+                default = f'({default})'\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +656,11 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default_node = args.kw_defaults[i]\n+        default = ast_unparse(default_node) or Parameter.empty\n+        # Add parentheses around tuple defaults to preserve grouping in signatures\n+        if default is not Parameter.empty and isinstance(default_node, ast.Tuple) and not (default.startswith('(') and default.endswith(')')):\n+            default = f'({default})'\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n"
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py\nindex d0a8702..37f8638 100644\n--- a/sphinx/util/inspect.py\n+++ b/sphinx/util/inspect.py\n@@ -621,12 +621,25 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n     for _ in range(len(defaults), positionals):\n         defaults.insert(0, Parameter.empty)\n \n+    def _format_default(value):\n+        # Returns Parameter.empty or a string representation of the default.\n+        if value is Parameter.empty:\n+            return Parameter.empty\n+        if value is None:\n+            # No default (used in kwonly defaults)\n+            return Parameter.empty\n+        text = ast_unparse(value)\n+        # Wrap tuple defaults with parentheses to preserve them in signatures\n+        if isinstance(value, ast.Tuple):\n+            return '(' + text + ')'\n+        return text\n+\n     if hasattr(args, \"posonlyargs\"):\n         for i, arg in enumerate(args.posonlyargs):  # type: ignore\n             if defaults[i] is Parameter.empty:\n                 default = Parameter.empty\n             else:\n-                default = ast_unparse(defaults[i])\n+                default = _format_default(defaults[i])\n \n             annotation = ast_unparse(arg.annotation) or Parameter.empty\n             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,\n@@ -636,7 +649,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n         if defaults[i + posonlyargs] is Parameter.empty:\n             default = Parameter.empty\n         else:\n-            default = ast_unparse(defaults[i + posonlyargs])\n+            default = _format_default(defaults[i + posonlyargs])\n \n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.POSITIONAL_OR_KEYWORD,\n@@ -648,7 +661,7 @@ def signature_from_ast(node: ast.FunctionDef) -> inspect.Signature:\n                                 annotation=annotation))\n \n     for i, arg in enumerate(args.kwonlyargs):\n-        default = ast_unparse(args.kw_defaults[i]) or Parameter.empty\n+        default = _format_default(args.kw_defaults[i])\n         annotation = ast_unparse(arg.annotation) or Parameter.empty\n         params.append(Parameter(arg.arg, Parameter.KEYWORD_ONLY, default=default,\n                                 annotation=annotation))\n",
  "7_resolved": false
}