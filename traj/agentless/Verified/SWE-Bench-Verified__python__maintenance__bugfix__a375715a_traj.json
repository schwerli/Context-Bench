{
  "instance_id": "SWE-Bench-Verified__python__maintenance__bugfix__a375715a",
  "original_id": "sympy__sympy-22456",
  "1_model_selected_files": [
    "sympy/codegen/ast.py"
  ],
  "2_embedding_selected_files": [
    "sympy/codegen/ast.py",
    "sympy/codegen/__init__.py",
    "sympy/codegen/fnodes.py",
    "sympy/codegen/cnodes.py",
    "sympy/codegen/cxxnodes.py",
    "sympy/codegen/algorithms.py",
    "sympy/__init__.py",
    "sympy/codegen/array_utils.py",
    "sympy/codegen/rewriting.py",
    "sympy/codegen/pynodes.py",
    "sympy/this.py",
    "sympy/abc.py",
    "sympy/codegen/pyutils.py",
    "sympy/codegen/cfunctions.py",
    "sympy/codegen/approximations.py",
    "sympy/codegen/matrix_nodes.py",
    "sympy/codegen/futils.py",
    "sympy/isympy.py",
    "sympy/galgebra.py",
    "sympy/codegen/cutils.py",
    "sympy/setup.py",
    "sympy/release.py",
    "sympy/codegen/scipy_nodes.py",
    "sympy/codegen/numpy_nodes.py",
    "sympy/conftest.py",
    "sympy/setupegg.py",
    ".ci/parse_durations_log.py"
  ],
  "3_final_combined_files": [
    "sympy/codegen/ast.py",
    "sympy/codegen/__init__.py",
    "sympy/codegen/fnodes.py"
  ],
  "4_related_elements": {
    "sympy/codegen/ast.py": [
      "class: Token\nclass: String\nclass: QuotedString\nclass: Comment\nclass: Type\nclass: Stream\nvariable: stdout\nvariable: stderr\nclass: FunctionPrototype\nclass: FunctionDefinition\nclass: FunctionCall"
    ],
    "sympy/codegen/fnodes.py": [
      "function: _name\nclass: Program\nclass: use_rename\nclass: use\nclass: Module\nclass: Subroutine\nclass: SubroutineCall"
    ],
    "sympy/codegen/__init__.py": [
      ""
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "sympy/codegen/ast.py": [
          "\nfunction: String.args"
        ]
      },
      "patches": [
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "sympy/codegen/ast.py": [
          "\nclass: String\nfunction: String.args"
        ]
      },
      "patches": [
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..f41a4b1 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,8 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n-    is_Atom = True\n \n     @classmethod\n     def _construct_text(cls, text):\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..d0bee63 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,7 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    not_in_args = []\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..0042e78 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,8 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    # Include 'text' in args so that expr.func(*expr.args) == expr holds\n+    not_in_args = []\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..d0bee63 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,7 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    not_in_args = []\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..d0bee63 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,7 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    not_in_args = []\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..7e637dc 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,9 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    # Ensure positional argument invariance: expr.func(*expr.args) == expr\n+    # by including 'text' in args.\n+    not_in_args = []\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n"
      ]
    },
    {
      "sample_index": 2,
      "edit_locs": {
        "sympy/codegen/ast.py": [
          "\nclass: String\nline: 898\nline: 899"
        ]
      },
      "patches": [
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..38dfd6b 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,7 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    # Include 'text' in args to support expr.func(*expr.args) invariance\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..d93b6c6 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,9 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    # Include `text` in `.args` so that `expr.func(*expr.args) == expr` holds.\n+    # This aligns with SymPy's Basic argument invariance.\n+    not_in_args = []\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..d0bee63 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,7 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    not_in_args = []\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..25cfe14 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,8 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    # Ensure 'text' participates in args for positional argument invariance:\n+    # expr.func(*expr.args) == expr\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..f41a4b1 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,8 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n-    is_Atom = True\n \n     @classmethod\n     def _construct_text(cls, text):\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..57e4ed0 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,8 +895,10 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n-    is_Atom = True\n+    # Ensure 'text' participates in args for positional argument invariance\n+    not_in_args = []\n+    # Include 'text' in args so that expr.func(*expr.args) == expr holds\n+    is_Atom = False\n \n     @classmethod\n     def _construct_text(cls, text):\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n"
      ]
    },
    {
      "sample_index": 3,
      "edit_locs": {
        "sympy/codegen/ast.py": [
          "\nclass: String\nfunction: String._construct_text"
        ]
      },
      "patches": [
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..938f86e 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,7 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    # Include 'text' in args to ensure expr.func(*expr.args) == expr\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..c487f32 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,9 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    # Ensure argument invariance holds: expr.func(*expr.args) == expr\n+    # by including 'text' in args.\n+    not_in_args = []\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..f41a4b1 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,8 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n-    is_Atom = True\n \n     @classmethod\n     def _construct_text(cls, text):\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..be4052b 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,7 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n+    # Include 'text' in args so that expr.func(*expr.args) == expr holds\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
        "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n"
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/sympy/codegen/ast.py b/sympy/codegen/ast.py\nindex 7a7d795..bf09463 100644\n--- a/sympy/codegen/ast.py\n+++ b/sympy/codegen/ast.py\n@@ -895,7 +895,6 @@ class String(Token):\n \n     \"\"\"\n     __slots__ = ('text',)\n-    not_in_args = ['text']\n     is_Atom = True\n \n     @classmethod\n",
  "7_resolved": true
}