{
  "instance_id": "SWE-Bench-Verified__python__maintenance__bugfix__b5cec962",
  "original_id": "sphinx-doc__sphinx-7462",
  "1_model_selected_files": [
    "sphinx/domains/python.py",
    "sphinx/util/typing.py",
    "sphinx/ext/autodoc/typehints.py",
    "sphinx/pycode/parser.py",
    "sphinx/pycode/ast.py"
  ],
  "2_embedding_selected_files": [
    "sphinx/__init__.py",
    "sphinx/util/typing.py",
    "sphinx/domains/python.py",
    "sphinx/util/__init__.py",
    "sphinx/ext/__init__.py",
    "sphinx/ext/autodoc/typehints.py",
    "sphinx/deprecation.py",
    "sphinx/domains/c.py",
    "sphinx/setup.py",
    "sphinx/ext/autodoc/mock.py",
    "sphinx/ext/doctest.py",
    "sphinx/errors.py",
    "sphinx/__main__.py",
    "sphinx/util/inspect.py",
    "sphinx/pygments_styles.py",
    "sphinx/ext/viewcode.py",
    "sphinx/ext/autodoc/importer.py",
    "sphinx/ext/autodoc/type_comment.py",
    "sphinx/ext/todo.py",
    "sphinx/project.py",
    "sphinx/setup_command.py",
    "sphinx/addnodes.py",
    "sphinx/util/smartypants.py",
    "sphinx/domains/cpp.py",
    "sphinx/ext/linkcode.py",
    "sphinx/util/cfamily.py",
    "sphinx/domains/__init__.py",
    "sphinx/ext/autodoc/__init__.py",
    "sphinx/util/pycompat.py",
    "sphinx/config.py",
    "sphinx/ext/apidoc.py",
    "sphinx/ext/coverage.py",
    "sphinx/io.py",
    "sphinx/domains/std.py",
    "sphinx/util/docutils.py",
    "sphinx/util/rst.py",
    "sphinx/ext/intersphinx.py",
    "sphinx/domains/citation.py",
    "sphinx/extension.py",
    "sphinx/util/logging.py",
    "sphinx/highlighting.py",
    "sphinx/util/docfields.py",
    "sphinx/roles.py",
    "sphinx/util/docstrings.py",
    "sphinx/util/compat.py",
    "sphinx/versioning.py",
    "sphinx/jinja2glue.py",
    "sphinx/registry.py",
    "sphinx/application.py",
    "sphinx/ext/extlinks.py"
  ],
  "3_final_combined_files": [
    "sphinx/domains/python.py",
    "sphinx/util/typing.py",
    "sphinx/ext/autodoc/typehints.py",
    "sphinx/__init__.py"
  ],
  "4_related_elements": {
    "sphinx/domains/python.py": [
      "function: unparse\nfunction: _parse_annotation\nfunction: PyObject.handle_signature\nclass: PyTypedField"
    ],
    "sphinx/util/typing.py": [
      "function: stringify\nfunction: _stringify_py37\nfunction: _stringify_py36"
    ],
    "sphinx/ext/autodoc/typehints.py": [
      "function: record_typehints\nfunction: merge_typehints\nfunction: insert_field_list\nfunction: modify_field_list"
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "sphinx/domains/python.py": [
          "\nfunction: _parse_annotation.unparse\nline: 121"
        ]
      },
      "patches": [
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..77cf9c1 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -118,7 +118,13 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if len(node.elts) == 0:\n+                # Empty tuple needs explicit parentheses to be represented correctly (e.g. Tuple[()])\n+                result.append(addnodes.desc_sig_punctuation('', '('))\n+                result.append(addnodes.desc_sig_punctuation('', ')'))\n+            else:\n+                # remove trailing comma\n+                result.pop()\n             return result\n         else:\n             raise SyntaxError  # unsupported syntax\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..7578373 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -115,6 +115,10 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             return result\n         elif isinstance(node, ast.Tuple):\n             result = []\n+            # Handle empty tuple in type annotations, e.g. Tuple[()]\n+            if len(node.elts) == 0:\n+                result.append(addnodes.desc_sig_punctuation('', '()'))\n+                return result\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..fc691a8 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -114,10 +114,14 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special-case empty tuple \"()\" which appears in annotations like Tuple[()]\n+            if len(node.elts) == 0:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # Remove trailing comma+space added by the loop\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..36ada8c 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -114,10 +114,15 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special-case empty tuple to avoid popping from an empty list and\n+            # to render as '()' (required for annotations like Tuple[()]).\n+            if len(node.elts) == 0:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove trailing comma\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..c4a3f5d 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -115,10 +115,14 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             return result\n         elif isinstance(node, ast.Tuple):\n             result = []\n+            if not node.elts:\n+                # Represent empty tuple explicitly to avoid \"Tuple[]\" and IndexError\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if result:\n+                result.pop()\n             return result\n         else:\n             raise SyntaxError  # unsupported syntax\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..180f329 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -114,10 +114,14 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special-case empty tuple to avoid popping from an empty list and to render as \"()\"\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # Remove the trailing comma separator for non-empty tuples\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..4b9142b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -114,6 +114,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Handle empty tuple specially (e.g., Tuple[()] in typing)\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..6621552 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -115,10 +115,15 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             return result\n         elif isinstance(node, ast.Tuple):\n             result = []\n-            for elem in node.elts:\n-                result.extend(unparse(elem))\n-                result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if len(node.elts) == 0:\n+                # Represent empty tuple explicitly as \"()\", e.g. Tuple[()]\n+                result.append(addnodes.desc_sig_punctuation('', '('))\n+                result.append(addnodes.desc_sig_punctuation('', ')'))\n+            else:\n+                for i, elem in enumerate(node.elts):\n+                    result.extend(unparse(elem))\n+                    if i < len(node.elts) - 1:\n+                        result.append(addnodes.desc_sig_punctuation('', ', '))\n             return result\n         else:\n             raise SyntaxError  # unsupported syntax\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..ee192a9 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -114,11 +114,19 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Handle empty tuple specially to represent \"()\" (e.g., Tuple[()])\n+            if len(node.elts) == 0:\n+                result = []\n+                result.append(addnodes.desc_sig_punctuation('', '('))\n+                result.append(addnodes.desc_sig_punctuation('', ')'))\n+                return result\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            # remove trailing comma and space for non-empty tuples\n+            if result:\n+                result.pop()\n             return result\n         else:\n             raise SyntaxError  # unsupported syntax\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..f1ef7ad 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -114,12 +114,21 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Handle tuple annotations, including the empty tuple case\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n-            return result\n+            if result:\n+                # remove trailing comma and space for non-empty tuples\n+                result.pop()\n+                return result\n+            else:\n+                # empty tuple literal: represent as \"()\"\n+                return [\n+                    addnodes.desc_sig_punctuation('', '('),\n+                    addnodes.desc_sig_punctuation('', ')')\n+                ]\n         else:\n             raise SyntaxError  # unsupported syntax\n \n"
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "sphinx/domains/python.py": [
          "\nline: 103\nline: 121"
        ]
      },
      "patches": [
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..d6f6637 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # For empty tuple (e.g. Tuple[()]) return explicit parentheses\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..fb02b9f 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -97,10 +97,12 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             return unparse(node.value)\n         elif isinstance(node, ast.List):\n             result = [addnodes.desc_sig_punctuation('', '[')]  # type: List[Node]\n-            for elem in node.elts:\n-                result.extend(unparse(elem))\n-                result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                for elem in node.elts:\n+                    result.extend(unparse(elem))\n+                    result.append(addnodes.desc_sig_punctuation('', ', '))\n+                # remove the trailing comma and space added by the loop\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +116,14 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Handle empty tuple specially to avoid popping from an empty list.\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove the trailing comma and space added by the loop\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..5e403ac 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +115,14 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Handle empty tuple specially (e.g. Tuple[()])\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # Remove trailing comma and space\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..185380e 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -96,10 +96,15 @@ def _parse_annotation(annotation: str) -> List[Node]:\n         elif isinstance(node, ast.Index):\n             return unparse(node.value)\n         elif isinstance(node, ast.List):\n+            # Handle empty list literal\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '['),\n+                        addnodes.desc_sig_punctuation('', ']')]\n             result = [addnodes.desc_sig_punctuation('', '[')]  # type: List[Node]\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove trailing comma and space\n             result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n@@ -114,10 +119,15 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Handle empty tuple literal\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '('),\n+                        addnodes.desc_sig_punctuation('', ')')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove trailing comma and space\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..bf9582e 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -97,10 +97,11 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             return unparse(node.value)\n         elif isinstance(node, ast.List):\n             result = [addnodes.desc_sig_punctuation('', '[')]  # type: List[Node]\n-            for elem in node.elts:\n-                result.extend(unparse(elem))\n-                result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                for elem in node.elts:\n+                    result.extend(unparse(elem))\n+                    result.append(addnodes.desc_sig_punctuation('', ', '))\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,10 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special-case empty tuple: it must be rendered as \"()\"\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '('),\n+                        addnodes.desc_sig_punctuation('', ')')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..c2be57e 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special-case empty tuple: represent as \"()\"\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..ad57110 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                # remove trailing comma if elements were added\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +116,15 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # For an empty tuple (e.g. used in Tuple[()]), emit parentheses explicitly.\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '('),\n+                        addnodes.desc_sig_punctuation('', ')')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove trailing comma\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..0dd6aa7 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special-case empty tuple to preserve \"()\" (e.g., for Tuple[()])\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..52d26d9 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -96,6 +96,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n         elif isinstance(node, ast.Index):\n             return unparse(node.value)\n         elif isinstance(node, ast.List):\n+            # Represent list literals, including the empty list correctly\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '[]')]\n             result = [addnodes.desc_sig_punctuation('', '[')]  # type: List[Node]\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n@@ -114,6 +117,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Represent tuple literals; handle empty tuple specially as '()'\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..552d14c 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +115,17 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # For empty tuple, render as \"()\"\n+            if not node.elts:\n+                return [\n+                    addnodes.desc_sig_punctuation('', '('),\n+                    addnodes.desc_sig_punctuation('', ')')\n+                ]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove trailing comma separator if elements were added\n             result.pop()\n             return result\n         else:\n"
      ]
    },
    {
      "sample_index": 2,
      "edit_locs": {
        "sphinx/domains/python.py": [
          "\nfunction: _parse_annotation.unparse\nline: 103\nline: 121"
        ]
      },
      "patches": [
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..f8fc27b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,10 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special-case empty tuple to preserve parentheses, e.g. Tuple[()]\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '('),\n+                        addnodes.desc_sig_punctuation('', ')')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..65788ef 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -115,6 +115,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             return result\n         elif isinstance(node, ast.Tuple):\n             result = []\n+            if not node.elts:\n+                # special case for empty tuple in annotations: Tuple[()]\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..9ceca4d 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +115,16 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Handle empty tuple specially to avoid popping from empty list\n+            if not node.elts:\n+                # Represent empty tuple as \"()\"\n+                return [addnodes.desc_sig_punctuation('', '('),\n+                        addnodes.desc_sig_punctuation('', ')')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # Remove the trailing comma and space added in the loop\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..31f4ae0 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -97,10 +97,11 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             return unparse(node.value)\n         elif isinstance(node, ast.List):\n             result = [addnodes.desc_sig_punctuation('', '[')]  # type: List[Node]\n-            for elem in node.elts:\n-                result.extend(unparse(elem))\n-                result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                for elem in node.elts:\n+                    result.extend(unparse(elem))\n+                    result.append(addnodes.desc_sig_punctuation('', ', '))\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special-case empty tuple to render as \"()\" (e.g., Tuple[()])\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..b132f54 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,7 +115,11 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # For empty tuple annotations (e.g. Tuple[()]) emit explicit \"()\"\n+            # Otherwise, join elements with \", \" without surrounding parens.\n             result = []\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..d409165 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Empty tuple in type annotations like Tuple[()] should be represented as \"()\"\n+            if len(node.elts) == 0:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..c31fb6c 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,14 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # For tuples used in annotations:\n+            # - return elements separated by \", \" (no surrounding parentheses) for non-empty tuples\n+            # - return \"()\" for empty tuples to preserve the literal empty-tuple syntax (e.g. Tuple[()])\n+            if not node.elts:\n+                return [\n+                    addnodes.desc_sig_punctuation('', '('),\n+                    addnodes.desc_sig_punctuation('', ')')\n+                ]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..568e4c3 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..a5e1d7e 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                # remove trailing comma only if elements were added\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +116,15 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n-            result = []\n+            # For empty tuple type annotations (e.g. Tuple[()]), emit \"()\".\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '('),\n+                        addnodes.desc_sig_punctuation('', ')')]\n+            result = []  # type: List[Node]\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove trailing comma\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..146348e 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,10 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # For empty tuple in annotations (e.g. Tuple[()]), emit \"()\"\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '('),\n+                        addnodes.desc_sig_punctuation('', ')')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n"
      ]
    },
    {
      "sample_index": 3,
      "edit_locs": {
        "sphinx/domains/python.py": [
          "\nline: 103\nline: 116\nline: 121"
        ],
        "sphinx/util/typing.py": [
          "\nfunction: _stringify_py37"
        ]
      },
      "patches": [
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..7600193 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -97,10 +97,12 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             return unparse(node.value)\n         elif isinstance(node, ast.List):\n             result = [addnodes.desc_sig_punctuation('', '[')]  # type: List[Node]\n-            for elem in node.elts:\n-                result.extend(unparse(elem))\n-                result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                for elem in node.elts:\n+                    result.extend(unparse(elem))\n+                    result.append(addnodes.desc_sig_punctuation('', ', '))\n+                # remove the last comma and space if elements were added\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +116,14 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # handle empty tuple specially (e.g. Tuple[()] in type annotations)\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove the last comma and space\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..0506b99 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -114,6 +114,10 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Handle empty tuple specially (e.g., Tuple[()]) to avoid IndexError\n+            # and to render as '()' inside subscriptions.\n+            if len(node.elts) == 0:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..89d18ad 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Render tuple elements separated by \", \". For empty tuples, use \"()\".\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..86db65c 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -97,10 +97,11 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             return unparse(node.value)\n         elif isinstance(node, ast.List):\n             result = [addnodes.desc_sig_punctuation('', '[')]  # type: List[Node]\n-            for elem in node.elts:\n-                result.extend(unparse(elem))\n-                result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                for elem in node.elts:\n+                    result.extend(unparse(elem))\n+                    result.append(addnodes.desc_sig_punctuation('', ', '))\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,12 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            if not node.elts:\n+                # Represent an empty tuple literal, e.g. Tuple[()]\n+                return [\n+                    addnodes.desc_sig_punctuation('', '('),\n+                    addnodes.desc_sig_punctuation('', ')')\n+                ]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..738b3e4 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -97,10 +97,12 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             return unparse(node.value)\n         elif isinstance(node, ast.List):\n             result = [addnodes.desc_sig_punctuation('', '[')]  # type: List[Node]\n-            for elem in node.elts:\n-                result.extend(unparse(elem))\n-                result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                for elem in node.elts:\n+                    result.extend(unparse(elem))\n+                    result.append(addnodes.desc_sig_punctuation('', ', '))\n+                # remove trailing comma and space\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +116,14 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special-case empty tuple: render as \"()\"\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove trailing comma and space\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..3a2f576 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -97,10 +97,12 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             return unparse(node.value)\n         elif isinstance(node, ast.List):\n             result = [addnodes.desc_sig_punctuation('', '[')]  # type: List[Node]\n-            for elem in node.elts:\n-                result.extend(unparse(elem))\n-                result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                for elem in node.elts:\n+                    result.extend(unparse(elem))\n+                    result.append(addnodes.desc_sig_punctuation('', ', '))\n+                # remove the trailing comma and space added in the loop above\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +116,14 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special-case empty tuple: represent as \"()\" (e.g. Tuple[()])\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '()')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove the trailing comma and space added in the loop above\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..e73e4aa 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,9 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            # Remove the trailing comma only if there is at least one element\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +116,15 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special handling for empty tuple: render as \"()\"\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '('),\n+                        addnodes.desc_sig_punctuation('', ')')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # Remove the trailing comma after the last element\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..77b7717 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,10 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                # remove the last added comma if elements exist\n+                result.pop()\n+            # always close the list\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +117,17 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Special-case empty tuple to render as '()'\n+            if not node.elts:\n+                return [\n+                    addnodes.desc_sig_punctuation('', '('),\n+                    addnodes.desc_sig_punctuation('', ')')\n+                ]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove the trailing comma added in the loop\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..4d883d2 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,10 +115,16 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Represent empty tuples explicitly as \"()\" to avoid errors and to\n+            # keep correct syntax when used in subscripts like Tuple[()].\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '('),\n+                        addnodes.desc_sig_punctuation('', ')')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n+            # remove the trailing comma and space added in the loop above\n             result.pop()\n             return result\n         else:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..38bf1f5 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -100,7 +100,8 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if node.elts:\n+                result.pop()\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Module):\n@@ -114,6 +115,10 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             result.append(addnodes.desc_sig_punctuation('', ']'))\n             return result\n         elif isinstance(node, ast.Tuple):\n+            # Represent empty tuple as () to support annotations like Tuple[()]\n+            if not node.elts:\n+                return [addnodes.desc_sig_punctuation('', '('),\n+                        addnodes.desc_sig_punctuation('', ')')]\n             result = []\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n"
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex c9ffcef..77cf9c1 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -118,7 +118,13 @@ def _parse_annotation(annotation: str) -> List[Node]:\n             for elem in node.elts:\n                 result.extend(unparse(elem))\n                 result.append(addnodes.desc_sig_punctuation('', ', '))\n-            result.pop()\n+            if len(node.elts) == 0:\n+                # Empty tuple needs explicit parentheses to be represented correctly (e.g. Tuple[()])\n+                result.append(addnodes.desc_sig_punctuation('', '('))\n+                result.append(addnodes.desc_sig_punctuation('', ')'))\n+            else:\n+                # remove trailing comma\n+                result.pop()\n             return result\n         else:\n             raise SyntaxError  # unsupported syntax\n",
  "7_resolved": false
}