{
  "instance_id": "SWE-Bench-Verified__python__maintenance__bugfix__0f3c174a",
  "original_id": "sphinx-doc__sphinx-8638",
  "1_model_selected_files": [
    "sphinx/domains/python.py",
    "sphinx/transforms/references.py",
    "sphinx/domains/std.py",
    "sphinx/ext/autodoc/__init__.py",
    "sphinx/roles.py"
  ],
  "2_embedding_selected_files": [
    "sphinx/ext/linkcode.py",
    "sphinx/domains/python.py",
    "sphinx/ext/viewcode.py",
    "sphinx/ext/autodoc/deprecated.py",
    "sphinx/domains/std.py",
    "sphinx/ext/autodoc/__init__.py",
    "sphinx/domains/cpp.py",
    "sphinx/transforms/references.py",
    "sphinx/util/docutils.py",
    "sphinx/transforms/__init__.py",
    "sphinx/util/__init__.py",
    "sphinx/ext/extlinks.py",
    "sphinx/domains/c.py",
    "sphinx/__init__.py",
    "sphinx/ext/autodoc/typehints.py",
    "sphinx/ext/autosectionlabel.py",
    "sphinx/ext/intersphinx.py",
    "sphinx/ext/autodoc/mock.py",
    "sphinx/environment/__init__.py",
    "sphinx/domains/javascript.py",
    "sphinx/setup.py",
    "sphinx/ext/doctest.py",
    "sphinx/ext/todo.py",
    "sphinx/domains/citation.py",
    "sphinx/versioning.py",
    "sphinx/ext/autodoc/directive.py",
    "sphinx/roles.py",
    "sphinx/pycode/parser.py",
    "sphinx/project.py",
    "sphinx/ext/graphviz.py",
    "sphinx/config.py",
    "sphinx/addnodes.py",
    "sphinx/util/cfamily.py",
    "sphinx/ext/apidoc.py",
    "sphinx/highlighting.py",
    "sphinx/ext/inheritance_diagram.py",
    "sphinx/transforms/i18n.py",
    "sphinx/jinja2glue.py",
    "sphinx/util/typing.py",
    "sphinx/deprecation.py",
    "sphinx/application.py",
    "sphinx/setup_command.py",
    "sphinx/registry.py",
    "sphinx/util/nodes.py",
    "sphinx/ext/ifconfig.py",
    "sphinx/domains/__init__.py",
    "sphinx/ext/autodoc/type_comment.py",
    "sphinx/util/smartypants.py",
    "sphinx/ext/__init__.py",
    "sphinx/transforms/post_transforms/__init__.py",
    "sphinx/transforms/compact_bullet_list.py",
    "sphinx/ext/autodoc/importer.py"
  ],
  "3_final_combined_files": [
    "sphinx/domains/python.py",
    "sphinx/transforms/references.py",
    "sphinx/domains/std.py",
    "sphinx/ext/linkcode.py",
    "sphinx/ext/viewcode.py"
  ],
  "4_related_elements": {
    "sphinx/domains/python.py": [
      "class: PyObject\nclass: PyTypedField\nclass: PyField\nclass: PyXrefMixin\nclass: PyXRefRole\nclass: PythonDomain\nclass: PyAttribute\nclass: PyVariable"
    ],
    "sphinx/transforms/references.py": [
      "class: SphinxDomains"
    ],
    "sphinx/domains/std.py": [
      ""
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "sphinx/domains/python.py": [
          "\nline: 357"
        ]
      },
      "patches": [
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n"
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "sphinx/domains/python.py": [
          "\nline: 357"
        ]
      },
      "patches": [
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..fb39dc6 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,9 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        # Do not cross-link variable names by default to avoid spurious links\n+        # to unrelated objects with the same name elsewhere in the project.\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n"
      ]
    },
    {
      "sample_index": 2,
      "edit_locs": {
        "sphinx/domains/python.py": [
          "\nline: 357\nline: 358\nline: 359\nline: 360\nfunction: PythonDomain.find_obj\nline: 1159\nline: 1160\nline: 1161\nline: 1162\nline: 1163"
        ]
      },
      "patches": [
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..fdee3bf 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,9 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        # Use 'attr' role for variables to avoid broad cross-linking via 'obj'\n+        # and restrict resolution to attributes in the current class/module.\n+        PyTypedField('variable', label=_('Variables'), rolename='attr',\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n@@ -1155,11 +1157,15 @@ class PythonDomain(Domain):\n                     elif name in self.objects and self.objects[name].objtype in objtypes:\n                         newname = name\n                     else:\n-                        # \"fuzzy\" searching mode\n-                        searchname = '.' + name\n-                        matches = [(oname, self.objects[oname]) for oname in self.objects\n-                                   if oname.endswith(searchname) and\n-                                   self.objects[oname].objtype in objtypes]\n+                        # \"fuzzy\" searching mode (disabled for attributes to prevent\n+                        # accidental cross-linking of instance variables to unrelated targets)\n+                        if type == 'attr':\n+                            matches = []\n+                        else:\n+                            searchname = '.' + name\n+                            matches = [(oname, self.objects[oname]) for oname in self.objects\n+                                       if oname.endswith(searchname) and\n+                                       self.objects[oname].objtype in objtypes]\n         else:\n             # NOTE: searching for exact match, object type is not considered\n             if name in self.objects:\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..9f8af38 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,10 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        # Do not cross-link variable names by default; they often collide with\n+        # unrelated objects elsewhere (e.g. globals), leading to misleading links.\n+        # Users can add explicit links in their docs if desired.\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..f39133f 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,8 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        # Do not auto-link variable names; they are often unrelated across modules/classes.\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..19ad006 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -1145,10 +1145,18 @@ class PythonDomain(Domain):\n                 objtypes = self.objtypes_for_role(type)\n             if objtypes is not None:\n                 if modname and classname:\n+                    # Restrict lookups to the class context to avoid linking\n+                    # instance variables to unrelated objects elsewhere.\n                     fullname = modname + '.' + classname + '.' + name\n                     if fullname in self.objects and self.objects[fullname].objtype in objtypes:\n                         newname = fullname\n-                if not newname:\n+                    elif classname + '.' + name in self.objects and \\\n+                         self.objects[classname + '.' + name].objtype in objtypes:\n+                        newname = classname + '.' + name\n+                    # Do not fall back to module-level or global names when a class\n+                    # context is present; instance variables documented via fields\n+                    # should not autolink to unrelated objects.\n+                else:\n                     if modname and modname + '.' + name in self.objects and \\\n                        self.objects[modname + '.' + name].objtype in objtypes:\n                         newname = modname + '.' + name\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..fdbb0db 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -1162,18 +1162,23 @@ class PythonDomain(Domain):\n                                    self.objects[oname].objtype in objtypes]\n         else:\n             # NOTE: searching for exact match, object type is not considered\n-            if name in self.objects:\n-                newname = name\n-            elif type == 'mod':\n+            if type == 'mod':\n                 # only exact matches allowed for modules\n-                return []\n-            elif classname and classname + '.' + name in self.objects:\n-                newname = classname + '.' + name\n-            elif modname and modname + '.' + name in self.objects:\n-                newname = modname + '.' + name\n-            elif modname and classname and \\\n-                    modname + '.' + classname + '.' + name in self.objects:\n-                newname = modname + '.' + classname + '.' + name\n+                if name in self.objects:\n+                    newname = name\n+                else:\n+                    return []\n+            else:\n+                # Prefer scoped names first to avoid linking to unrelated globals\n+                if modname and classname and \\\n+                        modname + '.' + classname + '.' + name in self.objects:\n+                    newname = modname + '.' + classname + '.' + name\n+                elif classname and classname + '.' + name in self.objects:\n+                    newname = classname + '.' + name\n+                elif modname and modname + '.' + name in self.objects:\n+                    newname = modname + '.' + name\n+                elif name in self.objects:\n+                    newname = name\n         if newname is not None:\n             matches.append((newname, self.objects[newname]))\n         return matches\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n"
      ]
    },
    {
      "sample_index": 3,
      "edit_locs": {
        "sphinx/domains/python.py": [
          "\nline: 357"
        ]
      },
      "patches": [
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2d2d7dc 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,9 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        # Avoid auto-linking variable names; using the 'obj' role here\n+        # caused unrelated cross-references for :ivar/:cvar fields.\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..bd3ca8b 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'),\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
        "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n"
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py\nindex ec7a051..2415732 100644\n--- a/sphinx/domains/python.py\n+++ b/sphinx/domains/python.py\n@@ -354,7 +354,7 @@ class PyObject(ObjectDescription):\n                             'keyword', 'kwarg', 'kwparam'),\n                      typerolename='class', typenames=('paramtype', 'type'),\n                      can_collapse=True),\n-        PyTypedField('variable', label=_('Variables'), rolename='obj',\n+        PyTypedField('variable', label=_('Variables'), rolename=None,\n                      names=('var', 'ivar', 'cvar'),\n                      typerolename='class', typenames=('vartype',),\n                      can_collapse=True),\n",
  "7_resolved": true
}