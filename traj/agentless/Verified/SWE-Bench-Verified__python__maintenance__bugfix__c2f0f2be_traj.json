{
  "instance_id": "SWE-Bench-Verified__python__maintenance__bugfix__c2f0f2be",
  "original_id": "pytest-dev__pytest-7205",
  "1_model_selected_files": [
    "src/_pytest/setuponly.py"
  ],
  "2_embedding_selected_files": [
    "src/_pytest/setuponly.py",
    "src/_pytest/setupplan.py",
    "src/_pytest/python.py",
    "src/_pytest/deprecated.py",
    "src/_pytest/terminal.py",
    "src/_pytest/fixtures.py",
    "src/_pytest/runner.py",
    "src/_pytest/warnings.py",
    "src/_pytest/pytester.py",
    "src/_pytest/faulthandler.py",
    "src/_pytest/unittest.py",
    "src/_pytest/doctest.py",
    "src/_pytest/warning_types.py",
    "src/_pytest/hookspec.py",
    "src/_pytest/config/findpaths.py",
    "src/_pytest/cacheprovider.py",
    "src/_pytest/helpconfig.py",
    "src/_pytest/debugging.py",
    "src/_pytest/compat.py",
    "src/_pytest/main.py",
    "src/_pytest/config/__init__.py",
    "src/_pytest/logging.py",
    "src/_pytest/reports.py",
    "src/_pytest/junitxml.py",
    "src/_pytest/recwarn.py",
    "src/_pytest/pastebin.py",
    "src/_pytest/__init__.py",
    "src/_pytest/stepwise.py",
    "src/_pytest/capture.py",
    "src/_pytest/skipping.py",
    "src/_pytest/python_api.py",
    "src/_pytest/config/exceptions.py",
    "src/_pytest/_io/__init__.py",
    "src/_pytest/outcomes.py",
    "src/_pytest/tmpdir.py",
    "src/_pytest/nose.py",
    "src/_pytest/monkeypatch.py",
    "src/_pytest/resultlog.py",
    "src/_pytest/pathlib.py",
    "src/_pytest/_io/terminalwriter.py",
    "src/_pytest/config/argparsing.py",
    "src/_pytest/nodes.py",
    "src/_pytest/_io/saferepr.py",
    "src/_pytest/freeze_support.py"
  ],
  "3_final_combined_files": [
    "src/_pytest/setuponly.py",
    "src/_pytest/setupplan.py",
    "src/_pytest/python.py"
  ],
  "4_related_elements": {
    "src/_pytest/setuponly.py": [
      "function: _show_fixture_action\nfunction: pytest_fixture_setup\nfunction: pytest_fixture_post_finalizer"
    ],
    "src/_pytest/setupplan.py": [
      "function: pytest_fixture_setup\nfunction: pytest_cmdline_main"
    ],
    "src/_pytest/python.py": [
      "function: _ascii_escaped_by_config\nfunction: _idval\nfunction: _idvalset\nfunction: idmaker"
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "src/_pytest/setuponly.py": [
          "\nfunction: _show_fixture_action\nline: 69"
        ]
      },
      "patches": [
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..75d4221 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -44,6 +44,8 @@ def pytest_fixture_post_finalizer(fixturedef) -> None:\n \n \n def _show_fixture_action(fixturedef, msg):\n+    from _pytest._io.saferepr import saferepr\n+\n     config = fixturedef._fixturemanager.config\n     capman = config.pluginmanager.getplugin(\"capturemanager\")\n     if capman:\n@@ -66,7 +68,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..7533b76 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,9 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use saferepr to avoid BytesWarning when cached_param is bytes (e.g. with -bb).\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..66bf4b6 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,9 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use saferepr to avoid implicit str() on bytes and other odd objects.\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..8b1d052 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,9 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use saferepr to avoid BytesWarning and ensure robust representation\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n"
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "src/_pytest/setuponly.py": [
          "\nline: 69\nfunction: _show_fixture_action"
        ]
      },
      "patches": [
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..c7f0762 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +77,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..dfaafa8 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,9 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use saferepr to avoid BytesWarning and provide a safe, short repr\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..b42d62b 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,9 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use saferepr to avoid implicit str() on bytes and other problematic types\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..a2f2699 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,9 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use saferepr to avoid BytesWarning when cached_param is bytes\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..00be31d 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -34,6 +34,9 @@ def pytest_fixture_setup(fixturedef, request):\n         _show_fixture_action(fixturedef, \"SETUP\")\n \n \n+from _pytest._io.saferepr import saferepr\n+\n+\n def pytest_fixture_post_finalizer(fixturedef) -> None:\n     if fixturedef.cached_result is not None:\n         config = fixturedef._fixturemanager.config\n@@ -66,7 +69,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +80,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n"
      ]
    },
    {
      "sample_index": 2,
      "edit_locs": {
        "src/_pytest/setuponly.py": [
          "\nfunction: _show_fixture_action\nline: 69"
        ]
      },
      "patches": [
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..c4a704a 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,9 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use repr() to avoid implicitly calling str() on bytes, which triggers\n+        # BytesWarning when Python is run with -bb.\n+        tw.write(\"[{}]\".format(repr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..cbc2a78 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,9 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use saferepr to avoid implicit str() on bytes which triggers BytesWarning under -bb\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..f3b0502 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use repr to avoid implicit str() on bytes which triggers BytesWarning under -bb.\n+        tw.write(\"[{}]\".format(repr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..24eff66 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{!r}]\".format(fixturedef.cached_param))\n \n     tw.flush()\n \n@@ -77,4 +77,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..75d4221 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -44,6 +44,8 @@ def pytest_fixture_post_finalizer(fixturedef) -> None:\n \n \n def _show_fixture_action(fixturedef, msg):\n+    from _pytest._io.saferepr import saferepr\n+\n     config = fixturedef._fixturemanager.config\n     capman = config.pluginmanager.getplugin(\"capturemanager\")\n     if capman:\n@@ -66,7 +68,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..c4f5f06 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -34,6 +34,8 @@ def pytest_fixture_setup(fixturedef, request):\n         _show_fixture_action(fixturedef, \"SETUP\")\n \n \n+from _pytest._io.saferepr import saferepr\n+\n def pytest_fixture_post_finalizer(fixturedef) -> None:\n     if fixturedef.cached_result is not None:\n         config = fixturedef._fixturemanager.config\n@@ -66,7 +68,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n"
      ]
    },
    {
      "sample_index": 3,
      "edit_locs": {
        "src/_pytest/setuponly.py": [
          "\nfunction: _show_fixture_action\nline: 69"
        ]
      },
      "patches": [
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..54301e6 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,12 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use repr/saferepr to avoid implicit str() on bytes under -bb\n+        try:\n+            from _pytest._io.saferepr import saferepr\n+        except Exception:\n+            saferepr = repr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +82,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..91805bf 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,9 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use saferepr to avoid BytesWarning under -bb (don't call str() on bytes).\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..24eff66 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{!r}]\".format(fixturedef.cached_param))\n \n     tw.flush()\n \n@@ -77,4 +77,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..75d4221 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -44,6 +44,8 @@ def pytest_fixture_post_finalizer(fixturedef) -> None:\n \n \n def _show_fixture_action(fixturedef, msg):\n+    from _pytest._io.saferepr import saferepr\n+\n     config = fixturedef._fixturemanager.config\n     capman = config.pluginmanager.getplugin(\"capturemanager\")\n     if capman:\n@@ -66,7 +68,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..13c0edf 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,9 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # use saferepr to avoid str() on bytes when formatting parameters\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..b313149 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        # Use repr to avoid calling str() on bytes (which triggers BytesWarning under -bb)\n+        tw.write(\"[{!r}]\".format(fixturedef.cached_param))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..24eff66 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{!r}]\".format(fixturedef.cached_param))\n \n     tw.flush()\n \n@@ -77,4 +77,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
        "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..75d4221 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -44,6 +44,8 @@ def pytest_fixture_post_finalizer(fixturedef) -> None:\n \n \n def _show_fixture_action(fixturedef, msg):\n+    from _pytest._io.saferepr import saferepr\n+\n     config = fixturedef._fixturemanager.config\n     capman = config.pluginmanager.getplugin(\"capturemanager\")\n     if capman:\n@@ -66,7 +68,7 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +79,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n"
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/src/_pytest/setuponly.py b/src/_pytest/setuponly.py\nindex 7d5414b..3243695 100644\n--- a/src/_pytest/setuponly.py\n+++ b/src/_pytest/setuponly.py\n@@ -66,7 +66,8 @@ def _show_fixture_action(fixturedef, msg):\n             tw.write(\" (fixtures used: {})\".format(\", \".join(deps)))\n \n     if hasattr(fixturedef, \"cached_param\"):\n-        tw.write(\"[{}]\".format(fixturedef.cached_param))\n+        from _pytest._io.saferepr import saferepr\n+        tw.write(\"[{}]\".format(saferepr(fixturedef.cached_param)))\n \n     tw.flush()\n \n@@ -77,4 +78,4 @@ def _show_fixture_action(fixturedef, msg):\n @pytest.hookimpl(tryfirst=True)\n def pytest_cmdline_main(config):\n     if config.option.setuponly:\n-        config.option.setupshow = True\n+        config.option.setupshow = True\n",
  "7_resolved": true
}