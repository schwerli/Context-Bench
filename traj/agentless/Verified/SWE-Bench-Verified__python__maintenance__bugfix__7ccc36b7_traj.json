{
  "instance_id": "SWE-Bench-Verified__python__maintenance__bugfix__7ccc36b7",
  "original_id": "matplotlib__matplotlib-23314",
  "1_model_selected_files": [
    "lib/mpl_toolkits/mplot3d/axes3d.py",
    "lib/mpl_toolkits/mplot3d/axis3d.py",
    "lib/mpl_toolkits/mplot3d/art3d.py",
    "lib/matplotlib/artist.py",
    "lib/matplotlib/axes/_base.py"
  ],
  "2_embedding_selected_files": [
    "lib/matplotlib/pyplot.py",
    "lib/mpl_toolkits/mplot3d/axes3d.py",
    "lib/matplotlib/gridspec.py",
    "lib/mpl_toolkits/mplot3d/axis3d.py",
    "lib/matplotlib/_layoutgrid.py",
    "lib/matplotlib/figure.py",
    "lib/matplotlib/rcsetup.py",
    "lib/matplotlib/axes/_subplots.py",
    "lib/matplotlib/projections/geo.py",
    "lib/mpl_toolkits/mplot3d/art3d.py",
    "lib/mpl_toolkits/mplot3d/__init__.py",
    "lib/matplotlib/backend_tools.py",
    "lib/matplotlib/artist.py",
    "lib/matplotlib/backend_bases.py",
    "lib/matplotlib/axis.py",
    "lib/matplotlib/_pylab_helpers.py",
    "lib/matplotlib/_cm.py",
    "lib/matplotlib/_constrained_layout.py",
    "lib/matplotlib/axes/_axes.py",
    "lib/matplotlib/axes/_base.py",
    "lib/matplotlib/widgets.py",
    "lib/matplotlib/projections/polar.py",
    "lib/matplotlib/colorbar.py",
    "lib/matplotlib/collections.py",
    "lib/matplotlib/_cm_listed.py",
    "lib/matplotlib/image.py",
    "lib/matplotlib/patches.py",
    "lib/matplotlib/projections/__init__.py",
    "lib/matplotlib/tight_layout.py",
    "lib/matplotlib/tight_bbox.py",
    "lib/matplotlib/axes/__init__.py",
    "lib/matplotlib/axes/_secondary_axes.py",
    "lib/matplotlib/ticker.py",
    "lib/matplotlib/__init__.py"
  ],
  "3_final_combined_files": [
    "lib/mpl_toolkits/mplot3d/axes3d.py",
    "lib/mpl_toolkits/mplot3d/axis3d.py",
    "lib/mpl_toolkits/mplot3d/art3d.py",
    "lib/matplotlib/pyplot.py",
    "lib/matplotlib/gridspec.py"
  ],
  "4_related_elements": {
    "lib/mpl_toolkits/mplot3d/axes3d.py": [
      "function: Axes3D.draw"
    ],
    "lib/mpl_toolkits/mplot3d/axis3d.py": [
      "class: Axis"
    ],
    "lib/mpl_toolkits/mplot3d/art3d.py": [
      "class: Text3D\nclass: Line3D\nclass: Line3DCollection\nclass: Patch3D\nclass: PathPatch3D\nclass: Patch3DCollection\nclass: Path3DCollection\nclass: Poly3DCollection"
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "lib/mpl_toolkits/mplot3d/axes3d.py": [
          "\nfunction: Axes3D.draw"
        ],
        "lib/mpl_toolkits/mplot3d/axis3d.py": [
          "\nfunction: Axis.draw\nfunction: Axis.draw_pane"
        ]
      },
      "patches": [
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..f8abef3 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility: if the Axes is not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..8dc4c42 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,10 +387,15 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect artist visibility: if the Axes3D is not visible, do not draw.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n-        # draw the background patch\n-        self.patch.draw(renderer)\n+        # draw the background patch (only if visible)\n+        if self.patch.get_visible():\n+            self.patch.draw(renderer)\n         self._frameon = False\n \n         # first, set the aspect\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..faa1e24 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,9 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility: if the Axes3D is not visible, don't draw anything.\n+        if not self.get_visible():\n+            return\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..1b34c59 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,11 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the Axes. If the Axes is not visible,\n+        # do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..e961c69 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the 3D axes; if not visible, do not draw.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..1ba9884 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -389,6 +389,10 @@ class Axes3D(Axes):\n     def draw(self, renderer):\n         self._unstale_viewLim()\n \n+        # Respect Axes visibility: if not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         # draw the background patch\n         self.patch.draw(renderer)\n         self._frameon = False\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..8d43ad9 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # If the Axes is not visible, skip drawing entirely.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\ndiff --git a/lib/mpl_toolkits/mplot3d/axis3d.py b/lib/mpl_toolkits/mplot3d/axis3d.py\nindex 4d67391..7006bea 100644\n--- a/lib/mpl_toolkits/mplot3d/axis3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axis3d.py\n@@ -297,6 +297,9 @@ class Axis(maxis.XAxis):\n \n     @artist.allow_rasterization\n     def draw(self, renderer):\n+        # If this axis is not visible, skip drawing.\n+        if not self.get_visible():\n+            return\n         self.label._transform = self.axes.transData\n         renderer.open_group(\"axis3d\", gid=self.get_gid())\n \n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..4a69d8e 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect Axes visibility for 3D axes; if the Axes is not visible,\n+        # do not draw any of its components.\n+        if not self.get_visible():\n+            return\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..e0cea76 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,10 +387,15 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # If the Axes is not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n-        # draw the background patch\n-        self.patch.draw(renderer)\n+        # draw the background patch (only if it's visible)\n+        if self.patch.get_visible():\n+            self.patch.draw(renderer)\n         self._frameon = False\n \n         # first, set the aspect\ndiff --git a/lib/mpl_toolkits/mplot3d/axis3d.py b/lib/mpl_toolkits/mplot3d/axis3d.py\nindex 4d67391..be02a6c 100644\n--- a/lib/mpl_toolkits/mplot3d/axis3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axis3d.py\n@@ -297,6 +297,9 @@ class Axis(maxis.XAxis):\n \n     @artist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect Axis visibility: if the axis is not visible, skip drawing.\n+        if not self.get_visible():\n+            return\n         self.label._transform = self.axes.transData\n         renderer.open_group(\"axis3d\", gid=self.get_gid())\n \n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..5bdd1c4 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility: do not draw if the Axes is hidden\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n"
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "lib/mpl_toolkits/mplot3d/axes3d.py": [
          "\nfunction: Axes3D.draw\nline: 389"
        ],
        "lib/mpl_toolkits/mplot3d/axis3d.py": [
          "\nfunction: Axis.draw\nline: 299"
        ]
      },
      "patches": [
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..f8abef3 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility: if the Axes is not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..257303b 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the Axes; if not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..6b83121 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,11 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect Axes visibility: if not visible, do not draw anything.\n+        if not self.get_visible():\n+            self.stale = False\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..ba53cc6 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,11 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect the axes visibility flag; if the axes is not visible,\n+        # do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..7bc78c5 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility: do not draw if the Axes3D is set invisible.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..34af772 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect the artist visibility flag; if not visible, do not draw.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\ndiff --git a/lib/mpl_toolkits/mplot3d/axis3d.py b/lib/mpl_toolkits/mplot3d/axis3d.py\nindex 4d67391..dddf403 100644\n--- a/lib/mpl_toolkits/mplot3d/axis3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axis3d.py\n@@ -297,6 +297,10 @@ class Axis(maxis.XAxis):\n \n     @artist.allow_rasterization\n     def draw(self, renderer):\n+        # Do not draw if this axis artist is not visible.\n+        if not self.get_visible():\n+            return\n+\n         self.label._transform = self.axes.transData\n         renderer.open_group(\"axis3d\", gid=self.get_gid())\n \n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..5b8e382 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect the visibility state of the Axes; if not visible, do not draw.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..908a541 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the Axes3D; if not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..9845624 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility like 2D Axes: if the axes is not visible,\n+        # do not draw anything.\n+        if not self.get_visible():\n+            return\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..7bcd9c9 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect overall Axes visibility: if not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n"
      ]
    },
    {
      "sample_index": 2,
      "edit_locs": {
        "lib/mpl_toolkits/mplot3d/axes3d.py": [
          "\nfunction: Axes3D.draw\nline: 389"
        ],
        "lib/mpl_toolkits/mplot3d/axis3d.py": [
          "\nfunction: Axis.draw\nline: 299\nfunction: Axis.draw_pane\nline: 281"
        ]
      },
      "patches": [
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..257303b 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the Axes; if not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\ndiff --git a/lib/mpl_toolkits/mplot3d/axis3d.py b/lib/mpl_toolkits/mplot3d/axis3d.py\nindex 4d67391..1744329 100644\n--- a/lib/mpl_toolkits/mplot3d/axis3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axis3d.py\n@@ -297,6 +297,9 @@ class Axis(maxis.XAxis):\n \n     @artist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the Axis; if not visible, do not draw.\n+        if not self.get_visible():\n+            return\n         self.label._transform = self.axes.transData\n         renderer.open_group(\"axis3d\", gid=self.get_gid())\n \n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..a86cb0d 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility: if the Axes is not visible, do not draw.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..e544e71 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,9 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the Axes; if hidden, do not draw anything.\n+        if not self.get_visible():\n+            return\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..4beb4b3 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect Axes visibility; if not visible, don't draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..257303b 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the Axes; if not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..921219f 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the axes; if not visible, skip drawing entirely.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..ec278fc 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the Axes; if it's not visible, do nothing.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..576c125 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,9 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Honor Axes visibility; if the Axes is invisible, skip drawing.\n+        if not self.get_visible():\n+            return\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..ee7517b 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,10 +387,15 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Honor the Axes' visibility. If it's not visible, do nothing.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n-        self.patch.draw(renderer)\n+        if self.patch.get_visible():\n+            self.patch.draw(renderer)\n         self._frameon = False\n \n         # first, set the aspect\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..351134e 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the Axes; if not visible, do nothing.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n"
      ]
    },
    {
      "sample_index": 3,
      "edit_locs": {
        "lib/mpl_toolkits/mplot3d/axes3d.py": [
          "\nfunction: Axes3D.draw"
        ],
        "lib/mpl_toolkits/mplot3d/axis3d.py": [
          "\nfunction: Axis.draw\nfunction: Axis.draw_pane"
        ]
      },
      "patches": [
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..bf636ea 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -389,6 +389,10 @@ class Axes3D(Axes):\n     def draw(self, renderer):\n         self._unstale_viewLim()\n \n+        # Respect visibility: if the Axes3D is not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         # draw the background patch\n         self.patch.draw(renderer)\n         self._frameon = False\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..f8abef3 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility: if the Axes is not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..3e927c0 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,9 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Honor visibility of the Axes; if not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..f8abef3 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility: if the Axes is not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..e093771 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,11 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility: do not draw when Axes is invisible.\n+        if not self.get_visible():\n+            self.stale = False\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..c6df829 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,9 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the 3D Axes; if invisible, skip drawing entirely.\n+        if not self.get_visible():\n+            return\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..f0444a9 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect Axes visibility; if the Axes is not visible, do not draw.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..257303b 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the Axes; if not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\ndiff --git a/lib/mpl_toolkits/mplot3d/axis3d.py b/lib/mpl_toolkits/mplot3d/axis3d.py\nindex 4d67391..bc12500 100644\n--- a/lib/mpl_toolkits/mplot3d/axis3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axis3d.py\n@@ -297,6 +297,9 @@ class Axis(maxis.XAxis):\n \n     @artist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of the Axis; if not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n         self.label._transform = self.axes.transData\n         renderer.open_group(\"axis3d\", gid=self.get_gid())\n \n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..7225753 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility: do not draw anything if the Axes is not visible.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\ndiff --git a/lib/mpl_toolkits/mplot3d/axis3d.py b/lib/mpl_toolkits/mplot3d/axis3d.py\nindex 4d67391..66760f2 100644\n--- a/lib/mpl_toolkits/mplot3d/axis3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axis3d.py\n@@ -297,6 +297,10 @@ class Axis(maxis.XAxis):\n \n     @artist.allow_rasterization\n     def draw(self, renderer):\n+        # Do not draw if the Axis is not visible.\n+        if not self.get_visible():\n+            return\n+\n         self.label._transform = self.axes.transData\n         renderer.open_group(\"axis3d\", gid=self.get_gid())\n \n",
        "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..fc185bc 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,9 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect Axes visibility; if not visible, skip drawing entirely.\n+        if not self.get_visible():\n+            return\n         self._unstale_viewLim()\n \n         # draw the background patch\ndiff --git a/lib/mpl_toolkits/mplot3d/axis3d.py b/lib/mpl_toolkits/mplot3d/axis3d.py\nindex 4d67391..25cae79 100644\n--- a/lib/mpl_toolkits/mplot3d/axis3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axis3d.py\n@@ -279,6 +279,9 @@ class Axis(maxis.XAxis):\n         return tickdir\n \n     def draw_pane(self, renderer):\n+        # Do not draw pane if the parent Axes or this Axis is not visible.\n+        if not self.axes.get_visible() or not self.get_visible():\n+            return\n         renderer.open_group('pane3d', gid=self.get_gid())\n \n         mins, maxs, centers, deltas, tc, highs = self._get_coord_info(renderer)\n@@ -297,6 +300,9 @@ class Axis(maxis.XAxis):\n \n     @artist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility of both the Axis and its parent Axes.\n+        if not self.axes.get_visible() or not self.get_visible():\n+            return\n         self.label._transform = self.axes.transData\n         renderer.open_group(\"axis3d\", gid=self.get_gid())\n \n"
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 392f89b..f8abef3 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,10 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        # Respect visibility: if the Axes is not visible, do not draw anything.\n+        if not self.get_visible():\n+            return\n+\n         self._unstale_viewLim()\n \n         # draw the background patch\n",
  "7_resolved": true
}