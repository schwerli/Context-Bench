{
  "instance_id": "SWE-Bench-Verified__python__maintenance__bugfix__2d5d4dcd",
  "original_id": "django__django-11400",
  "1_model_selected_files": [
    "django/contrib/admin/filters.py"
  ],
  "2_embedding_selected_files": [
    "django/contrib/admin/filters.py",
    "django/contrib/admin/views/main.py",
    "django/contrib/admin/options.py",
    "django/db/models/fields/related.py",
    "django/contrib/admin/utils.py",
    "django/db/models/fields/related_descriptors.py",
    "django/contrib/admin/exceptions.py",
    "django/db/models/fields/reverse_related.py",
    "django/db/models/sql/compiler.py",
    "django/db/models/base.py",
    "django/contrib/admin/__init__.py",
    "django/db/models/__init__.py",
    "django/db/models/fields/related_lookups.py",
    "django/contrib/admin/checks.py",
    "django/contrib/admin/helpers.py",
    "django/contrib/admin/widgets.py",
    "django/contrib/admin/templatetags/admin_list.py",
    "django/db/models/fields/proxy.py",
    "django/db/models/options.py",
    "django/db/models/sql/query.py",
    "django/db/models/query.py",
    "django/db/models/query_utils.py",
    "django/contrib/admin/views/autocomplete.py",
    "django/db/models/fields/__init__.py",
    "django/db/backends/sqlite3/schema.py",
    "django/db/backends/mysql/schema.py",
    "django/db/models/sql/__init__.py",
    "django/contrib/admin/views/__init__.py",
    "django/contrib/admin/templatetags/admin_urls.py",
    "django/db/migrations/operations/utils.py",
    "django/db/models/constraints.py",
    "django/db/migrations/autodetector.py",
    "django/contrib/admin/migrations/0003_logentry_add_action_flag_choices.py",
    "django/db/models/manager.py",
    "django/contrib/admin/actions.py",
    "django/db/models/sql/subqueries.py",
    "django/db/models/deletion.py",
    "django/contrib/admin/sites.py",
    "django/db/migrations/operations/fields.py",
    "django/contrib/admin/migrations/0002_logentry_remove_auto_add.py",
    "django/db/models/lookups.py"
  ],
  "3_final_combined_files": [
    "django/contrib/admin/filters.py",
    "django/contrib/admin/views/main.py",
    "django/contrib/admin/options.py"
  ],
  "4_related_elements": {
    "django/contrib/admin/filters.py": [
      "class: RelatedFieldListFilter\nclass: RelatedOnlyFieldListFilter"
    ],
    "django/contrib/admin/options.py": [
      "variable: BaseModelAdmin.ordering\nfunction: BaseModelAdmin.get_ordering\nclass: ModelAdmin"
    ],
    "django/contrib/admin/views/main.py": [
      "function: ChangeList._get_default_ordering"
    ]
  },
  "5_sampled_edit_locs_and_patches": [
    {
      "sample_index": 0,
      "edit_locs": {
        "django/contrib/admin/filters.py": [
          "\nfunction: RelatedFieldListFilter.field_choices\nline: 196\nline: 201\nfunction: RelatedOnlyFieldListFilter.field_choices\nline: 420\nline: 422"
        ]
      },
      "patches": [
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..41d3f1e 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n+        related_model = field.remote_field.model\n         ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ())\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        ordering = ()\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ())\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..15dd7b5 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n+        related_model = field.remote_field.model\n         ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ()) or ()\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -418,5 +421,12 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n \n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n+        related_model = field.remote_field.model\n+        ordering = ()\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ()) or ()\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..a3a7fb8 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Default to the related model's Meta.ordering.\n+        ordering = field.remote_field.model._meta.ordering\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,10 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        ordering = field.remote_field.model._meta.ordering\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..ab46b1d 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,7 +194,8 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Use None to allow fallback to the related model's Meta.ordering.\n+        ordering = None\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n@@ -419,4 +420,9 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Respect ModelAdmin ordering if provided; otherwise allow fallback to Meta.ordering.\n+        ordering = None\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..4768895 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Determine ordering: prefer related model's ModelAdmin ordering; otherwise fall back to the model's Meta.ordering.\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        ordering = None\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = field.remote_field.model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,10 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        ordering = None\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = field.remote_field.model._meta.ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..3b39b83 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,14 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+            if ordering is None:\n+                ordering = related_model._meta.ordering\n+        else:\n+            ordering = related_model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -418,5 +422,13 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n \n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+            if ordering is None:\n+                ordering = related_model._meta.ordering\n+        else:\n+            ordering = related_model._meta.ordering\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        return field.get_choices(include_blank=False, ordering=ordering, limit_choices_to={'pk__in': pk_qs})\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..fb2af86 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,16 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        # Determine ordering based on the related model's ModelAdmin first,\n+        # falling back to the related model's Meta.ordering. Avoid passing\n+        # an empty tuple which clears default ordering.\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        ordering = None\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = getattr(related_model._meta, 'ordering', None) or None\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -418,5 +424,12 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n \n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        ordering = None\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = getattr(related_model._meta, 'ordering', None) or None\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..87bc3f8 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,15 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        # Prefer the related ModelAdmin's ordering; fall back to the related model's Meta.ordering.\n+        model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+            if ordering is None:\n+                ordering = model._meta.ordering\n+        else:\n+            ordering = model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +424,13 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Include ordering (ModelAdmin's if defined, else model's Meta.ordering) and limit to related PKs.\n+        model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+            if ordering is None:\n+                ordering = model._meta.ordering\n+        else:\n+            ordering = model._meta.ordering\n+        return field.get_choices(include_blank=False, ordering=ordering, limit_choices_to={'pk__in': pk_qs})\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..123e99a 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,14 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        admin_ordering = None\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+        # Fall back to the related model's Meta.ordering when no ModelAdmin\n+        # ordering is defined.\n+        ordering = admin_ordering if admin_ordering is not None else related_model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +423,10 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        admin_ordering = None\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+        ordering = admin_ordering if admin_ordering is not None else related_model._meta.ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..cd5b629 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,7 +194,7 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        ordering = None\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n@@ -419,4 +419,8 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        ordering = None\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n"
      ]
    },
    {
      "sample_index": 1,
      "edit_locs": {
        "django/contrib/admin/filters.py": [
          "\nfunction: RelatedFieldListFilter.field_choices\nline: 196\nfunction: RelatedOnlyFieldListFilter.field_choices\nline: 420"
        ],
        "django/contrib/admin/options.py": [
          "\nfunction: ModelAdmin.get_ordering\nline: 334"
        ]
      },
      "patches": [
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..85e14bd 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n+        related_model = field.remote_field.model\n         ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            ordering = related_admin.get_ordering(request) or ()\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ()) or ()\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        ordering = ()\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request) or ()\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ()) or ()\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..d4f63c4 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Prefer ModelAdmin ordering if available; otherwise, fall back to model's Meta.ordering.\n+        ordering = None\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = field.remote_field.model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Prefer ModelAdmin ordering if available; otherwise, fall back to model's Meta.ordering.\n+        ordering = None\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = field.remote_field.model._meta.ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..59d70d5 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,14 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Default to None to allow fallback to the related model's Meta.ordering.\n+        ordering = None\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+            # An empty tuple disables ordering; use None to fall back to Meta.ordering.\n+            if ordering == ():\n+                ordering = None\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +423,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Respect ordering from the related model's ModelAdmin, falling back to Meta.ordering.\n+        ordering = None\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+            if ordering == ():\n+                ordering = None\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..40cea4c 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        # Prefer ordering from the related ModelAdmin; fall back to the model's Meta.ordering.\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            ordering = related_admin.get_ordering(request) or related_model._meta.ordering or ()\n+        else:\n+            ordering = related_model._meta.ordering or ()\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Prefer ordering from the related ModelAdmin; fall back to the model's Meta.ordering.\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request) or related_model._meta.ordering or ()\n+        else:\n+            ordering = related_model._meta.ordering or ()\n+        return field.get_choices(include_blank=False, ordering=ordering, limit_choices_to={'pk__in': pk_qs})\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..15b8e96 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,15 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_model = field.remote_field.model\n+        # Start with the related model's Meta.ordering as a fallback.\n+        ordering = getattr(related_model._meta, 'ordering', ()) or ()\n+        # If a ModelAdmin is registered for the related model, prefer its ordering if defined.\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering:\n+                ordering = admin_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +424,13 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        # Start with the related model's Meta.ordering as a fallback.\n+        ordering = getattr(related_model._meta, 'ordering', ()) or ()\n+        # If a ModelAdmin is registered for the related model, prefer its ordering if defined.\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering:\n+                ordering = admin_ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..dcace8c 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,14 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Determine ordering for related model choices.\n+        # Prefer the related ModelAdmin ordering; fall back to the model's Meta.ordering.\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        ordering = None\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = field.remote_field.model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -418,5 +422,12 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n \n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n+        # Determine ordering for related model choices, with same fallback as RelatedFieldListFilter.\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        ordering = None\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = field.remote_field.model._meta.ordering\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..9206439 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,15 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        # Determine ordering for related model choices. Prefer ModelAdmin ordering,\n+        # and fall back to the related model's Meta.ordering.\n+        related_model = field.remote_field.model\n+        ordering = getattr(related_model._meta, 'ordering', None)\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering:\n+                ordering = admin_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +424,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        ordering = getattr(related_model._meta, 'ordering', None)\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering:\n+                ordering = admin_ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..5679a99 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,12 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        else:\n+            ordering = getattr(related_model._meta, 'ordering', ()) or ()\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +421,14 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        else:\n+            ordering = getattr(related_model._meta, 'ordering', ()) or ()\n+        return field.get_choices(\n+            include_blank=False,\n+            limit_choices_to={'pk__in': pk_qs},\n+            ordering=ordering,\n+        )\ndiff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py\nindex 0fb4989..6e87c40 100644\n--- a/django/contrib/admin/options.py\n+++ b/django/contrib/admin/options.py\n@@ -335,7 +335,10 @@ class BaseModelAdmin(metaclass=forms.MediaDefiningClass):\n         \"\"\"\n         Hook for specifying field ordering.\n         \"\"\"\n-        return self.ordering or ()  # otherwise we might try to *None, which is bad ;)\n+        # If ModelAdmin.ordering isn't set, fall back to the model's Meta.ordering.\n+        if self.ordering is not None:\n+            return self.ordering\n+        return getattr(self.model._meta, 'ordering', ()) or ()\n \n     def get_readonly_fields(self, request, obj=None):\n         \"\"\"\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..be58d16 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,16 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n+        # Determine ordering for related model choices:\n+        # 1) Related model's ModelAdmin.get_ordering(request) if registered.\n+        # 2) Fall back to the related model's Meta.ordering.\n+        related_model = field.remote_field.model\n         ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            ordering = related_admin.get_ordering(request) or ()\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ()) or ()\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +425,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        ordering = ()\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request) or ()\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ()) or ()\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\ndiff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py\nindex 0fb4989..e95924a 100644\n--- a/django/contrib/admin/options.py\n+++ b/django/contrib/admin/options.py\n@@ -335,7 +335,8 @@ class BaseModelAdmin(metaclass=forms.MediaDefiningClass):\n         \"\"\"\n         Hook for specifying field ordering.\n         \"\"\"\n-        return self.ordering or ()  # otherwise we might try to *None, which is bad ;)\n+        # Fall back to the model's default ordering if ModelAdmin.ordering isn't set.\n+        return self.ordering or getattr(self.model._meta, 'ordering', ()) or ()\n \n     def get_readonly_fields(self, request, obj=None):\n         \"\"\"\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..ee6b6f5 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,7 +194,8 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Default to the related model's Meta.ordering when no ModelAdmin is registered.\n+        ordering = getattr(field.remote_field.model._meta, 'ordering', ()) or ()\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n@@ -419,4 +420,9 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Respect ordering from the related ModelAdmin or fall back to the related model's Meta.ordering.\n+        ordering = getattr(field.remote_field.model._meta, 'ordering', ()) or ()\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\ndiff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py\nindex 0fb4989..f926140 100644\n--- a/django/contrib/admin/options.py\n+++ b/django/contrib/admin/options.py\n@@ -335,7 +335,11 @@ class BaseModelAdmin(metaclass=forms.MediaDefiningClass):\n         \"\"\"\n         Hook for specifying field ordering.\n         \"\"\"\n-        return self.ordering or ()  # otherwise we might try to *None, which is bad ;)\n+        # If ModelAdmin.ordering is explicitly set (even to an empty list/tuple), return it.\n+        # Otherwise, fall back to the model's Meta.ordering.\n+        if self.ordering is not None:\n+            return self.ordering\n+        return getattr(self.model._meta, 'ordering', ()) or ()\n \n     def get_readonly_fields(self, request, obj=None):\n         \"\"\"\n"
      ]
    },
    {
      "sample_index": 2,
      "edit_locs": {
        "django/contrib/admin/filters.py": [
          "\nfunction: RelatedFieldListFilter.field_choices\nfunction: RelatedOnlyFieldListFilter.field_choices"
        ]
      },
      "patches": [
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..cb9e4f6 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,7 +194,8 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Use the ModelAdmin's ordering if available; otherwise, fall back to the model's default ordering.\n+        ordering = None\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n@@ -419,4 +420,8 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        ordering = None\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        return field.get_choices(include_blank=False, ordering=ordering, limit_choices_to={'pk__in': pk_qs})\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..23debbf 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Fall back to the related model's Meta.ordering if no ModelAdmin ordering is defined.\n+        ordering = field.remote_field.model._meta.ordering\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Apply ordering from ModelAdmin if available, otherwise fall back to the related model's Meta.ordering.\n+        ordering = field.remote_field.model._meta.ordering\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..c8820ba 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        model = field.remote_field.model\n+        ordering = model._meta.ordering or ()\n+        related_admin = model_admin.admin_site._registry.get(model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        model = field.remote_field.model\n+        ordering = model._meta.ordering or ()\n+        related_admin = model_admin.admin_site._registry.get(model)\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n+        return field.get_choices(include_blank=False, ordering=ordering, limit_choices_to={'pk__in': pk_qs})\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..128dc7e 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Fall back to the related model's Meta.ordering if ModelAdmin doesn't specify one.\n+        ordering = field.remote_field.model._meta.ordering\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Apply ordering from the related ModelAdmin if available, otherwise fallback to the model's Meta.ordering.\n+        ordering = field.remote_field.model._meta.ordering\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..9316e8f 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Use the related ModelAdmin's ordering if defined; otherwise fall back to the related model's Meta.ordering.\n+        ordering = field.remote_field.model._meta.ordering\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -418,5 +421,12 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n \n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n+        # Preserve ordering consistent with RelatedFieldListFilter, defaulting to the related model's Meta.ordering.\n+        ordering = field.remote_field.model._meta.ordering\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..9546c6d 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Determine ordering, falling back to the related model's Meta.ordering\n+        ordering = field.remote_field.model._meta.ordering\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            ra_ordering = related_admin.get_ordering(request)\n+            if ra_ordering is not None:\n+                ordering = ra_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Apply ordering like RelatedFieldListFilter, with fallback to the related model's Meta.ordering.\n+        ordering = field.remote_field.model._meta.ordering\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            ra_ordering = related_admin.get_ordering(request)\n+            if ra_ordering is not None:\n+                ordering = ra_ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..d74f4e7 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,14 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        # Prefer the related ModelAdmin's ordering; fall back to the related model's Meta.ordering.\n+        model = field.remote_field.model\n+        ordering = model._meta.ordering\n+        related_admin = model_admin.admin_site._registry.get(model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +423,12 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Prefer the related ModelAdmin's ordering; fall back to the related model's Meta.ordering.\n+        model = field.remote_field.model\n+        ordering = model._meta.ordering\n+        related_admin = model_admin.admin_site._registry.get(model)\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..1e663d9 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,12 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        ordering = field.remote_field.model._meta.ordering\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +421,10 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        ordering = field.remote_field.model._meta.ordering\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..99c127b 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_model = field.remote_field.model\n+        ordering = None\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = related_model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        ordering = None\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = related_model._meta.ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..a7c4523 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,14 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        else:\n+            ordering = None\n+        # Fallback to the related model's Meta.ordering if the ModelAdmin doesn't define one.\n+        if not ordering:\n+            ordering = field.remote_field.model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +423,16 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        else:\n+            ordering = None\n+        # Fallback to the related model's Meta.ordering if the ModelAdmin doesn't define one.\n+        if not ordering:\n+            ordering = field.remote_field.model._meta.ordering\n+        return field.get_choices(\n+            include_blank=False,\n+            limit_choices_to={'pk__in': pk_qs},\n+            ordering=ordering,\n+        )\n"
      ]
    },
    {
      "sample_index": 3,
      "edit_locs": {
        "django/contrib/admin/filters.py": [
          "\nfunction: RelatedFieldListFilter.field_choices\nfunction: RelatedOnlyFieldListFilter.field_choices"
        ]
      },
      "patches": [
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..cd5b629 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,7 +194,7 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        ordering = None\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n@@ -419,4 +419,8 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        ordering = None\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..30a69ba 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,15 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        # Determine ordering: use related ModelAdmin ordering if available,\n+        # otherwise fall back to the related model's Meta.ordering.\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        ordering = None\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', None)\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +424,12 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Apply ordering consistent with RelatedFieldListFilter.\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        ordering = None\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', None)\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..5f8a1e4 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,16 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        # Determine ordering for related model choices.\n+        # Prefer ordering from the related model's ModelAdmin, falling back to the model's Meta.ordering.\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        else:\n+            ordering = ()\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ())\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +425,12 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        else:\n+            ordering = ()\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ())\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..ad4140b 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,11 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Determine ordering from the related ModelAdmin, falling back to the model's Meta.ordering.\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n-        if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+        ordering = related_admin.get_ordering(request) if related_admin is not None else None\n+        if not ordering:\n+            ordering = field.remote_field.model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +420,9 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Apply ordering consistent with RelatedFieldListFilter, falling back to model's Meta.ordering.\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        ordering = related_admin.get_ordering(request) if related_admin is not None else None\n+        if not ordering:\n+            ordering = field.remote_field.model._meta.ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..7407257 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,14 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_model = field.remote_field.model\n+        # Fall back to the related model's Meta.ordering if no ModelAdmin or no admin ordering.\n+        ordering = getattr(related_model._meta, 'ordering', ())\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +423,12 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        # Apply ordering from the related ModelAdmin if available; otherwise fall back to the model's Meta.ordering.\n+        ordering = getattr(related_model._meta, 'ordering', ())\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..99c127b 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_model = field.remote_field.model\n+        ordering = None\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = related_model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        ordering = None\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = related_model._meta.ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..adb5b24 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,14 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        # Start with the related model's Meta.ordering as a fallback.\n+        model = field.remote_field.model\n+        ordering = getattr(model._meta, 'ordering', ()) or ()\n+        related_admin = model_admin.admin_site._registry.get(model)\n         if related_admin is not None:\n-            ordering = related_admin.get_ordering(request)\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +423,12 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Use the same ordering logic as RelatedFieldListFilter, falling back to Meta.ordering.\n+        model = field.remote_field.model\n+        ordering = getattr(model._meta, 'ordering', ()) or ()\n+        related_admin = model_admin.admin_site._registry.get(model)\n+        if related_admin is not None:\n+            admin_ordering = related_admin.get_ordering(request)\n+            if admin_ordering is not None:\n+                ordering = admin_ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..d3706cb 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,12 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        ordering = None\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = field.remote_field.model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +421,10 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        ordering = None\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = field.remote_field.model._meta.ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..3920acd 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        ordering = None\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = related_model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -418,5 +421,12 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n \n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n+        related_model = field.remote_field.model\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        ordering = None\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = related_model._meta.ordering\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
        "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..d63f4bf 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,14 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n-        ordering = ()\n+        # Prefer the related ModelAdmin's ordering if provided; otherwise fall back\n+        # to the related model's Meta.ordering.\n         related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        ordering = None\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = field.remote_field.model._meta.ordering\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +423,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        # Apply ordering from the related ModelAdmin if available; otherwise fallback to model's Meta.ordering.\n+        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        ordering = None\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if ordering is None:\n+            ordering = field.remote_field.model._meta.ordering\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n"
      ]
    }
  ],
  "6_final_selected_patch": "diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py\nindex 51b3fb2..41d3f1e 100644\n--- a/django/contrib/admin/filters.py\n+++ b/django/contrib/admin/filters.py\n@@ -194,10 +194,13 @@ class RelatedFieldListFilter(FieldListFilter):\n         return [self.lookup_kwarg, self.lookup_kwarg_isnull]\n \n     def field_choices(self, field, request, model_admin):\n+        related_model = field.remote_field.model\n         ordering = ()\n-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n         if related_admin is not None:\n             ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ())\n         return field.get_choices(include_blank=False, ordering=ordering)\n \n     def choices(self, changelist):\n@@ -419,4 +422,11 @@ FieldListFilter.register(lambda f: True, AllValuesFieldListFilter)\n class RelatedOnlyFieldListFilter(RelatedFieldListFilter):\n     def field_choices(self, field, request, model_admin):\n         pk_qs = model_admin.get_queryset(request).distinct().values_list('%s__pk' % self.field_path, flat=True)\n-        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs})\n+        related_model = field.remote_field.model\n+        ordering = ()\n+        related_admin = model_admin.admin_site._registry.get(related_model)\n+        if related_admin is not None:\n+            ordering = related_admin.get_ordering(request)\n+        if not ordering:\n+            ordering = getattr(related_model._meta, 'ordering', ())\n+        return field.get_choices(include_blank=False, limit_choices_to={'pk__in': pk_qs}, ordering=ordering)\n",
  "7_resolved": false
}