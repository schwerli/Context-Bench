{
    "instance_id": "SWE-Bench-Pro__python__maintenance__bugfix__64469377",
    "original_id": "instance_ansible__ansible-83909bfa22573777e3db5688773bda59721962ad-vba6da65a0f3baefda7a058ebbd0a8dcafb8512f5",
    "1_model_selected_files": [
        "lib/ansible/cli/galaxy.py",
        "lib/ansible/galaxy/login.py",
        "lib/ansible/galaxy/role.py",
        "lib/ansible/galaxy/token.py",
        "lib/ansible/galaxy/api.py"
    ],
    "2_embedding_selected_files": [
        "lib/ansible/galaxy/login.py",
        "lib/ansible/galaxy/token.py",
        "lib/ansible/cli/galaxy.py",
        "hacking/build_library/build_ansible/command_plugins/file_deprecated_issues.py",
        "lib/ansible/galaxy/api.py",
        "lib/ansible/module_utils/common/removed.py",
        "hacking/build_library/build_ansible/command_plugins/release_announcement.py",
        "lib/ansible/galaxy/role.py",
        "lib/ansible/modules/command.py",
        "lib/ansible/galaxy/__init__.py",
        "lib/ansible/utils/galaxy.py",
        "lib/ansible/galaxy/user_agent.py",
        "lib/ansible/plugins/connection/ssh.py",
        "hacking/build_library/build_ansible/errors.py",
        "lib/ansible/modules/user.py",
        "lib/ansible/plugins/become/runas.py",
        "hacking/build_library/build_ansible/command_plugins/collection_meta.py",
        "lib/ansible/modules/shell.py",
        "hacking/build_library/build_ansible/command_plugins/dump_config.py",
        "lib/ansible/modules/git.py",
        "lib/ansible/cli/scripts/ansible_cli_stub.py",
        "hacking/build_library/build_ansible/command_plugins/porting_guide.py",
        "lib/ansible/modules/apt_key.py",
        "lib/ansible/modules/expect.py",
        "lib/ansible/plugins/become/sudo.py",
        "lib/ansible/cli/__init__.py",
        "hacking/build_library/build_ansible/command_plugins/docs_build.py",
        "hacking/build_library/build_ansible/command_plugins/update_intersphinx.py",
        "lib/ansible/plugins/become/su.py",
        "lib/ansible/plugins/lookup/password.py",
        "lib/ansible/cli/vault.py",
        "lib/ansible/modules/uri.py",
        "lib/ansible/modules/raw.py",
        "lib/ansible/galaxy/collection/__init__.py",
        "lib/ansible/errors/yaml_strings.py",
        "lib/ansible/cli/adhoc.py",
        "lib/ansible/modules/pause.py",
        "lib/ansible/modules/pip.py",
        "lib/ansible/cli/doc.py",
        "lib/ansible/cli/pull.py",
        "lib/ansible/cli/console.py",
        "hacking/build_library/build_ansible/command_plugins/dump_keywords.py",
        "lib/ansible/plugins/httpapi/__init__.py",
        "lib/ansible/module_utils/basic.py",
        "hacking/build_library/build_ansible/announce.py",
        "lib/ansible/plugins/connection/paramiko_ssh.py",
        "lib/ansible/modules/async_status.py",
        "lib/ansible/plugins/doc_fragments/decrypt.py",
        "lib/ansible/modules/meta.py",
        "lib/ansible/modules/reboot.py",
        "ansible/setup.py",
        "lib/ansible/parsing/vault/__init__.py",
        "lib/ansible/modules/apt_repository.py",
        "lib/ansible/playbook/role/requirement.py",
        "hacking/build-ansible.py",
        "lib/ansible/modules/script.py",
        "lib/ansible/plugins/action/copy.py"
    ],
    "3_final_combined_files": [
        "lib/ansible/cli/galaxy.py",
        "lib/ansible/galaxy/login.py",
        "lib/ansible/galaxy/role.py",
        "lib/ansible/galaxy/token.py"
    ],
    "4_related_elements": {
        "lib/ansible/cli/galaxy.py": [
            "function: GalaxyCLI.init_parser\nfunction: GalaxyCLI.add_login_options\nfunction: GalaxyCLI.execute_login\nfunction: GalaxyCLI.run\nfunction: GalaxyCLI.api\nfunction: GalaxyCLI.post_process_args\nfunction: GalaxyCLI.add_publish_options\nfunction: GalaxyCLI.execute_publish\nfunction: GalaxyCLI.add_import_options\nfunction: GalaxyCLI.execute_import\nfunction: GalaxyCLI.add_setup_options\nfunction: GalaxyCLI.execute_setup"
        ],
        "lib/ansible/galaxy/login.py": [
            "class: GalaxyLogin\nvariable: GalaxyLogin.GITHUB_AUTH\nfunction: GalaxyLogin.get_credentials\nfunction: GalaxyLogin.remove_github_token\nfunction: GalaxyLogin.create_github_token"
        ],
        "lib/ansible/galaxy/role.py": [
            ""
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "lib/ansible/cli/galaxy.py": [
                    "line: 130\nline: 131\nline: 132\nline: 133\nfunction: GalaxyCLI.add_login_options\nfunction: GalaxyCLI.execute_login"
                ],
                "lib/ansible/galaxy/login.py": [
                    "class: GalaxyLogin\nline: 43\nfunction: GalaxyLogin.remove_github_token\nfunction: GalaxyLogin.create_github_token"
                ],
                "lib/ansible/galaxy/role.py": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/lib/ansible/cli/galaxy.py b/lib/ansible/cli/galaxy.py\nindex 87ff79d..a84832d 100644\n--- a/lib/ansible/cli/galaxy.py\n+++ b/lib/ansible/cli/galaxy.py\n@@ -128,9 +128,10 @@ class GalaxyCLI(CLI):\n         common = opt_help.argparse.ArgumentParser(add_help=False)\n         common.add_argument('-s', '--server', dest='api_server', help='The Galaxy API server URL')\n         common.add_argument('--token', '--api-key', dest='api_key',\n-                            help='The Ansible Galaxy API key which can be found at '\n-                                 'https://galaxy.ansible.com/me/preferences. You can also use ansible-galaxy login to '\n-                                 'retrieve this key or set the token for the GALAXY_SERVER_LIST entry.')\n+                            help='The Ansible Galaxy API token which can be found at '\n+                                 'https://galaxy.ansible.com/me/preferences. The login command has been removed; '\n+                                 'use this token for authentication. Pass it via --token/--api-key or configure '\n+                                 'the GALAXY_SERVER_LIST entry or GALAXY_TOKEN.')\n         common.add_argument('-c', '--ignore-certs', action='store_true', dest='ignore_certs',\n                             default=C.GALAXY_IGNORE_CERTS, help='Ignore SSL certificate validation errors.')\n         opt_help.add_verbosity_options(common)\n@@ -305,12 +306,12 @@ class GalaxyCLI(CLI):\n \n     def add_login_options(self, parser, parents=None):\n         login_parser = parser.add_parser('login', parents=parents,\n-                                         help=\"Login to api.github.com server in order to use ansible-galaxy role sub \"\n-                                              \"command such as 'import', 'delete', 'publish', and 'setup'\")\n+                                         help=\"Removed: GitHub OAuth Authorizations API was discontinued. Use an API \"\n+                                              \"token from https://galaxy.ansible.com/me/preferences with --token/--api-key.\")\n         login_parser.set_defaults(func=self.execute_login)\n \n         login_parser.add_argument('--github-token', dest='token', default=None,\n-                                  help='Identify with github token rather than username and password.')\n+                                  help='Deprecated and ignored: interactive GitHub login is no longer supported.')\n \n     def add_info_options(self, parser, parents=None):\n         info_parser = parser.add_parser('info', parents=parents, help='View more details about a specific role.')\n@@ -1413,30 +1414,13 @@ class GalaxyCLI(CLI):\n \n     def execute_login(self):\n         \"\"\"\n-        verify user's identify via Github and retrieve an auth token from Ansible Galaxy.\n+        The 'ansible-galaxy login' command has been removed. GitHub's OAuth Authorizations API has been discontinued.\n+        Please use a Galaxy API token for authentication instead.\n         \"\"\"\n-        # Authenticate with github and retrieve a token\n-        if context.CLIARGS['token'] is None:\n-            if C.GALAXY_TOKEN:\n-                github_token = C.GALAXY_TOKEN\n-            else:\n-                login = GalaxyLogin(self.galaxy)\n-                github_token = login.create_github_token()\n-        else:\n-            github_token = context.CLIARGS['token']\n-\n-        galaxy_response = self.api.authenticate(github_token)\n-\n-        if context.CLIARGS['token'] is None and C.GALAXY_TOKEN is None:\n-            # Remove the token we created\n-            login.remove_github_token()\n-\n-        # Store the Galaxy token\n-        token = GalaxyToken()\n-        token.set(galaxy_response['token'])\n-\n-        display.display(\"Successfully logged into Galaxy as %s\" % galaxy_response['username'])\n-        return 0\n+        display.error(\"The 'ansible-galaxy login' command has been removed because GitHub's OAuth Authorizations API was discontinued.\")\n+        display.display(\"To authenticate, obtain an API token from https://galaxy.ansible.com/me/preferences and pass it to the CLI using:\")\n+        display.display(\"  --token/--api-key, or configure GALAXY_SERVER_LIST or GALAXY_TOKEN.\")\n+        return 1\n \n     def execute_import(self):\n         \"\"\" used to import a role into Ansible Galaxy \"\"\"\n",
                "diff --git a/lib/ansible/cli/galaxy.py b/lib/ansible/cli/galaxy.py\nindex 87ff79d..d8dfa0f 100644\n--- a/lib/ansible/cli/galaxy.py\n+++ b/lib/ansible/cli/galaxy.py\n@@ -128,9 +128,9 @@ class GalaxyCLI(CLI):\n         common = opt_help.argparse.ArgumentParser(add_help=False)\n         common.add_argument('-s', '--server', dest='api_server', help='The Galaxy API server URL')\n         common.add_argument('--token', '--api-key', dest='api_key',\n-                            help='The Ansible Galaxy API key which can be found at '\n-                                 'https://galaxy.ansible.com/me/preferences. You can also use ansible-galaxy login to '\n-                                 'retrieve this key or set the token for the GALAXY_SERVER_LIST entry.')\n+                            help='The Ansible Galaxy API token which can be found at '\n+                                 'https://galaxy.ansible.com/me/preferences. Pass this token via --token/--api-key '\n+                                 'or set the token for the GALAXY_SERVER_LIST entry in your configuration.')\n         common.add_argument('-c', '--ignore-certs', action='store_true', dest='ignore_certs',\n                             default=C.GALAXY_IGNORE_CERTS, help='Ignore SSL certificate validation errors.')\n         opt_help.add_verbosity_options(common)\n@@ -305,13 +305,11 @@ class GalaxyCLI(CLI):\n \n     def add_login_options(self, parser, parents=None):\n         login_parser = parser.add_parser('login', parents=parents,\n-                                         help=\"Login to api.github.com server in order to use ansible-galaxy role sub \"\n-                                              \"command such as 'import', 'delete', 'publish', and 'setup'\")\n+                                         help=\"The 'ansible-galaxy login' command has been removed. \"\n+                                              \"Use an API token from https://galaxy.ansible.com/me/preferences \"\n+                                              \"and pass it via --token/--api-key or configure GALAXY_SERVER_LIST.\")\n         login_parser.set_defaults(func=self.execute_login)\n \n-        login_parser.add_argument('--github-token', dest='token', default=None,\n-                                  help='Identify with github token rather than username and password.')\n-\n     def add_info_options(self, parser, parents=None):\n         info_parser = parser.add_parser('info', parents=parents, help='View more details about a specific role.')\n         info_parser.set_defaults(func=self.execute_info)\n@@ -1413,30 +1411,19 @@ class GalaxyCLI(CLI):\n \n     def execute_login(self):\n         \"\"\"\n-        verify user's identify via Github and retrieve an auth token from Ansible Galaxy.\n+        Inform users that the login command has been removed and provide guidance for API token authentication.\n         \"\"\"\n-        # Authenticate with github and retrieve a token\n-        if context.CLIARGS['token'] is None:\n-            if C.GALAXY_TOKEN:\n-                github_token = C.GALAXY_TOKEN\n-            else:\n-                login = GalaxyLogin(self.galaxy)\n-                github_token = login.create_github_token()\n-        else:\n-            github_token = context.CLIARGS['token']\n-\n-        galaxy_response = self.api.authenticate(github_token)\n-\n-        if context.CLIARGS['token'] is None and C.GALAXY_TOKEN is None:\n-            # Remove the token we created\n-            login.remove_github_token()\n-\n-        # Store the Galaxy token\n-        token = GalaxyToken()\n-        token.set(galaxy_response['token'])\n-\n-        display.display(\"Successfully logged into Galaxy as %s\" % galaxy_response['username'])\n-        return 0\n+        msg_lines = [\n+            \"The 'ansible-galaxy login' command has been removed.\",\n+            \"GitHub's OAuth Authorizations API used by this command has been discontinued.\",\n+            \"\",\n+            \"To authenticate with Galaxy:\",\n+            \"- Generate an API token from https://galaxy.ansible.com/me/preferences\",\n+            \"- Pass the token to the CLI using --token or --api-key\",\n+            \"- Or configure the token in your GALAXY_SERVER_LIST entry in ansible.cfg\",\n+        ]\n+        display.display(\"\\n\".join(msg_lines))\n+        return 2\n \n     def execute_import(self):\n         \"\"\" used to import a role into Ansible Galaxy \"\"\"\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "lib/ansible/cli/galaxy.py": [
                    "line: 130\nline: 131\nline: 132\nline: 133\nfunction: GalaxyCLI.add_login_options\nfunction: GalaxyCLI.execute_login"
                ],
                "lib/ansible/galaxy/login.py": [
                    "class: GalaxyLogin\nfunction: GalaxyLogin.get_credentials\nfunction: GalaxyLogin.remove_github_token\nfunction: GalaxyLogin.create_github_token"
                ],
                "lib/ansible/galaxy/role.py": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/lib/ansible/cli/galaxy.py b/lib/ansible/cli/galaxy.py\nindex 87ff79d..73711a4 100644\n--- a/lib/ansible/cli/galaxy.py\n+++ b/lib/ansible/cli/galaxy.py\n@@ -128,9 +128,9 @@ class GalaxyCLI(CLI):\n         common = opt_help.argparse.ArgumentParser(add_help=False)\n         common.add_argument('-s', '--server', dest='api_server', help='The Galaxy API server URL')\n         common.add_argument('--token', '--api-key', dest='api_key',\n-                            help='The Ansible Galaxy API key which can be found at '\n-                                 'https://galaxy.ansible.com/me/preferences. You can also use ansible-galaxy login to '\n-                                 'retrieve this key or set the token for the GALAXY_SERVER_LIST entry.')\n+                            help='The Ansible Galaxy API token. Obtain it from '\n+                                 'https://galaxy.ansible.com/me/preferences. Pass it via this option or configure it '\n+                                 'in your ansible.cfg under the GALAXY_SERVER_LIST entry.')\n         common.add_argument('-c', '--ignore-certs', action='store_true', dest='ignore_certs',\n                             default=C.GALAXY_IGNORE_CERTS, help='Ignore SSL certificate validation errors.')\n         opt_help.add_verbosity_options(common)\n@@ -305,13 +305,10 @@ class GalaxyCLI(CLI):\n \n     def add_login_options(self, parser, parents=None):\n         login_parser = parser.add_parser('login', parents=parents,\n-                                         help=\"Login to api.github.com server in order to use ansible-galaxy role sub \"\n-                                              \"command such as 'import', 'delete', 'publish', and 'setup'\")\n+                                         help=\"The 'login' command has been removed. Use a Galaxy API token instead. \"\n+                                              \"See https://galaxy.ansible.com/me/preferences\")\n         login_parser.set_defaults(func=self.execute_login)\n \n-        login_parser.add_argument('--github-token', dest='token', default=None,\n-                                  help='Identify with github token rather than username and password.')\n-\n     def add_info_options(self, parser, parents=None):\n         info_parser = parser.add_parser('info', parents=parents, help='View more details about a specific role.')\n         info_parser.set_defaults(func=self.execute_info)\n@@ -1413,30 +1410,19 @@ class GalaxyCLI(CLI):\n \n     def execute_login(self):\n         \"\"\"\n-        verify user's identify via Github and retrieve an auth token from Ansible Galaxy.\n+        The 'ansible-galaxy login' command has been removed due to the shutdown of the GitHub OAuth\n+        Authorizations API it relied on. Please use a Galaxy API token for authentication.\n         \"\"\"\n-        # Authenticate with github and retrieve a token\n-        if context.CLIARGS['token'] is None:\n-            if C.GALAXY_TOKEN:\n-                github_token = C.GALAXY_TOKEN\n-            else:\n-                login = GalaxyLogin(self.galaxy)\n-                github_token = login.create_github_token()\n-        else:\n-            github_token = context.CLIARGS['token']\n-\n-        galaxy_response = self.api.authenticate(github_token)\n-\n-        if context.CLIARGS['token'] is None and C.GALAXY_TOKEN is None:\n-            # Remove the token we created\n-            login.remove_github_token()\n-\n-        # Store the Galaxy token\n-        token = GalaxyToken()\n-        token.set(galaxy_response['token'])\n-\n-        display.display(\"Successfully logged into Galaxy as %s\" % galaxy_response['username'])\n-        return 0\n+        message = (\n+            \"The 'ansible-galaxy login' command has been removed.\\n\"\n+            \"GitHub's OAuth Authorizations API used by this command has been discontinued.\\n\\n\"\n+            \"To authenticate, generate an API token from:\\n\"\n+            \"  https://galaxy.ansible.com/me/preferences\\n\\n\"\n+            \"Then pass it to ansible-galaxy via:\\n\"\n+            \"  --token / --api-key on the CLI, or configure it in your ansible.cfg under GALAXY_SERVER_LIST.\"\n+        )\n+        display.error(message)\n+        return 1\n \n     def execute_import(self):\n         \"\"\" used to import a role into Ansible Galaxy \"\"\"\n",
                "diff --git a/lib/ansible/cli/galaxy.py b/lib/ansible/cli/galaxy.py\nindex 87ff79d..141d7b2 100644\n--- a/lib/ansible/cli/galaxy.py\n+++ b/lib/ansible/cli/galaxy.py\n@@ -128,9 +128,9 @@ class GalaxyCLI(CLI):\n         common = opt_help.argparse.ArgumentParser(add_help=False)\n         common.add_argument('-s', '--server', dest='api_server', help='The Galaxy API server URL')\n         common.add_argument('--token', '--api-key', dest='api_key',\n-                            help='The Ansible Galaxy API key which can be found at '\n-                                 'https://galaxy.ansible.com/me/preferences. You can also use ansible-galaxy login to '\n-                                 'retrieve this key or set the token for the GALAXY_SERVER_LIST entry.')\n+                            help='The Ansible Galaxy API token. Obtain one from '\n+                                 'https://galaxy.ansible.com/me/preferences and provide it via --token/--api-key, '\n+                                 'or configure it in the GALAXY_SERVER_LIST entry.')\n         common.add_argument('-c', '--ignore-certs', action='store_true', dest='ignore_certs',\n                             default=C.GALAXY_IGNORE_CERTS, help='Ignore SSL certificate validation errors.')\n         opt_help.add_verbosity_options(common)\n@@ -305,13 +305,11 @@ class GalaxyCLI(CLI):\n \n     def add_login_options(self, parser, parents=None):\n         login_parser = parser.add_parser('login', parents=parents,\n-                                         help=\"Login to api.github.com server in order to use ansible-galaxy role sub \"\n-                                              \"command such as 'import', 'delete', 'publish', and 'setup'\")\n+                                         help=\"Deprecated: The 'login' command has been removed. \"\n+                                              \"Use an API token from https://galaxy.ansible.com/me/preferences and \"\n+                                              \"pass it via --token/--api-key or configure it in GALAXY_SERVER_LIST.\")\n         login_parser.set_defaults(func=self.execute_login)\n \n-        login_parser.add_argument('--github-token', dest='token', default=None,\n-                                  help='Identify with github token rather than username and password.')\n-\n     def add_info_options(self, parser, parents=None):\n         info_parser = parser.add_parser('info', parents=parents, help='View more details about a specific role.')\n         info_parser.set_defaults(func=self.execute_info)\n@@ -1413,30 +1411,16 @@ class GalaxyCLI(CLI):\n \n     def execute_login(self):\n         \"\"\"\n-        verify user's identify via Github and retrieve an auth token from Ansible Galaxy.\n+        Inform users that the 'login' command has been removed and how to authenticate using API tokens.\n         \"\"\"\n-        # Authenticate with github and retrieve a token\n-        if context.CLIARGS['token'] is None:\n-            if C.GALAXY_TOKEN:\n-                github_token = C.GALAXY_TOKEN\n-            else:\n-                login = GalaxyLogin(self.galaxy)\n-                github_token = login.create_github_token()\n-        else:\n-            github_token = context.CLIARGS['token']\n-\n-        galaxy_response = self.api.authenticate(github_token)\n-\n-        if context.CLIARGS['token'] is None and C.GALAXY_TOKEN is None:\n-            # Remove the token we created\n-            login.remove_github_token()\n-\n-        # Store the Galaxy token\n-        token = GalaxyToken()\n-        token.set(galaxy_response['token'])\n-\n-        display.display(\"Successfully logged into Galaxy as %s\" % galaxy_response['username'])\n-        return 0\n+        from ansible.errors import AnsibleError\n+        message = (\n+            \"The 'ansible-galaxy login' command has been removed.\\n\"\n+            \"GitHub has discontinued the OAuth Authorizations API previously used for interactive login.\\n\"\n+            \"Please authenticate using an API token obtained from https://galaxy.ansible.com/me/preferences.\\n\"\n+            \"Pass the token to the CLI via --token/--api-key or configure it in your GALAXY_SERVER_LIST entry.\"\n+        )\n+        raise AnsibleError(message)\n \n     def execute_import(self):\n         \"\"\" used to import a role into Ansible Galaxy \"\"\"\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/lib/ansible/cli/galaxy.py b/lib/ansible/cli/galaxy.py\nindex 87ff79d..a84832d 100644\n--- a/lib/ansible/cli/galaxy.py\n+++ b/lib/ansible/cli/galaxy.py\n@@ -128,9 +128,10 @@ class GalaxyCLI(CLI):\n         common = opt_help.argparse.ArgumentParser(add_help=False)\n         common.add_argument('-s', '--server', dest='api_server', help='The Galaxy API server URL')\n         common.add_argument('--token', '--api-key', dest='api_key',\n-                            help='The Ansible Galaxy API key which can be found at '\n-                                 'https://galaxy.ansible.com/me/preferences. You can also use ansible-galaxy login to '\n-                                 'retrieve this key or set the token for the GALAXY_SERVER_LIST entry.')\n+                            help='The Ansible Galaxy API token which can be found at '\n+                                 'https://galaxy.ansible.com/me/preferences. The login command has been removed; '\n+                                 'use this token for authentication. Pass it via --token/--api-key or configure '\n+                                 'the GALAXY_SERVER_LIST entry or GALAXY_TOKEN.')\n         common.add_argument('-c', '--ignore-certs', action='store_true', dest='ignore_certs',\n                             default=C.GALAXY_IGNORE_CERTS, help='Ignore SSL certificate validation errors.')\n         opt_help.add_verbosity_options(common)\n@@ -305,12 +306,12 @@ class GalaxyCLI(CLI):\n \n     def add_login_options(self, parser, parents=None):\n         login_parser = parser.add_parser('login', parents=parents,\n-                                         help=\"Login to api.github.com server in order to use ansible-galaxy role sub \"\n-                                              \"command such as 'import', 'delete', 'publish', and 'setup'\")\n+                                         help=\"Removed: GitHub OAuth Authorizations API was discontinued. Use an API \"\n+                                              \"token from https://galaxy.ansible.com/me/preferences with --token/--api-key.\")\n         login_parser.set_defaults(func=self.execute_login)\n \n         login_parser.add_argument('--github-token', dest='token', default=None,\n-                                  help='Identify with github token rather than username and password.')\n+                                  help='Deprecated and ignored: interactive GitHub login is no longer supported.')\n \n     def add_info_options(self, parser, parents=None):\n         info_parser = parser.add_parser('info', parents=parents, help='View more details about a specific role.')\n@@ -1413,30 +1414,13 @@ class GalaxyCLI(CLI):\n \n     def execute_login(self):\n         \"\"\"\n-        verify user's identify via Github and retrieve an auth token from Ansible Galaxy.\n+        The 'ansible-galaxy login' command has been removed. GitHub's OAuth Authorizations API has been discontinued.\n+        Please use a Galaxy API token for authentication instead.\n         \"\"\"\n-        # Authenticate with github and retrieve a token\n-        if context.CLIARGS['token'] is None:\n-            if C.GALAXY_TOKEN:\n-                github_token = C.GALAXY_TOKEN\n-            else:\n-                login = GalaxyLogin(self.galaxy)\n-                github_token = login.create_github_token()\n-        else:\n-            github_token = context.CLIARGS['token']\n-\n-        galaxy_response = self.api.authenticate(github_token)\n-\n-        if context.CLIARGS['token'] is None and C.GALAXY_TOKEN is None:\n-            # Remove the token we created\n-            login.remove_github_token()\n-\n-        # Store the Galaxy token\n-        token = GalaxyToken()\n-        token.set(galaxy_response['token'])\n-\n-        display.display(\"Successfully logged into Galaxy as %s\" % galaxy_response['username'])\n-        return 0\n+        display.error(\"The 'ansible-galaxy login' command has been removed because GitHub's OAuth Authorizations API was discontinued.\")\n+        display.display(\"To authenticate, obtain an API token from https://galaxy.ansible.com/me/preferences and pass it to the CLI using:\")\n+        display.display(\"  --token/--api-key, or configure GALAXY_SERVER_LIST or GALAXY_TOKEN.\")\n+        return 1\n \n     def execute_import(self):\n         \"\"\" used to import a role into Ansible Galaxy \"\"\"\n"
}