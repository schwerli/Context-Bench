{
    "instance_id": "SWE-Bench-Pro__go__maintenance__bugfix__997c7afd",
    "original_id": "instance_flipt-io__flipt-c154dd1a3590954dfd3b901555fc6267f646a289",
    "1_model_selected_files": [
        "config/config.go",
        "cmd/flipt/flipt.go",
        "cmd/flipt/banner.go",
        "config/config_test.go"
    ],
    "2_embedding_selected_files": [
        "rpc/flipt.pb.gw.go",
        "rpc/flipt.pb.go",
        "cmd/flipt/flipt.go",
        "rpc/flipt_grpc.pb.go",
        "config/config.go",
        "rpc/validation_test.go",
        "cmd/flipt/banner.go",
        "storage/db/flag_test.go"
    ],
    "3_final_combined_files": [
        "cmd/flipt/flipt.go",
        "config/config.go",
        "cmd/flipt/banner.go",
        "rpc/flipt.pb.gw.go",
        "rpc/flipt.pb.go"
    ],
    "4_related_elements": {
        "cmd/flipt/flipt.go": [
            "function: run\nvariable: version\nvariable: cfg"
        ],
        "config/config.go": [
            "class: Config\nclass: metadataConfig\nfunction: Default\nfunction: Load\nvariable: cfgMetadataVersionCheckEnabled"
        ],
        "cmd/flipt/banner.go": [
            ""
        ]
    },
    "5_sampled_edit_locs_and_patches": [
        {
            "sample_index": 0,
            "edit_locs": {
                "cmd/flipt/flipt.go": [
                    "function: run"
                ],
                "config/config.go": [
                    "line: 22\nline: 85\nfunction: Default\nline: 153\nfunction: Load"
                ],
                "cmd/flipt/banner.go": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/config/config.go b/config/config.go\nindex b407128..87fecda 100644\n--- a/config/config.go\n+++ b/config/config.go\n@@ -19,6 +19,7 @@ type Config struct {\n \tCache    cacheConfig    `json:\"cache,omitempty\"`\n \tServer   serverConfig   `json:\"server,omitempty\"`\n \tDatabase databaseConfig `json:\"database,omitempty\"`\n+\tMetadata metadataConfig `json:\"metadata,omitempty\"`\n }\n \n type logConfig struct {\n@@ -83,6 +84,10 @@ type databaseConfig struct {\n \tURL            string `json:\"url,omitempty\"`\n }\n \n+type metadataConfig struct {\n+\tCheckVersion bool `json:\"checkVersion\"`\n+}\n+\n func Default() *Config {\n \treturn &Config{\n \t\tLog: logConfig{\n@@ -118,6 +123,10 @@ func Default() *Config {\n \t\t\tURL:            \"file:/var/opt/flipt/flipt.db\",\n \t\t\tMigrationsPath: \"/etc/flipt/config/migrations\",\n \t\t},\n+\n+\t\tMetadata: metadataConfig{\n+\t\t\tCheckVersion: true,\n+\t\t},\n \t}\n }\n \n@@ -129,6 +138,9 @@ const (\n \t// UI\n \tcfgUIEnabled = \"ui.enabled\"\n \n+\t// Metadata\n+\tcfgMetadataCheckVersion = \"metadata.check_version\"\n+\n \t// CORS\n \tcfgCorsEnabled        = \"cors.enabled\"\n \tcfgCorsAllowedOrigins = \"cors.allowed_origins\"\n@@ -179,6 +191,11 @@ func Load(path string) (*Config, error) {\n \t\tcfg.UI.Enabled = viper.GetBool(cfgUIEnabled)\n \t}\n \n+\t// Metadata\n+\tif viper.IsSet(cfgMetadataCheckVersion) {\n+\t\tcfg.Metadata.CheckVersion = viper.GetBool(cfgMetadataCheckVersion)\n+\t}\n+\n \t// CORS\n \tif viper.IsSet(cfgCorsEnabled) {\n \t\tcfg.Cors.Enabled = viper.GetBool(cfgCorsEnabled)\n",
                "diff --git a/config/config.go b/config/config.go\nindex b407128..0f7c31e 100644\n--- a/config/config.go\n+++ b/config/config.go\n@@ -19,6 +19,7 @@ type Config struct {\n \tCache    cacheConfig    `json:\"cache,omitempty\"`\n \tServer   serverConfig   `json:\"server,omitempty\"`\n \tDatabase databaseConfig `json:\"database,omitempty\"`\n+\tMetadata metadataConfig `json:\"metadata,omitempty\"`\n }\n \n type logConfig struct {\n@@ -83,6 +84,10 @@ type databaseConfig struct {\n \tURL            string `json:\"url,omitempty\"`\n }\n \n+type metadataConfig struct {\n+\tCheckForUpdates bool `json:\"checkForUpdates\"`\n+}\n+\n func Default() *Config {\n \treturn &Config{\n \t\tLog: logConfig{\n@@ -118,6 +123,10 @@ func Default() *Config {\n \t\t\tURL:            \"file:/var/opt/flipt/flipt.db\",\n \t\t\tMigrationsPath: \"/etc/flipt/config/migrations\",\n \t\t},\n+\n+\t\tMetadata: metadataConfig{\n+\t\t\tCheckForUpdates: true,\n+\t\t},\n \t}\n }\n \n@@ -150,6 +159,9 @@ const (\n \t// DB\n \tcfgDBURL            = \"db.url\"\n \tcfgDBMigrationsPath = \"db.migrations.path\"\n+\n+\t// Metadata\n+\tcfgMetadataCheckForUpdates = \"metadata.check_for_updates\"\n )\n \n func Load(path string) (*Config, error) {\n@@ -238,6 +250,11 @@ func Load(path string) (*Config, error) {\n \t\tcfg.Database.MigrationsPath = viper.GetString(cfgDBMigrationsPath)\n \t}\n \n+\t// Metadata\n+\tif viper.IsSet(cfgMetadataCheckForUpdates) {\n+\t\tcfg.Metadata.CheckForUpdates = viper.GetBool(cfgMetadataCheckForUpdates)\n+\t}\n+\n \tif err := cfg.validate(); err != nil {\n \t\treturn &Config{}, err\n \t}\n"
            ]
        },
        {
            "sample_index": 1,
            "edit_locs": {
                "config/config.go": [
                    "line: 21\nfunction: Default\nline: 153\nfunction: Load"
                ],
                "cmd/flipt/flipt.go": [
                    "function: run"
                ],
                "cmd/flipt/banner.go": [
                    ""
                ]
            },
            "patches": [
                "diff --git a/config/config.go b/config/config.go\nindex b407128..5be4025 100644\n--- a/config/config.go\n+++ b/config/config.go\n@@ -15,6 +15,7 @@ import (\n type Config struct {\n \tLog      logConfig      `json:\"log,omitempty\"`\n \tUI       uiConfig       `json:\"ui,omitempty\"`\n+\tMetadata metadataConfig `json:\"metadata,omitempty\"`\n \tCors     corsConfig     `json:\"cors,omitempty\"`\n \tCache    cacheConfig    `json:\"cache,omitempty\"`\n \tServer   serverConfig   `json:\"server,omitempty\"`\n@@ -30,6 +31,11 @@ type uiConfig struct {\n \tEnabled bool `json:\"enabled\"`\n }\n \n+type metadataConfig struct {\n+\t// VersionCheck controls whether the application checks for version updates at startup.\n+\tVersionCheck bool `json:\"versionCheck\"`\n+}\n+\n type corsConfig struct {\n \tEnabled        bool     `json:\"enabled\"`\n \tAllowedOrigins []string `json:\"allowedOrigins,omitempty\"`\n@@ -93,6 +99,10 @@ func Default() *Config {\n \t\t\tEnabled: true,\n \t\t},\n \n+\t\tMetadata: metadataConfig{\n+\t\t\tVersionCheck: true,\n+\t\t},\n+\n \t\tCors: corsConfig{\n \t\t\tEnabled:        false,\n \t\t\tAllowedOrigins: []string{\"*\"},\n@@ -129,6 +139,9 @@ const (\n \t// UI\n \tcfgUIEnabled = \"ui.enabled\"\n \n+\t// Metadata\n+\tcfgMetadataVersionCheck = \"metadata.version_check\"\n+\n \t// CORS\n \tcfgCorsEnabled        = \"cors.enabled\"\n \tcfgCorsAllowedOrigins = \"cors.allowed_origins\"\n@@ -179,6 +192,11 @@ func Load(path string) (*Config, error) {\n \t\tcfg.UI.Enabled = viper.GetBool(cfgUIEnabled)\n \t}\n \n+\t// Metadata\n+\tif viper.IsSet(cfgMetadataVersionCheck) {\n+\t\tcfg.Metadata.VersionCheck = viper.GetBool(cfgMetadataVersionCheck)\n+\t}\n+\n \t// CORS\n \tif viper.IsSet(cfgCorsEnabled) {\n \t\tcfg.Cors.Enabled = viper.GetBool(cfgCorsEnabled)\n",
                "diff --git a/config/config.go b/config/config.go\nindex b407128..7597f23 100644\n--- a/config/config.go\n+++ b/config/config.go\n@@ -19,6 +19,7 @@ type Config struct {\n \tCache    cacheConfig    `json:\"cache,omitempty\"`\n \tServer   serverConfig   `json:\"server,omitempty\"`\n \tDatabase databaseConfig `json:\"database,omitempty\"`\n+\tMetadata metadataConfig `json:\"metadata,omitempty\"`\n }\n \n type logConfig struct {\n@@ -83,6 +84,11 @@ type databaseConfig struct {\n \tURL            string `json:\"url,omitempty\"`\n }\n \n+type metadataConfig struct {\n+\t// VersionCheck determines whether the application should check for new version updates at startup.\n+\tVersionCheck bool `json:\"versionCheck\"`\n+}\n+\n func Default() *Config {\n \treturn &Config{\n \t\tLog: logConfig{\n@@ -118,6 +124,10 @@ func Default() *Config {\n \t\t\tURL:            \"file:/var/opt/flipt/flipt.db\",\n \t\t\tMigrationsPath: \"/etc/flipt/config/migrations\",\n \t\t},\n+\n+\t\tMetadata: metadataConfig{\n+\t\t\tVersionCheck: true,\n+\t\t},\n \t}\n }\n \n@@ -150,6 +160,9 @@ const (\n \t// DB\n \tcfgDBURL            = \"db.url\"\n \tcfgDBMigrationsPath = \"db.migrations.path\"\n+\n+\t// Metadata\n+\tcfgMetadataVersionCheck = \"metadata.version_check\"\n )\n \n func Load(path string) (*Config, error) {\n@@ -179,6 +192,11 @@ func Load(path string) (*Config, error) {\n \t\tcfg.UI.Enabled = viper.GetBool(cfgUIEnabled)\n \t}\n \n+\t// Metadata\n+\tif viper.IsSet(cfgMetadataVersionCheck) {\n+\t\tcfg.Metadata.VersionCheck = viper.GetBool(cfgMetadataVersionCheck)\n+\t}\n+\n \t// CORS\n \tif viper.IsSet(cfgCorsEnabled) {\n \t\tcfg.Cors.Enabled = viper.GetBool(cfgCorsEnabled)\n"
            ]
        }
    ],
    "6_final_selected_patch": "diff --git a/config/config.go b/config/config.go\nindex b407128..87fecda 100644\n--- a/config/config.go\n+++ b/config/config.go\n@@ -19,6 +19,7 @@ type Config struct {\n \tCache    cacheConfig    `json:\"cache,omitempty\"`\n \tServer   serverConfig   `json:\"server,omitempty\"`\n \tDatabase databaseConfig `json:\"database,omitempty\"`\n+\tMetadata metadataConfig `json:\"metadata,omitempty\"`\n }\n \n type logConfig struct {\n@@ -83,6 +84,10 @@ type databaseConfig struct {\n \tURL            string `json:\"url,omitempty\"`\n }\n \n+type metadataConfig struct {\n+\tCheckVersion bool `json:\"checkVersion\"`\n+}\n+\n func Default() *Config {\n \treturn &Config{\n \t\tLog: logConfig{\n@@ -118,6 +123,10 @@ func Default() *Config {\n \t\t\tURL:            \"file:/var/opt/flipt/flipt.db\",\n \t\t\tMigrationsPath: \"/etc/flipt/config/migrations\",\n \t\t},\n+\n+\t\tMetadata: metadataConfig{\n+\t\t\tCheckVersion: true,\n+\t\t},\n \t}\n }\n \n@@ -129,6 +138,9 @@ const (\n \t// UI\n \tcfgUIEnabled = \"ui.enabled\"\n \n+\t// Metadata\n+\tcfgMetadataCheckVersion = \"metadata.check_version\"\n+\n \t// CORS\n \tcfgCorsEnabled        = \"cors.enabled\"\n \tcfgCorsAllowedOrigins = \"cors.allowed_origins\"\n@@ -179,6 +191,11 @@ func Load(path string) (*Config, error) {\n \t\tcfg.UI.Enabled = viper.GetBool(cfgUIEnabled)\n \t}\n \n+\t// Metadata\n+\tif viper.IsSet(cfgMetadataCheckVersion) {\n+\t\tcfg.Metadata.CheckVersion = viper.GetBool(cfgMetadataCheckVersion)\n+\t}\n+\n \t// CORS\n \tif viper.IsSet(cfgCorsEnabled) {\n \t\tcfg.Cors.Enabled = viper.GetBool(cfgCorsEnabled)\n"
}