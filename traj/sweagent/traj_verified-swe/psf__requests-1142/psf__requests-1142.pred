{"model_name_or_path": "output", "instance_id": "psf__requests-1142", "model_patch": "diff --git a/repro.py b/repro.py\nnew file mode 100644\nindex 0000000..b3953c7\n--- /dev/null\n+++ b/repro.py\n@@ -0,0 +1,29 @@\n+import sys\n+import json\n+\n+# Ensure local repo is imported, not any installed version\n+import os\n+sys.path.insert(0, os.path.dirname(__file__))\n+\n+import requests\n+\n+# Prepare a GET request without body\n+req = requests.Request('GET', 'http://example.com/')\n+prep = req.prepare()\n+print('Prepared GET headers (no body):')\n+print(dict(prep.headers))\n+print('Has Content-Length?', 'Content-Length' in prep.headers)\n+\n+# Prepare a GET request with data (which is unusual but allowed)\n+req_with_data = requests.Request('GET', 'http://example.com/', data={'a': 'b'})\n+prep_with_data = req_with_data.prepare()\n+print('\\nPrepared GET headers (with body):')\n+print(dict(prep_with_data.headers))\n+print('Has Content-Length?', 'Content-Length' in prep_with_data.headers)\n+\n+# Prepare a POST request with body\n+req_post = requests.Request('POST', 'http://example.com/', data={'a': 'b'})\n+prep_post = req_post.prepare()\n+print('\\nPrepared POST headers (with body):')\n+print(dict(prep_post.headers))\n+print('Has Content-Length?', 'Content-Length' in prep_post.headers)\ndiff --git a/requests/models.py b/requests/models.py\nindex 9926045..2d83ab7 100644\n--- a/requests/models.py\n+++ b/requests/models.py\n@@ -386,12 +386,26 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n         self.body = body\n \n     def prepare_content_length(self, body):\n-        self.headers['Content-Length'] = '0'\n+        \"\"\"Set the Content-Length header if the body has a length.\n+\n+        Do not set Content-Length for requests without a body.\n+        \"\"\"\n+        # If there's no body, don't send a Content-Length header at all.\n+        if body is None:\n+            # Ensure we don't accidentally carry a previous value.\n+            try:\n+                del self.headers['Content-Length']\n+            except KeyError:\n+                pass\n+            return\n+\n+        # For file-like bodies, compute the length from the file pointer.\n         if hasattr(body, 'seek') and hasattr(body, 'tell'):\n             body.seek(0, 2)\n             self.headers['Content-Length'] = str(body.tell())\n             body.seek(0, 0)\n-        elif body is not None:\n+        else:\n+            # For non-file-like bodies, use len() if available.\n             self.headers['Content-Length'] = str(len(body))\n \n     def prepare_auth(self, auth):\n"}