{"model_name_or_path": "output", "instance_id": "sympy__sympy-24213", "model_patch": "diff --git a/repro_units_issue.py b/repro_units_issue.py\nnew file mode 100644\nindex 0000000000..da6ee0811e\n--- /dev/null\n+++ b/repro_units_issue.py\n@@ -0,0 +1,20 @@\n+from sympy.physics import units\n+from sympy.physics.units.systems.si import SI\n+\n+v1 = units.Quantity('v1')\n+SI.set_quantity_dimension(v1, units.velocity)\n+SI.set_quantity_scale_factor(v1, 2 * units.meter / units.second)\n+\n+a1 = units.Quantity('a1')\n+SI.set_quantity_dimension(a1, units.acceleration)\n+SI.set_quantity_scale_factor(a1, -9.8 * units.meter / units.second**2)\n+\n+t1 = units.Quantity('t1')\n+SI.set_quantity_dimension(t1, units.time)\n+SI.set_quantity_scale_factor(t1, 5 * units.second)\n+\n+expr1 = a1*t1 + v1\n+print('Expression:', expr1)\n+print('Dimension expr:', SI.get_dimensional_expr(expr1))\n+print('Collect factor and dimension:')\n+print(SI._collect_factor_and_dimension(expr1))\ndiff --git a/sympy/physics/units/unitsystem.py b/sympy/physics/units/unitsystem.py\nindex a436880c4b..7a681a5819 100644\n--- a/sympy/physics/units/unitsystem.py\n+++ b/sympy/physics/units/unitsystem.py\n@@ -175,7 +175,8 @@ def _collect_factor_and_dimension(self, expr):\n             for addend in expr.args[1:]:\n                 addend_factor, addend_dim = \\\n                     self._collect_factor_and_dimension(addend)\n-                if dim != addend_dim:\n+                # Use dimensional equivalence rather than direct equality\n+                if not self.get_dimension_system().equivalent_dims(dim, addend_dim):\n                     raise ValueError(\n                         'Dimension of \"{}\" is {}, '\n                         'but it should be {}'.format(\n"}