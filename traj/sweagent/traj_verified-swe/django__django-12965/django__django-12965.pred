{"model_name_or_path": "output", "instance_id": "django__django-12965", "model_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex 29e33c075f..1e7a696884 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -1407,7 +1407,14 @@ class SQLInsertCompiler(SQLCompiler):\n class SQLDeleteCompiler(SQLCompiler):\n     @cached_property\n     def single_alias(self):\n-        return sum(self.query.alias_refcount[t] > 0 for t in self.query.alias_map) == 1\n+        # Use the presence of a single table in the alias map to determine\n+        # if we can perform a plain DELETE FROM without a subquery. Relying on\n+        # alias_refcount can return 0 for the base table in delete queries\n+        # (since pre_sql_setup isn't called), causing unnecessary subqueries.\n+        if not self.query.alias_map:\n+            # Ensure the base table alias exists so base_table and alias_map are populated.\n+            self.query.get_initial_alias()\n+        return len(self.query.alias_map) == 1\n \n     def _as_sql(self, query):\n         result = [\n"}