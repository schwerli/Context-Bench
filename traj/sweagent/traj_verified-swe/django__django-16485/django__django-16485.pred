{"model_name_or_path": "output", "instance_id": "django__django-16485", "model_patch": "diff --git a/django/template/defaultfilters.py b/django/template/defaultfilters.py\nindex 23c3a08c67..721685162a 100644\n--- a/django/template/defaultfilters.py\n+++ b/django/template/defaultfilters.py\n@@ -184,6 +184,10 @@ def floatformat(text, arg=-1):\n     units = len(tupl[1])\n     units += -tupl[2] if m else tupl[2]\n     prec = abs(p) + units + 1\n+    # Ensure precision is within valid range for Context.prec. For values like\n+    # Decimal('0.00') and p=0, the calculation above may yield 0; clamp to 1.\n+    if prec < 1:\n+        prec = 1\n \n     # Avoid conversion to scientific notation by accessing `sign`, `digits`,\n     # and `exponent` from Decimal.as_tuple() directly.\ndiff --git a/repro_floatformat.py b/repro_floatformat.py\nnew file mode 100644\nindex 0000000000..092ef98691\n--- /dev/null\n+++ b/repro_floatformat.py\n@@ -0,0 +1,17 @@\n+from decimal import Decimal\n+from django.conf import settings\n+\n+# Minimal settings configuration for using formatting utilities\n+if not settings.configured:\n+    settings.configure(USE_I18N=False, USE_L10N=False)\n+\n+from django.template.defaultfilters import floatformat\n+\n+print('floatformat(\"0.00\", 0) ->', floatformat('0.00', 0))\n+print('floatformat(Decimal(\"0.00\"), 0) ->', floatformat(Decimal('0.00'), 0))\n+print('floatformat(\"0\", 0) ->', floatformat('0', 0))\n+print('floatformat(Decimal(\"0\"), 0) ->', floatformat(Decimal('0'), 0))\n+print('floatformat(\"0.00\", \"0\") ->', floatformat('0.00', '0'))\n+print('floatformat(Decimal(\"0.00\"), \"0\") ->', floatformat(Decimal('0.00'), '0'))\n+print('floatformat(Decimal(\"0.00\"), \"0g\") ->', floatformat(Decimal('0.00'), '0g'))\n+print('floatformat(Decimal(\"0.00\"), \"gu\") ->', floatformat(Decimal('0.00'), 'gu'))\n"}