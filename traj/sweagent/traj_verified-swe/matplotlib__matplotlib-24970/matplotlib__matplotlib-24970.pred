{"model_name_or_path": "output", "instance_id": "matplotlib__matplotlib-24970", "model_patch": "diff --git a/lib/matplotlib/colors.py b/lib/matplotlib/colors.py\nindex 2d3072da04..f440c8934f 100644\n--- a/lib/matplotlib/colors.py\n+++ b/lib/matplotlib/colors.py\n@@ -725,6 +725,14 @@ class Colormap:\n                 # Avoid converting large positive values to negative integers.\n                 np.clip(xa, -1, self.N, out=xa)\n                 xa = xa.astype(int)\n+        else:\n+            # For integer-like inputs (including unsigned types), cast to a signed\n+            # integer type large enough to hold sentinel indices (N, N+1, N+2).\n+            # This avoids NumPy 1.24+ deprecation warnings about assigning\n+            # out-of-bound Python integers (e.g., 256, 257, 258) into small\n+            # unsigned dtypes such as uint8.\n+            if np.issubdtype(xa.dtype, np.integer):\n+                xa = xa.astype(np.intp, copy=False)\n         # Set the over-range indices before the under-range;\n         # otherwise the under-range values get converted to over-range.\n         xa[xa > self.N - 1] = self._i_over\ndiff --git a/repro.py b/repro.py\nnew file mode 100644\nindex 0000000000..0c75e49a60\n--- /dev/null\n+++ b/repro.py\n@@ -0,0 +1,8 @@\n+import sys\n+sys.path.insert(0, \"/testbed/lib\")\n+import matplotlib.pyplot as plt\n+import numpy as np\n+\n+# Trigger the code path mentioned in the PR\n+plt.get_cmap()(np.empty((0, ), dtype=np.uint8))\n+print(\"Completed without NumPy 1.24 deprecation warnings.\")\ndiff --git a/repro_warn.py b/repro_warn.py\nnew file mode 100644\nindex 0000000000..4a75806b8c\n--- /dev/null\n+++ b/repro_warn.py\n@@ -0,0 +1,23 @@\n+import sys, warnings\n+sys.path.insert(0, \"/testbed/lib\")\n+import matplotlib.pyplot as plt\n+import numpy as np\n+\n+warnings.simplefilter(\"always\", DeprecationWarning)\n+\n+# Case 1: Empty uint8 array as in PR\n+with warnings.catch_warnings(record=True) as w:\n+    plt.get_cmap()(np.empty((0,), dtype=np.uint8))\n+    print(\"Case 1 warnings:\", [str(x.message) for x in w])\n+\n+# Case 2: Non-empty uint8 array\n+with warnings.catch_warnings(record=True) as w:\n+    plt.get_cmap()(np.array([0, 1, 255], dtype=np.uint8))\n+    print(\"Case 2 warnings:\", [str(x.message) for x in w])\n+\n+# Case 3: Float array that triggers conversion\n+with warnings.catch_warnings(record=True) as w:\n+    plt.get_cmap()(np.array([0.0, 0.5, 1.0], dtype=float))\n+    print(\"Case 3 warnings:\", [str(x.message) for x in w])\n+\n+print(\"All cases executed.\")\n"}