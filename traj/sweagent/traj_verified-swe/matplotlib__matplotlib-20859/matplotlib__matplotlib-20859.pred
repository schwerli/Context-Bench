{"model_name_or_path": "output", "instance_id": "matplotlib__matplotlib-20859", "model_patch": "diff --git a/bug_repro.py b/bug_repro.py\nnew file mode 100644\nindex 0000000000..453ee064a5\n--- /dev/null\n+++ b/bug_repro.py\n@@ -0,0 +1,13 @@\n+import sys\n+sys.path.insert(0, \"/testbed/lib\")\n+import matplotlib\n+matplotlib.use(\"Agg\")\n+import matplotlib.pyplot as plt\n+\n+fig = plt.figure()\n+subfig = fig.subfigures()\n+ax = subfig.subplots()\n+ax.plot([0, 1, 2], [0, 1, 2], label=\"test\")\n+subfig.legend()\n+fig.savefig(\"/testbed/tmp/subfigure_legend.png\")\n+print(\"SubFigure legend created and figure saved successfully\")\ndiff --git a/lib/matplotlib/legend.py b/lib/matplotlib/legend.py\nindex 44ab024698..1b8cee8250 100644\n--- a/lib/matplotlib/legend.py\n+++ b/lib/matplotlib/legend.py\n@@ -360,7 +360,7 @@ class Legend(Artist):\n         \"\"\"\n         # local import only to avoid circularity\n         from matplotlib.axes import Axes\n-        from matplotlib.figure import Figure\n+        from matplotlib.figure import FigureBase\n \n         super().__init__()\n \n@@ -434,7 +434,7 @@ class Legend(Artist):\n             self.isaxes = True\n             self.axes = parent\n             self.set_figure(parent.figure)\n-        elif isinstance(parent, Figure):\n+        elif isinstance(parent, FigureBase):\n             self.isaxes = False\n             self.set_figure(parent)\n         else:\ndiff --git a/tmp/subfigure_legend.png b/tmp/subfigure_legend.png\nnew file mode 100644\nindex 0000000000..cbe7c96916\nBinary files /dev/null and b/tmp/subfigure_legend.png differ\n"}