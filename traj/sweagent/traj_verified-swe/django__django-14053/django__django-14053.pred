{"model_name_or_path": "output", "instance_id": "django__django-14053", "model_patch": "diff --git a/django/contrib/staticfiles/storage.py b/django/contrib/staticfiles/storage.py\nindex 494890cc23..cb3ca9a3e2 100644\n--- a/django/contrib/staticfiles/storage.py\n+++ b/django/contrib/staticfiles/storage.py\n@@ -220,6 +220,8 @@ class HashedFilesMixin:\n \n         # where to store the new paths\n         hashed_files = {}\n+        # collect final results per original file to avoid duplicate yields\n+        results = {}\n \n         # build a list of adjustable files\n         adjustable_paths = [\n@@ -227,27 +229,52 @@ class HashedFilesMixin:\n             if matches_patterns(path, self._patterns)\n         ]\n         # Do a single pass first. Post-process all files once, then repeat for\n-        # adjustable files.\n+        # adjustable files. Aggregate results instead of yielding immediately to\n+        # avoid emitting intermediate states for the same original file.\n         for name, hashed_name, processed, _ in self._post_process(paths, adjustable_paths, hashed_files):\n-            yield name, hashed_name, processed\n+            if isinstance(processed, Exception):\n+                # Propagate errors immediately.\n+                yield name, hashed_name, processed\n+            else:\n+                prev = results.get(name)\n+                # Mark as processed if any pass performed processing for this file.\n+                aggregated_processed = processed or (prev[1] if prev else False)\n+                results[name] = (hashed_name, aggregated_processed)\n \n+        # Narrow to adjustable paths for subsequent passes.\n         paths = {path: paths[path] for path in adjustable_paths}\n \n+        # Track if the maximum number of passes was exceeded without reaching a\n+        # substitutions-free pass.\n+        exceeded_max_passes = True\n         for i in range(self.max_post_process_passes):\n-            substitutions = False\n+            any_substitutions = False\n             for name, hashed_name, processed, subst in self._post_process(paths, adjustable_paths, hashed_files):\n-                yield name, hashed_name, processed\n-                substitutions = substitutions or subst\n+                if isinstance(processed, Exception):\n+                    # Propagate errors immediately.\n+                    yield name, hashed_name, processed\n+                else:\n+                    prev = results.get(name)\n+                    aggregated_processed = processed or (prev[1] if prev else False)\n+                    results[name] = (hashed_name, aggregated_processed)\n+                any_substitutions = any_substitutions or subst\n \n-            if not substitutions:\n+            if not any_substitutions:\n+                exceeded_max_passes = False\n                 break\n \n-        if substitutions:\n+        if exceeded_max_passes:\n+            # Yield an error to match existing behavior when max passes are exceeded.\n             yield 'All', None, RuntimeError('Max post-process passes exceeded.')\n \n         # Store the processed paths\n         self.hashed_files.update(hashed_files)\n \n+        # Finally, yield each original file once with its final hashed name and\n+        # whether it was processed at any point.\n+        for name, (hashed_name, processed) in results.items():\n+            yield name, hashed_name, processed\n+\n     def _post_process(self, paths, adjustable_paths, hashed_files):\n         # Sort the files by directory level\n         def path_level(name):\ndiff --git a/repro_faulty_postprocess.py b/repro_faulty_postprocess.py\nnew file mode 100644\nindex 0000000000..54b679d526\n--- /dev/null\n+++ b/repro_faulty_postprocess.py\n@@ -0,0 +1,28 @@\n+import os, sys\n+from io import StringIO\n+\n+sys.path.insert(0, os.path.join(os.path.dirname(__file__), 'tests'))\n+\n+from django.conf import settings\n+from django.core.management import call_command\n+from django import setup as django_setup\n+\n+from staticfiles_tests.settings import TEST_SETTINGS, TEST_ROOT\n+\n+cfg = dict(TEST_SETTINGS)\n+cfg['STATICFILES_STORAGE'] = 'django.contrib.staticfiles.storage.ManifestStaticFilesStorage'\n+cfg['STATICFILES_DIRS'] = [os.path.join(TEST_ROOT, 'project', 'faulty')]\n+cfg['STATICFILES_FINDERS'] = ['django.contrib.staticfiles.finders.FileSystemFinder']\n+settings.configure(**cfg)\n+django_setup()\n+\n+stdout = StringIO(); stderr = StringIO()\n+try:\n+    call_command('collectstatic', interactive=False, verbosity=2, stdout=stdout, stderr=stderr, post_process=True)\n+    print('collectstatic succeeded unexpectedly')\n+except Exception as e:\n+    print('Caught Exception:', type(e).__name__, e)\n+print('STDERR:')\n+print(stderr.getvalue())\n+print('STDOUT:')\n+print(stdout.getvalue())\ndiff --git a/repro_import_loop.py b/repro_import_loop.py\nnew file mode 100644\nindex 0000000000..02c7416650\n--- /dev/null\n+++ b/repro_import_loop.py\n@@ -0,0 +1,30 @@\n+import os, sys\n+from io import StringIO\n+\n+sys.path.insert(0, os.path.join(os.path.dirname(__file__), 'tests'))\n+\n+from django.conf import settings\n+from django.core.management import call_command\n+from django import setup as django_setup\n+from django.test import override_settings\n+\n+from staticfiles_tests.settings import TEST_SETTINGS\n+\n+cfg = dict(TEST_SETTINGS)\n+cfg['STATICFILES_STORAGE'] = 'django.contrib.staticfiles.storage.ManifestStaticFilesStorage'\n+from staticfiles_tests.settings import TEST_ROOT\n+cfg['STATICFILES_DIRS'] = [os.path.join(TEST_ROOT, 'project', 'loop')]\n+cfg['STATICFILES_FINDERS'] = ['django.contrib.staticfiles.finders.FileSystemFinder']\n+settings.configure(**cfg)\n+django_setup()\n+\n+stdout = StringIO(); stderr = StringIO()\n+try:\n+    call_command('collectstatic', interactive=False, verbosity=2, stdout=stdout, stderr=stderr, post_process=True)\n+    print('collectstatic succeeded unexpectedly')\n+except RuntimeError as e:\n+    print('Caught RuntimeError:', e)\n+print('STDERR:')\n+print(stderr.getvalue())\n+print('STDOUT:')\n+print(stdout.getvalue())\ndiff --git a/repro_staticfiles_yield.py b/repro_staticfiles_yield.py\nnew file mode 100644\nindex 0000000000..b5ceae0848\n--- /dev/null\n+++ b/repro_staticfiles_yield.py\n@@ -0,0 +1,62 @@\n+import os, sys\n+from io import StringIO\n+from collections import defaultdict\n+\n+# Ensure tests package is importable\n+sys.path.insert(0, os.path.join(os.path.dirname(__file__), 'tests'))\n+\n+from django.conf import settings\n+from django.core.management import call_command\n+from django import setup as django_setup\n+\n+from staticfiles_tests.settings import TEST_SETTINGS\n+\n+# Configure settings\n+cfg = dict(TEST_SETTINGS)\n+cfg['STATICFILES_STORAGE'] = 'django.contrib.staticfiles.storage.ManifestStaticFilesStorage'\n+# Make sure STATIC_ROOT exists and is empty\n+static_root = cfg['STATIC_ROOT']\n+os.makedirs(static_root, exist_ok=True)\n+# Clear STATIC_ROOT content\n+for root, dirs, files in os.walk(static_root):\n+    for f in files:\n+        try:\n+            os.remove(os.path.join(root, f))\n+        except FileNotFoundError:\n+            pass\n+    for d in dirs:\n+        try:\n+            os.rmdir(os.path.join(root, d))\n+        except OSError:\n+            pass\n+\n+settings.configure(**cfg)\n+django_setup()\n+\n+# Run collectstatic and capture output\n+stdout = StringIO()\n+stderr = StringIO()\n+call_command('collectstatic', interactive=False, verbosity=2, stdout=stdout, stderr=stderr, post_process=True)\n+\n+out = stdout.getvalue()\n+print(out)\n+\n+# Analyze 'Post-processed' lines for duplicates\n+counts = defaultdict(int)\n+for line in out.splitlines():\n+    line = line.strip()\n+    if line.startswith(\"Post-processed '\"):\n+        # Extract original path inside quotes\n+        try:\n+            orig = line.split(\"'\")[1]\n+        except Exception:\n+            continue\n+        counts[orig] += 1\n+\n+print(\"\\nDuplicate yield report:\")\n+for orig, cnt in sorted(counts.items()):\n+    if cnt > 1:\n+        print(f\"{orig}: yielded {cnt} times\")\n+    else:\n+        print(f\"{orig}: yielded once\")\n+\ndiff --git a/tests/staticfiles_tests/project/site_media/static/absolute_root.css b/tests/staticfiles_tests/project/site_media/static/absolute_root.css\nnew file mode 100644\nindex 0000000000..b35ff47c9e\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/absolute_root.css\n@@ -0,0 +1 @@\n+@import url(\"/static/styles_root.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/absolute_root.f821df1b64f7.css b/tests/staticfiles_tests/project/site_media/static/absolute_root.f821df1b64f7.css\nnew file mode 100644\nindex 0000000000..2d40dc386f\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/absolute_root.f821df1b64f7.css\n@@ -0,0 +1 @@\n+@import url(\"/static/styles_root.401f2509a628.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/bar.365163d2ac9a.css b/tests/staticfiles_tests/project/site_media/static/bar.365163d2ac9a.css\nnew file mode 100644\nindex 0000000000..f549b1c067\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/bar.365163d2ac9a.css\n@@ -0,0 +1 @@\n+@import url(\"foo.c78f831dd30d.css\")\ndiff --git a/tests/staticfiles_tests/project/site_media/static/bar.css b/tests/staticfiles_tests/project/site_media/static/bar.css\nnew file mode 100644\nindex 0000000000..1f11a22cbf\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/bar.css\n@@ -0,0 +1 @@\n+@import url(\"foo.css\")\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/absolute.css b/tests/staticfiles_tests/project/site_media/static/cached/absolute.css\nnew file mode 100644\nindex 0000000000..6a2040b413\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/absolute.css\n@@ -0,0 +1,5 @@\n+@import url(\"/static/cached/styles.css\");\n+@import url(\"/static/styles_root.css\");\n+body {\n+    background: #d3d6d8 url(/static/cached/img/relative.png);\n+}\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/absolute.eb04def9f9a4.css b/tests/staticfiles_tests/project/site_media/static/cached/absolute.eb04def9f9a4.css\nnew file mode 100644\nindex 0000000000..b34c683486\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/absolute.eb04def9f9a4.css\n@@ -0,0 +1,5 @@\n+@import url(\"/static/cached/styles.5e0040571e1a.css\");\n+@import url(\"/static/styles_root.401f2509a628.css\");\n+body {\n+    background: #d3d6d8 url(\"/static/cached/img/relative.acae32e4532b.png\");\n+}\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.b8d603e42714.svg b/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.b8d603e42714.svg\nnew file mode 100644\nindex 0000000000..0282375915\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.b8d603e42714.svg\n@@ -0,0 +1 @@\n+not really a SVG ;)\n\\ No newline at end of file\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.b9b105392eb8.eot b/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.b9b105392eb8.eot\nnew file mode 100644\nindex 0000000000..fdd7138c52\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.b9b105392eb8.eot\n@@ -0,0 +1 @@\n+not really an EOT ;)\n\\ No newline at end of file\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.eot b/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.eot\nnew file mode 100644\nindex 0000000000..fdd7138c52\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.eot\n@@ -0,0 +1 @@\n+not really an EOT ;)\n\\ No newline at end of file\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.svg b/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.svg\nnew file mode 100644\nindex 0000000000..0282375915\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/css/fonts/font.svg\n@@ -0,0 +1 @@\n+not really a SVG ;)\n\\ No newline at end of file\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/fragments.a60c0e74834f.css b/tests/staticfiles_tests/project/site_media/static/cached/css/fragments.a60c0e74834f.css\nnew file mode 100644\nindex 0000000000..a7eddd8554\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/css/fragments.a60c0e74834f.css\n@@ -0,0 +1,9 @@\n+@font-face {\n+    src: url(\"fonts/font.b9b105392eb8.eot?#iefix\") format('embedded-opentype'),\n+         url(\"fonts/font.b8d603e42714.svg#webfontIyfZbseF\") format('svg');\n+         url(\"fonts/font.b8d603e42714.svg#path/to/../../fonts/font.svg\") format('svg');\n+         url('data:font/woff;charset=utf-8;base64,d09GRgABAAAAADJoAA0AAAAAR2QAAQAAAAAAAAAAAAA');\n+}\n+div {\n+    behavior: url(\"#default#VML\");\n+}\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/fragments.css b/tests/staticfiles_tests/project/site_media/static/cached/css/fragments.css\nnew file mode 100644\nindex 0000000000..533d7617aa\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/css/fragments.css\n@@ -0,0 +1,9 @@\n+@font-face {\n+    src: url('fonts/font.eot?#iefix') format('embedded-opentype'),\n+         url('fonts/font.svg#webfontIyfZbseF') format('svg');\n+         url('fonts/font.svg#path/to/../../fonts/font.svg') format('svg');\n+         url('data:font/woff;charset=utf-8;base64,d09GRgABAAAAADJoAA0AAAAAR2QAAQAAAAAAAAAAAAA');\n+}\n+div {\n+    behavior: url(\"#default#VML\");\n+}\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/ignored.554da52152af.css b/tests/staticfiles_tests/project/site_media/static/cached/css/ignored.554da52152af.css\nnew file mode 100644\nindex 0000000000..83b1d5ebf8\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/css/ignored.554da52152af.css\n@@ -0,0 +1,9 @@\n+body {\n+    background: url(\"#foobar\");\n+    background: url(\"http:foobar\");\n+    background: url(\"https:foobar\");\n+    background: url(\"data:foobar\");\n+    background: url(\"chrome:foobar\");\n+    background: url(\"//foobar\");\n+}\n+\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/ignored.css b/tests/staticfiles_tests/project/site_media/static/cached/css/ignored.css\nnew file mode 100644\nindex 0000000000..83b1d5ebf8\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/css/ignored.css\n@@ -0,0 +1,9 @@\n+body {\n+    background: url(\"#foobar\");\n+    background: url(\"http:foobar\");\n+    background: url(\"https:foobar\");\n+    background: url(\"data:foobar\");\n+    background: url(\"chrome:foobar\");\n+    background: url(\"//foobar\");\n+}\n+\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/img/window.acae32e4532b.png b/tests/staticfiles_tests/project/site_media/static/cached/css/img/window.acae32e4532b.png\nnew file mode 100644\nindex 0000000000..ba48325c0a\nBinary files /dev/null and b/tests/staticfiles_tests/project/site_media/static/cached/css/img/window.acae32e4532b.png differ\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/img/window.png b/tests/staticfiles_tests/project/site_media/static/cached/css/img/window.png\nnew file mode 100644\nindex 0000000000..ba48325c0a\nBinary files /dev/null and b/tests/staticfiles_tests/project/site_media/static/cached/css/img/window.png differ\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/window.5d5c10836967.css b/tests/staticfiles_tests/project/site_media/static/cached/css/window.5d5c10836967.css\nnew file mode 100644\nindex 0000000000..6121708ce2\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/css/window.5d5c10836967.css\n@@ -0,0 +1,3 @@\n+body {\n+    background: #d3d6d8 url(\"img/window.acae32e4532b.png\");\n+}\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/css/window.css b/tests/staticfiles_tests/project/site_media/static/cached/css/window.css\nnew file mode 100644\nindex 0000000000..770e4001e6\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/css/window.css\n@@ -0,0 +1,3 @@\n+body {\n+    background: #d3d6d8 url(\"img/window.png\");\n+}\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/img/relative.acae32e4532b.png b/tests/staticfiles_tests/project/site_media/static/cached/img/relative.acae32e4532b.png\nnew file mode 100644\nindex 0000000000..ba48325c0a\nBinary files /dev/null and b/tests/staticfiles_tests/project/site_media/static/cached/img/relative.acae32e4532b.png differ\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/img/relative.png b/tests/staticfiles_tests/project/site_media/static/cached/img/relative.png\nnew file mode 100644\nindex 0000000000..ba48325c0a\nBinary files /dev/null and b/tests/staticfiles_tests/project/site_media/static/cached/img/relative.png differ\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/import.css b/tests/staticfiles_tests/project/site_media/static/cached/import.css\nnew file mode 100644\nindex 0000000000..6bc7ce04c4\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/import.css\n@@ -0,0 +1 @@\n+@import 'styles.css';\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/import.f53576679e5a.css b/tests/staticfiles_tests/project/site_media/static/cached/import.f53576679e5a.css\nnew file mode 100644\nindex 0000000000..233fc72c6a\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/import.f53576679e5a.css\n@@ -0,0 +1 @@\n+@import url(\"styles.5e0040571e1a.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/other.css b/tests/staticfiles_tests/project/site_media/static/cached/other.css\nnew file mode 100644\nindex 0000000000..e69de29bb2\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/other.d41d8cd98f00.css b/tests/staticfiles_tests/project/site_media/static/cached/other.d41d8cd98f00.css\nnew file mode 100644\nindex 0000000000..e69de29bb2\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/relative.c3e9e1ea6f2e.css b/tests/staticfiles_tests/project/site_media/static/cached/relative.c3e9e1ea6f2e.css\nnew file mode 100644\nindex 0000000000..feee5022d6\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/relative.c3e9e1ea6f2e.css\n@@ -0,0 +1,6 @@\n+@import url(\"../cached/styles.5e0040571e1a.css\");\n+@import url(\"absolute.eb04def9f9a4.css\");\n+@import url(\"absolute.eb04def9f9a4.css#eggs\");\n+body {\n+    background: #d3d6d8 url(\"img/relative.acae32e4532b.png\");\n+}\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/relative.css b/tests/staticfiles_tests/project/site_media/static/cached/relative.css\nnew file mode 100644\nindex 0000000000..68995c4fed\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/relative.css\n@@ -0,0 +1,6 @@\n+@import url(\"../cached/styles.css\");\n+@import url(\"absolute.css\");\n+@import url(\"absolute.css#eggs\");\n+body {\n+    background: #d3d6d8 url(img/relative.png);\n+}\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/styles.5e0040571e1a.css b/tests/staticfiles_tests/project/site_media/static/cached/styles.5e0040571e1a.css\nnew file mode 100644\nindex 0000000000..78239846fd\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/styles.5e0040571e1a.css\n@@ -0,0 +1 @@\n+@import url(\"other.d41d8cd98f00.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/styles.css b/tests/staticfiles_tests/project/site_media/static/cached/styles.css\nnew file mode 100644\nindex 0000000000..68896f4973\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/styles.css\n@@ -0,0 +1 @@\n+@import url(\"other.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/styles_insensitive.3fa427592a53.css b/tests/staticfiles_tests/project/site_media/static/cached/styles_insensitive.3fa427592a53.css\nnew file mode 100644\nindex 0000000000..d2fe21a6f6\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/styles_insensitive.3fa427592a53.css\n@@ -0,0 +1 @@\n+@IMporT url(\"other.d41d8cd98f00.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/styles_insensitive.css b/tests/staticfiles_tests/project/site_media/static/cached/styles_insensitive.css\nnew file mode 100644\nindex 0000000000..3cd3d08349\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/styles_insensitive.css\n@@ -0,0 +1 @@\n+@IMporT uRL(\"other.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/test.62789ffcd280.js b/tests/staticfiles_tests/project/site_media/static/cached/test.62789ffcd280.js\nnew file mode 100644\nindex 0000000000..3d1c431aff\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/test.62789ffcd280.js\n@@ -0,0 +1 @@\n+myVar = url(\"import.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/test.js b/tests/staticfiles_tests/project/site_media/static/cached/test.js\nnew file mode 100644\nindex 0000000000..3d1c431aff\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/test.js\n@@ -0,0 +1 @@\n+myVar = url(\"import.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/url.902310b73412.css b/tests/staticfiles_tests/project/site_media/static/cached/url.902310b73412.css\nnew file mode 100644\nindex 0000000000..c0974475ca\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/url.902310b73412.css\n@@ -0,0 +1 @@\n+@import url(\"https://www.djangoproject.com/m/css/base.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/cached/url.css b/tests/staticfiles_tests/project/site_media/static/cached/url.css\nnew file mode 100644\nindex 0000000000..c0974475ca\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/cached/url.css\n@@ -0,0 +1 @@\n+@import url(\"https://www.djangoproject.com/m/css/base.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/faulty.css b/tests/staticfiles_tests/project/site_media/static/faulty.css\nnew file mode 100644\nindex 0000000000..ca57c77e55\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/faulty.css\n@@ -0,0 +1 @@\n+@import url(\"missing.css\");\ndiff --git a/tests/staticfiles_tests/project/site_media/static/file2.ae652b5c514c.txt b/tests/staticfiles_tests/project/site_media/static/file2.ae652b5c514c.txt\nnew file mode 100644\nindex 0000000000..aa264cab9b\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/file2.ae652b5c514c.txt\n@@ -0,0 +1 @@\n+file2 in no_label_app\ndiff --git a/tests/staticfiles_tests/project/site_media/static/file2.txt b/tests/staticfiles_tests/project/site_media/static/file2.txt\nnew file mode 100644\nindex 0000000000..aa264cab9b\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/file2.txt\n@@ -0,0 +1 @@\n+file2 in no_label_app\ndiff --git a/tests/staticfiles_tests/project/site_media/static/foo.css b/tests/staticfiles_tests/project/site_media/static/foo.css\nnew file mode 100644\nindex 0000000000..0903a70802\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/foo.css\n@@ -0,0 +1 @@\n+@import url(\"bar.css\")\ndiff --git a/tests/staticfiles_tests/project/site_media/static/foo.f45de2081854.css b/tests/staticfiles_tests/project/site_media/static/foo.f45de2081854.css\nnew file mode 100644\nindex 0000000000..03619fef05\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/foo.f45de2081854.css\n@@ -0,0 +1 @@\n+@import url(\"bar.365163d2ac9a.css\")\ndiff --git a/tests/staticfiles_tests/project/site_media/static/media-file.65b17f937dfa.txt b/tests/staticfiles_tests/project/site_media/static/media-file.65b17f937dfa.txt\nnew file mode 100644\nindex 0000000000..466922d07a\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/media-file.65b17f937dfa.txt\n@@ -0,0 +1 @@\n+Media file.\ndiff --git a/tests/staticfiles_tests/project/site_media/static/media-file.txt b/tests/staticfiles_tests/project/site_media/static/media-file.txt\nnew file mode 100644\nindex 0000000000..466922d07a\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/media-file.txt\n@@ -0,0 +1 @@\n+Media file.\ndiff --git a/tests/staticfiles_tests/project/site_media/static/nested/css/base.b595a74e1f56.css b/tests/staticfiles_tests/project/site_media/static/nested/css/base.b595a74e1f56.css\nnew file mode 100644\nindex 0000000000..06041ca25f\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/nested/css/base.b595a74e1f56.css\n@@ -0,0 +1 @@\n+html {height: 100%;}\ndiff --git a/tests/staticfiles_tests/project/site_media/static/nested/css/base.css b/tests/staticfiles_tests/project/site_media/static/nested/css/base.css\nnew file mode 100644\nindex 0000000000..06041ca25f\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/nested/css/base.css\n@@ -0,0 +1 @@\n+html {height: 100%;}\ndiff --git a/tests/staticfiles_tests/project/site_media/static/pathlib.df92d5f4684d.txt b/tests/staticfiles_tests/project/site_media/static/pathlib.df92d5f4684d.txt\nnew file mode 100644\nindex 0000000000..c7709d3d41\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/pathlib.df92d5f4684d.txt\n@@ -0,0 +1 @@\n+pathlib\ndiff --git a/tests/staticfiles_tests/project/site_media/static/pathlib.txt b/tests/staticfiles_tests/project/site_media/static/pathlib.txt\nnew file mode 100644\nindex 0000000000..c7709d3d41\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/pathlib.txt\n@@ -0,0 +1 @@\n+pathlib\ndiff --git a/tests/staticfiles_tests/project/site_media/static/prefix/test.131f0ab129ae.txt b/tests/staticfiles_tests/project/site_media/static/prefix/test.131f0ab129ae.txt\nnew file mode 100644\nindex 0000000000..d3a017895c\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/prefix/test.131f0ab129ae.txt\n@@ -0,0 +1 @@\n+Prefix!\n\\ No newline at end of file\ndiff --git a/tests/staticfiles_tests/project/site_media/static/prefix/test.txt b/tests/staticfiles_tests/project/site_media/static/prefix/test.txt\nnew file mode 100644\nindex 0000000000..d3a017895c\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/prefix/test.txt\n@@ -0,0 +1 @@\n+Prefix!\n\\ No newline at end of file\ndiff --git a/tests/staticfiles_tests/project/site_media/static/staticfiles.json b/tests/staticfiles_tests/project/site_media/static/staticfiles.json\nnew file mode 100644\nindex 0000000000..121c5f12b6\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/staticfiles.json\n@@ -0,0 +1 @@\n+{\"paths\": {\"cached/css/fonts/font.eot\": \"cached/css/fonts/font.b9b105392eb8.eot\", \"cached/css/fonts/font.svg\": \"cached/css/fonts/font.b8d603e42714.svg\", \"cached/css/img/window.png\": \"cached/css/img/window.acae32e4532b.png\", \"nested/css/base.css\": \"nested/css/base.b595a74e1f56.css\", \"cached/css/window.css\": \"cached/css/window.5d5c10836967.css\", \"cached/css/ignored.css\": \"cached/css/ignored.554da52152af.css\", \"cached/css/fragments.css\": \"cached/css/fragments.a60c0e74834f.css\", \"cached/img/relative.png\": \"cached/img/relative.acae32e4532b.png\", \"test/vendor/module.js\": \"test/vendor/module.d41d8cd98f00.js\", \"test/file.txt\": \"test/file.dad0999e4f8f.txt\", \"test/camelCase.txt\": \"test/camelCase.dcc960fbf12d.txt\", \"subdir/test.txt\": \"subdir/test.b3eff404e5bb.txt\", \"cached/test.js\": \"cached/test.62789ffcd280.js\", \"cached/other.css\": \"cached/other.d41d8cd98f00.css\", \"cached/absolute.css\": \"cached/absolute.eb04def9f9a4.css\", \"cached/styles_insensitive.css\": \"cached/styles_insensitive.3fa427592a53.css\", \"cached/relative.css\": \"cached/relative.c3e9e1ea6f2e.css\", \"cached/import.css\": \"cached/import.f53576679e5a.css\", \"cached/url.css\": \"cached/url.902310b73412.css\", \"cached/styles.css\": \"cached/styles.5e0040571e1a.css\", \"prefix/test.txt\": \"prefix/test.131f0ab129ae.txt\", \"test/test.ignoreme\": \"test/test.a88291139d77.ignoreme\", \"test/%2F.txt\": \"test/.txt.fd1cb434fc14\", \"test/nonascii.css\": \"test/nonascii.a5155db9d7cc.css\", \"test/window.png\": \"test/window.9224bd75b323.png\", \"test/file1.txt\": \"test/file1.6c0403df55de.txt\", \"test/\\u2297.txt\": \"test/\\u2297.8a3dda0dff20.txt\", \"test.txt\": \"test.b3eff404e5bb.txt\", \"absolute_root.css\": \"absolute_root.f821df1b64f7.css\", \"styles_root.css\": \"styles_root.401f2509a628.css\", \"pathlib.txt\": \"pathlib.df92d5f4684d.txt\", \"file2.txt\": \"file2.ae652b5c514c.txt\", \"media-file.txt\": \"media-file.65b17f937dfa.txt\"}, \"version\": \"1.0\"}\n\\ No newline at end of file\ndiff --git a/tests/staticfiles_tests/project/site_media/static/styles_root.401f2509a628.css b/tests/staticfiles_tests/project/site_media/static/styles_root.401f2509a628.css\nnew file mode 100644\nindex 0000000000..64512630cb\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/styles_root.401f2509a628.css\n@@ -0,0 +1 @@\n+/* see cached/absolute.css and absolute_root.css */\ndiff --git a/tests/staticfiles_tests/project/site_media/static/styles_root.css b/tests/staticfiles_tests/project/site_media/static/styles_root.css\nnew file mode 100644\nindex 0000000000..64512630cb\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/styles_root.css\n@@ -0,0 +1 @@\n+/* see cached/absolute.css and absolute_root.css */\ndiff --git a/tests/staticfiles_tests/project/site_media/static/subdir/test.b3eff404e5bb.txt b/tests/staticfiles_tests/project/site_media/static/subdir/test.b3eff404e5bb.txt\nnew file mode 100644\nindex 0000000000..04326a212d\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/subdir/test.b3eff404e5bb.txt\n@@ -0,0 +1 @@\n+Can we find this file?\ndiff --git a/tests/staticfiles_tests/project/site_media/static/subdir/test.txt b/tests/staticfiles_tests/project/site_media/static/subdir/test.txt\nnew file mode 100644\nindex 0000000000..04326a212d\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/subdir/test.txt\n@@ -0,0 +1 @@\n+Can we find this file?\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test.b3eff404e5bb.txt b/tests/staticfiles_tests/project/site_media/static/test.b3eff404e5bb.txt\nnew file mode 100644\nindex 0000000000..04326a212d\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test.b3eff404e5bb.txt\n@@ -0,0 +1 @@\n+Can we find this file?\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test.txt b/tests/staticfiles_tests/project/site_media/static/test.txt\nnew file mode 100644\nindex 0000000000..04326a212d\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test.txt\n@@ -0,0 +1 @@\n+Can we find this file?\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/%2F.txt b/tests/staticfiles_tests/project/site_media/static/test/%2F.txt\nnew file mode 100644\nindex 0000000000..d98b646c7c\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/%2F.txt\n@@ -0,0 +1 @@\n+%2F content\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/.txt.fd1cb434fc14 b/tests/staticfiles_tests/project/site_media/static/test/.txt.fd1cb434fc14\nnew file mode 100644\nindex 0000000000..d98b646c7c\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/.txt.fd1cb434fc14\n@@ -0,0 +1 @@\n+%2F content\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/camelCase.dcc960fbf12d.txt b/tests/staticfiles_tests/project/site_media/static/test/camelCase.dcc960fbf12d.txt\nnew file mode 100644\nindex 0000000000..b4f8882668\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/camelCase.dcc960fbf12d.txt\n@@ -0,0 +1 @@\n+This file is named with camelCase.\n\\ No newline at end of file\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/camelCase.txt b/tests/staticfiles_tests/project/site_media/static/test/camelCase.txt\nnew file mode 100644\nindex 0000000000..b4f8882668\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/camelCase.txt\n@@ -0,0 +1 @@\n+This file is named with camelCase.\n\\ No newline at end of file\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/file.dad0999e4f8f.txt b/tests/staticfiles_tests/project/site_media/static/test/file.dad0999e4f8f.txt\nnew file mode 100644\nindex 0000000000..fdeaa23254\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/file.dad0999e4f8f.txt\n@@ -0,0 +1,2 @@\n+In STATICFILES_DIRS directory.\n+\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/file.txt b/tests/staticfiles_tests/project/site_media/static/test/file.txt\nnew file mode 100644\nindex 0000000000..fdeaa23254\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/file.txt\n@@ -0,0 +1,2 @@\n+In STATICFILES_DIRS directory.\n+\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/file1.6c0403df55de.txt b/tests/staticfiles_tests/project/site_media/static/test/file1.6c0403df55de.txt\nnew file mode 100644\nindex 0000000000..9f9a8d92ab\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/file1.6c0403df55de.txt\n@@ -0,0 +1 @@\n+file1 in the app dir\n\\ No newline at end of file\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/file1.txt b/tests/staticfiles_tests/project/site_media/static/test/file1.txt\nnew file mode 100644\nindex 0000000000..9f9a8d92ab\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/file1.txt\n@@ -0,0 +1 @@\n+file1 in the app dir\n\\ No newline at end of file\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/nonascii.a5155db9d7cc.css b/tests/staticfiles_tests/project/site_media/static/test/nonascii.a5155db9d7cc.css\nnew file mode 100644\nindex 0000000000..c0e40f7061\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/nonascii.a5155db9d7cc.css\n@@ -0,0 +1,5 @@\n+body {\n+  background: url(\"window.9224bd75b323.png\");\n+}\n+\n+.snowman:before { content: \"\u2603\"; }\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/nonascii.css b/tests/staticfiles_tests/project/site_media/static/test/nonascii.css\nnew file mode 100644\nindex 0000000000..a5358f6ede\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/nonascii.css\n@@ -0,0 +1,5 @@\n+body {\n+  background: url('window.png');\n+}\n+\n+.snowman:before { content: \"\u2603\"; }\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/test.a88291139d77.ignoreme b/tests/staticfiles_tests/project/site_media/static/test/test.a88291139d77.ignoreme\nnew file mode 100644\nindex 0000000000..cef6c23575\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/test.a88291139d77.ignoreme\n@@ -0,0 +1 @@\n+This file should be ignored.\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/test.ignoreme b/tests/staticfiles_tests/project/site_media/static/test/test.ignoreme\nnew file mode 100644\nindex 0000000000..cef6c23575\n--- /dev/null\n+++ b/tests/staticfiles_tests/project/site_media/static/test/test.ignoreme\n@@ -0,0 +1 @@\n+This file should be ignored.\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/vendor/module.d41d8cd98f00.js b/tests/staticfiles_tests/project/site_media/static/test/vendor/module.d41d8cd98f00.js\nnew file mode 100644\nindex 0000000000..e69de29bb2\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/vendor/module.js b/tests/staticfiles_tests/project/site_media/static/test/vendor/module.js\nnew file mode 100644\nindex 0000000000..e69de29bb2\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/window.9224bd75b323.png b/tests/staticfiles_tests/project/site_media/static/test/window.9224bd75b323.png\nnew file mode 100644\nindex 0000000000..89738479c0\nBinary files /dev/null and b/tests/staticfiles_tests/project/site_media/static/test/window.9224bd75b323.png differ\ndiff --git a/tests/staticfiles_tests/project/site_media/static/test/window.png b/tests/staticfiles_tests/project/site_media/static/test/window.png\nnew file mode 100644\nindex 0000000000..89738479c0\nBinary files /dev/null and b/tests/staticfiles_tests/project/site_media/static/test/window.png differ\ndiff --git \"a/tests/staticfiles_tests/project/site_media/static/test/\\342\\212\\227.8a3dda0dff20.txt\" \"b/tests/staticfiles_tests/project/site_media/static/test/\\342\\212\\227.8a3dda0dff20.txt\"\nnew file mode 100644\nindex 0000000000..598ebdd978\n--- /dev/null\n+++ \"b/tests/staticfiles_tests/project/site_media/static/test/\\342\\212\\227.8a3dda0dff20.txt\"\n@@ -0,0 +1 @@\n+\u2297 in the app dir\ndiff --git \"a/tests/staticfiles_tests/project/site_media/static/test/\\342\\212\\227.txt\" \"b/tests/staticfiles_tests/project/site_media/static/test/\\342\\212\\227.txt\"\nnew file mode 100644\nindex 0000000000..598ebdd978\n--- /dev/null\n+++ \"b/tests/staticfiles_tests/project/site_media/static/test/\\342\\212\\227.txt\"\n@@ -0,0 +1 @@\n+\u2297 in the app dir\ndiff --git a/tests/staticfiles_tests/project/site_media/static/testfile.txt b/tests/staticfiles_tests/project/site_media/static/testfile.txt\ndeleted file mode 100644\nindex 4d92dbe1ad..0000000000\n--- a/tests/staticfiles_tests/project/site_media/static/testfile.txt\n+++ /dev/null\n@@ -1 +0,0 @@\n-Test!\n\\ No newline at end of file\n"}