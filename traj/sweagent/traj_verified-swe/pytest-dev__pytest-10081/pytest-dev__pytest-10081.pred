{"model_name_or_path": "output", "instance_id": "pytest-dev__pytest-10081", "model_patch": "diff --git a/repro_pdb_skip_class.py b/repro_pdb_skip_class.py\nnew file mode 100644\nindex 000000000..1ad04ba05\n--- /dev/null\n+++ b/repro_pdb_skip_class.py\n@@ -0,0 +1,41 @@\n+import os, sys, textwrap\n+\n+# Ensure we import pytest from this repository\n+repo_src = os.path.join(os.path.dirname(__file__), 'src')\n+if repo_src not in sys.path:\n+    sys.path.insert(0, repo_src)\n+\n+import pytest\n+\n+# Create a temporary test file for reproduction\n+TEST_FILE = os.path.join(os.path.dirname(__file__), 'test_repro_skip_class.py')\n+with open(TEST_FILE, 'w') as f:\n+    f.write(textwrap.dedent('''\n+    import unittest\n+    import pytest as _pytest\n+\n+    # track calls to setUp/tearDown\n+    _pytest._pdb_skip_class_calls = []\n+\n+    @unittest.skip(\"hello\")\n+    class MyTestCase(unittest.TestCase):\n+        def setUp(self):\n+            _pytest._pdb_skip_class_calls.append(\"setUp\")\n+        def test_one(self):\n+            pass\n+        def tearDown(self):\n+            _pytest._pdb_skip_class_calls.append(\"tearDown\")\n+    '''))\n+\n+print('Running pytest without --pdb (should be 1 skipped and no setup/teardown calls):')\n+ret1 = pytest.main([TEST_FILE, '-q'])\n+print('Exit code:', ret1)\n+print('Calls recorded:', getattr(pytest, '_pdb_skip_class_calls', []))\n+\n+# reset tracking\n+pytest._pdb_skip_class_calls = []\n+\n+print('\\nRunning pytest with --pdb (buggy behavior: tearDown may be called even though class is skipped):')\n+ret2 = pytest.main(['--pdb', TEST_FILE, '-q'])\n+print('Exit code:', ret2)\n+print('Calls recorded:', getattr(pytest, '_pdb_skip_class_calls', []))\ndiff --git a/repro_pdb_teardown_called.py b/repro_pdb_teardown_called.py\nnew file mode 100644\nindex 000000000..79296183a\n--- /dev/null\n+++ b/repro_pdb_teardown_called.py\n@@ -0,0 +1,26 @@\n+import os, sys, textwrap\n+repo_src = os.path.join(os.path.dirname(__file__), 'src')\n+if repo_src not in sys.path:\n+    sys.path.insert(0, repo_src)\n+import pytest\n+\n+TEST_FILE = os.path.join(os.path.dirname(__file__), 'test_pdb_teardown_called_case.py')\n+with open(TEST_FILE, 'w') as f:\n+    f.write(textwrap.dedent('''\n+    import unittest\n+    import pytest as _pytest\n+\n+    _pytest._calls = []\n+\n+    class MyTestCase(unittest.TestCase):\n+        def tearDown(self):\n+            _pytest._calls.append(self.id())\n+        def test_1(self):\n+            pass\n+        def test_2(self):\n+            pass\n+    '''))\n+\n+ret = pytest.main(['--pdb', TEST_FILE, '-q'])\n+print('Exit code:', ret)\n+print('Calls:', getattr(pytest, '_calls', []))\ndiff --git a/src/_pytest/unittest.py b/src/_pytest/unittest.py\nindex 851e4943b..1b158cb37 100644\n--- a/src/_pytest/unittest.py\n+++ b/src/_pytest/unittest.py\n@@ -316,7 +316,9 @@ class TestCaseFunction(Function):\n             # Arguably we could always postpone tearDown(), but this changes the moment where the\n             # TestCase instance interacts with the results object, so better to only do it\n             # when absolutely needed.\n-            if self.config.getoption(\"usepdb\") and not _is_skipped(self.obj):\n+            if self.config.getoption(\"usepdb\") and not (\n+                _is_skipped(self.obj) or _is_skipped(self._testcase)\n+            ):\n                 self._explicit_tearDown = self._testcase.tearDown\n                 setattr(self._testcase, \"tearDown\", lambda *args: None)\n \ndiff --git a/test_pdb_teardown_called_case.py b/test_pdb_teardown_called_case.py\nnew file mode 100644\nindex 000000000..4ca2516e5\n--- /dev/null\n+++ b/test_pdb_teardown_called_case.py\n@@ -0,0 +1,13 @@\n+\n+import unittest\n+import pytest as _pytest\n+\n+_pytest._calls = []\n+\n+class MyTestCase(unittest.TestCase):\n+    def tearDown(self):\n+        _pytest._calls.append(self.id())\n+    def test_1(self):\n+        pass\n+    def test_2(self):\n+        pass\ndiff --git a/test_repro_skip_class.py b/test_repro_skip_class.py\nnew file mode 100644\nindex 000000000..7fd5694f6\n--- /dev/null\n+++ b/test_repro_skip_class.py\n@@ -0,0 +1,15 @@\n+\n+import unittest\n+import pytest as _pytest\n+\n+# track calls to setUp/tearDown\n+_pytest._pdb_skip_class_calls = []\n+\n+@unittest.skip(\"hello\")\n+class MyTestCase(unittest.TestCase):\n+    def setUp(self):\n+        _pytest._pdb_skip_class_calls.append(\"setUp\")\n+    def test_one(self):\n+        pass\n+    def tearDown(self):\n+        _pytest._pdb_skip_class_calls.append(\"tearDown\")\n"}