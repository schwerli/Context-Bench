{"model_name_or_path": "output", "instance_id": "matplotlib__matplotlib-20676", "model_patch": "diff --git a/lib/matplotlib/widgets.py b/lib/matplotlib/widgets.py\nindex a199e45d4..fd7e49dd8 100644\n--- a/lib/matplotlib/widgets.py\n+++ b/lib/matplotlib/widgets.py\n@@ -2141,10 +2141,15 @@ class SpanSelector(_SelectorWidget):\n         if self.direction == 'horizontal':\n             trans = ax.get_xaxis_transform()\n             w, h = 0, 1\n+            xy = (np.nan, 0)\n         else:\n             trans = ax.get_yaxis_transform()\n             w, h = 1, 0\n-        self._rect = Rectangle((0, 0), w, h,\n+            xy = (0, np.nan)\n+        # Initialize the rectangle with a NaN coordinate so that adding it to\n+        # the Axes does not autoscale the data limits to include 0. This avoids\n+        # expanding the axis limits on creation (see gh issue/PR context).\n+        self._rect = Rectangle(xy, w, h,\n                                transform=trans,\n                                visible=False,\n                                **self._rectprops)\ndiff --git a/tmp/repro_spanselector.py b/tmp/repro_spanselector.py\nnew file mode 100644\nindex 000000000..b0ab7674f\n--- /dev/null\n+++ b/tmp/repro_spanselector.py\n@@ -0,0 +1,11 @@\n+from matplotlib import pyplot as plt\n+from matplotlib.widgets import SpanSelector\n+\n+fig, ax = plt.subplots()\n+ax.plot([10, 20], [10, 20])\n+ss = SpanSelector(ax, print, \"horizontal\", interactive=True)\n+print('Initial xlim:', ax.get_xlim())\n+plt.savefig('/testbed/tmp/span_before.png')\n+print('Saved before image')\n+# Close fig to avoid blocking\n+plt.close(fig)\ndiff --git a/tmp/repro_spanselector_noninteractive.py b/tmp/repro_spanselector_noninteractive.py\nnew file mode 100644\nindex 000000000..8af7fd56e\n--- /dev/null\n+++ b/tmp/repro_spanselector_noninteractive.py\n@@ -0,0 +1,10 @@\n+from matplotlib import pyplot as plt\n+from matplotlib.widgets import SpanSelector\n+\n+fig, ax = plt.subplots()\n+ax.plot([10, 20], [10, 20])\n+ss = SpanSelector(ax, print, \"horizontal\", interactive=False)\n+print('Initial xlim (noninteractive):', ax.get_xlim())\n+plt.savefig('/testbed/tmp/span_noninteractive_before.png')\n+print('Saved before image (noninteractive)')\n+plt.close(fig)\ndiff --git a/tmp/repro_spanselector_vertical.py b/tmp/repro_spanselector_vertical.py\nnew file mode 100644\nindex 000000000..f3a3a893d\n--- /dev/null\n+++ b/tmp/repro_spanselector_vertical.py\n@@ -0,0 +1,10 @@\n+from matplotlib import pyplot as plt\n+from matplotlib.widgets import SpanSelector\n+\n+fig, ax = plt.subplots()\n+ax.plot([10, 20], [10, 20])\n+ss = SpanSelector(ax, print, \"vertical\", interactive=True)\n+print('Initial ylim:', ax.get_ylim())\n+plt.savefig('/testbed/tmp/span_vertical_before.png')\n+print('Saved before vertical image')\n+plt.close(fig)\ndiff --git a/tmp/span_before.png b/tmp/span_before.png\nnew file mode 100644\nindex 000000000..dd3c51f22\nBinary files /dev/null and b/tmp/span_before.png differ\ndiff --git a/tmp/span_noninteractive_before.png b/tmp/span_noninteractive_before.png\nnew file mode 100644\nindex 000000000..dd3c51f22\nBinary files /dev/null and b/tmp/span_noninteractive_before.png differ\ndiff --git a/tmp/span_vertical_before.png b/tmp/span_vertical_before.png\nnew file mode 100644\nindex 000000000..dd3c51f22\nBinary files /dev/null and b/tmp/span_vertical_before.png differ\n"}