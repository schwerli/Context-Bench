{"model_name_or_path": "output", "instance_id": "pydata__xarray-7229", "model_patch": "diff --git a/repro_apply_ufunc_coords_attrs.py b/repro_apply_ufunc_coords_attrs.py\nnew file mode 100644\nindex 00000000..f8e9be9d\n--- /dev/null\n+++ b/repro_apply_ufunc_coords_attrs.py\n@@ -0,0 +1,13 @@\n+import xarray as xr\n+import numpy as np\n+\n+lat = xr.DataArray([0,1,2], dims=[\"lat\"], attrs={\"a\":\"A\", \"same\":\"x\"})\n+lon = xr.DataArray([10,20], dims=[\"lon\"], attrs={\"b\":\"B\"})\n+\n+A = xr.DataArray(np.random.rand(3,2), dims=[\"lat\",\"lon\"], coords={\"lat\": lat, \"lon\": lon}, attrs={\"var\":\"v1\"})\n+B = xr.DataArray(np.random.rand(3,2), dims=[\"lat\",\"lon\"], coords={\"lat\": lat.copy(), \"lon\": lon.copy()}, attrs={\"var\":\"v2\"})\n+B.lat.attrs={\"a\":\"A2\",\"same\":\"x\"}\n+\n+res = xr.apply_ufunc(lambda x,y: x+y, A, B, keep_attrs=False)\n+print(\"result var attrs:\", res.attrs)\n+print(\"res.lat.attrs:\", res.lat.attrs)  # expect from first A (override)\ndiff --git a/repro_where_attrs.py b/repro_where_attrs.py\nnew file mode 100644\nindex 00000000..43c485d4\n--- /dev/null\n+++ b/repro_where_attrs.py\n@@ -0,0 +1,6 @@\n+import xarray as xr\n+\n+ds = xr.tutorial.load_dataset(\"air_temperature\")\n+res = xr.where(True, ds.air, ds.air, keep_attrs=True)\n+print(\"Result type:\", type(res))\n+print(\"time attrs:\", res.time.attrs)\ndiff --git a/repro_where_cond_coords.py b/repro_where_cond_coords.py\nnew file mode 100644\nindex 00000000..fc3c68df\n--- /dev/null\n+++ b/repro_where_cond_coords.py\n@@ -0,0 +1,7 @@\n+import xarray as xr\n+\n+ds = xr.tutorial.load_dataset(\"air_temperature\")\n+cond = ds.air > 0\n+res = xr.where(cond, ds.air, ds.air, keep_attrs=True)\n+print(\"Result type:\", type(res))\n+print(\"time attrs:\", res.time.attrs)\ndiff --git a/repro_where_dataset.py b/repro_where_dataset.py\nnew file mode 100644\nindex 00000000..2fb491c6\n--- /dev/null\n+++ b/repro_where_dataset.py\n@@ -0,0 +1,6 @@\n+import xarray as xr\n+\n+ds = xr.tutorial.load_dataset(\"air_temperature\")\n+res = xr.where(True, ds, ds, keep_attrs=True)\n+print(\"Result type:\", type(res))\n+print(\"time attrs:\", res.time.attrs)\ndiff --git a/xarray/core/computation.py b/xarray/core/computation.py\nindex 3f7e8f74..6dfddda4 100644\n--- a/xarray/core/computation.py\n+++ b/xarray/core/computation.py\n@@ -307,8 +307,10 @@ def apply_dataarray_vfunc(\n     else:\n         first_obj = _first_of_type(args, DataArray)\n         name = first_obj.name\n+    # Coordinates should preserve their own attributes; do not apply\n+    # the variable-level keep_attrs policy to coords.\n     result_coords, result_indexes = build_output_coords_and_indexes(\n-        args, signature, exclude_dims, combine_attrs=keep_attrs\n+        args, signature, exclude_dims, combine_attrs=\"override\"\n     )\n \n     data_vars = [getattr(a, \"variable\", a) for a in args]\n@@ -472,8 +474,9 @@ def apply_dataset_vfunc(\n             args, join=join, copy=False, exclude=exclude_dims, raise_on_invalid=False\n         )\n \n+    # Preserve coordinate attributes; do not apply variable keep_attrs to coords\n     list_of_coords, list_of_indexes = build_output_coords_and_indexes(\n-        args, signature, exclude_dims, combine_attrs=keep_attrs\n+        args, signature, exclude_dims, combine_attrs=\"override\"\n     )\n     args = tuple(getattr(arg, \"data_vars\", arg) for arg in args)\n \n"}