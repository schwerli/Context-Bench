diff --git a/django/template/library.py b/django/template/library.py
index 20bc86dac8..df96e6e732 100644
--- a/django/template/library.py
+++ b/django/template/library.py
@@ -261,26 +261,25 @@ def parse_bits(parser, bits, params, varargs, varkw, defaults,
         if kwarg:
             # The kwarg was successfully extracted
             param, value = kwarg.popitem()
-            if param not in params and param not in unhandled_kwargs and varkw is None:
-                # An unexpected keyword argument was supplied
+            # If the keyword was already provided, report a multiple values error.
+            if param in kwargs:
                 raise TemplateSyntaxError(
-                    "'%s' received unexpected keyword argument '%s'" %
+                    "'%s' received multiple values for keyword argument '%s'" %
                     (name, param))
-            elif param in kwargs:
-                # The keyword argument has already been supplied once
+            # Accept keywords that correspond to positional args, keyword-only args,
+            # or any keyword when **kwargs is present. Otherwise, it's unexpected.
+            if param not in params and param not in kwonly and varkw is None:
                 raise TemplateSyntaxError(
-                    "'%s' received multiple values for keyword argument '%s'" %
+                    "'%s' received unexpected keyword argument '%s'" %
                     (name, param))
-            else:
-                # All good, record the keyword argument
-                kwargs[str(param)] = value
-                if param in unhandled_params:
-                    # If using the keyword syntax for a positional arg, then
-                    # consume it.
-                    unhandled_params.remove(param)
-                elif param in unhandled_kwargs:
-                    # Same for keyword-only arguments
-                    unhandled_kwargs.remove(param)
+            # All good, record the keyword argument
+            kwargs[str(param)] = value
+            if param in unhandled_params:
+                # If using the keyword syntax for a positional arg, then consume it.
+                unhandled_params.remove(param)
+            elif param in unhandled_kwargs:
+                # Same for required keyword-only arguments
+                unhandled_kwargs.remove(param)
         else:
             if kwargs:
                 raise TemplateSyntaxError(
diff --git a/mytags.py b/mytags.py
new file mode 100644
index 0000000000..e07db5013d
--- /dev/null
+++ b/mytags.py
@@ -0,0 +1,12 @@
+from django.template import Library
+register = Library()
+@register.simple_tag
+def hello(*, greeting='hello'):
+    return f"{greeting} world"
+@register.simple_tag
+def hi(*, greeting):
+    return f"{greeting} world"
+
+@register.simple_tag
+def kwvar_only(*, greeting='hello', **kwargs):
+    return f"{greeting}:{kwargs.get('x', '-')}"
diff --git a/repro_template_kwonly.py b/repro_template_kwonly.py
new file mode 100644
index 0000000000..b000f57ec3
--- /dev/null
+++ b/repro_template_kwonly.py
@@ -0,0 +1,53 @@
+import sys
+sys.path.insert(0, '/testbed')
+
+from django.template.engine import Engine
+from django.template.context import Context
+from django.template.exceptions import TemplateSyntaxError
+
+# Create a simple tag library in a separate module path so Engine can import it.
+# We'll write it to /testbed/mytags.py from this script only once, but since
+# the repository is static here, ensure it's present separately if needed.
+# Instead, we assume mytags.py exists or create it here dynamically by import.
+
+# Ensure the custom tags module exists.
+import os
+module_path = '/testbed/mytags.py'
+if not os.path.exists(module_path):
+    with open(module_path, 'w') as f:
+        f.write(
+            'from django.template import Library\n'
+            'register = Library()\n'
+            '@register.simple_tag\n'
+            'def hello(*, greeting=\'hello\'):\n'
+            '    return f\"{greeting} world\"\n'
+            '@register.simple_tag\n'
+            'def hi(*, greeting):\n'
+            '    return f\"{greeting} world\"\n'
+        )
+
+engine = Engine(builtins=['mytags'])
+
+# Case 1: keyword-only with default should be allowed and render properly.
+try:
+    t1 = engine.from_string("{% hello greeting='hi' %}")
+    out1 = t1.render(Context({}))
+    print('CASE1_OK', out1)
+except TemplateSyntaxError as e:
+    print('CASE1_ERR', e)
+
+# Case 2: duplicate keyword should raise multiple values error, not unexpected.
+try:
+    t2 = engine.from_string("{% hi greeting='hi' greeting='hello' %}")
+    out2 = t2.render(Context({}))
+    print('CASE2_OK', out2)
+except TemplateSyntaxError as e:
+    print('CASE2_ERR', e)
+
+# Case 3: keyword-only without default missing should raise did not receive value.
+try:
+    t3 = engine.from_string("{% hi %}")
+    out3 = t3.render(Context({}))
+    print('CASE3_OK', out3)
+except TemplateSyntaxError as e:
+    print('CASE3_ERR', e)
