{"model_name_or_path": "output", "instance_id": "sphinx-doc__sphinx-8120", "model_patch": "diff --git a/repro_i18n_override.py b/repro_i18n_override.py\nnew file mode 100644\nindex 000000000..52e383b59\n--- /dev/null\n+++ b/repro_i18n_override.py\n@@ -0,0 +1,47 @@\n+import os, shutil\n+from os import path\n+from sphinx.application import Sphinx\n+from sphinx.locale import get_translation, translators\n+\n+ROOT = path.abspath(path.dirname(__file__))\n+TMP = path.join(ROOT, 'tmp_i18n_override')\n+\n+# Clean and prepare temp project\n+if path.exists(TMP):\n+    shutil.rmtree(TMP)\n+os.makedirs(path.join(TMP, 'locale', 'da', 'LC_MESSAGES'), exist_ok=True)\n+\n+# Write minimal conf.py\n+conf_py = \"\"\"\n+project = 'Test'\n+master_doc = 'index'\n+language = 'da'\n+locale_dirs = ['locale']\n+gettext_auto_build = True\n+\"\"\"\n+open(path.join(TMP, 'conf.py'), 'w', encoding='utf-8').write(conf_py)\n+\n+# Write minimal index.rst (not strictly needed for translation check)\n+open(path.join(TMP, 'index.rst'), 'w', encoding='utf-8').write(\"Hello\")\n+\n+# Write a custom sphinx.po overriding messages\n+po_content = \"\"\"\n+msgid \"Fig. %s\"\n+msgstr \"Foobar %s\"\n+\n+msgid \"Listing %s\"\n+msgstr \"Whatever %s\"\n+\"\"\"\n+open(path.join(TMP, 'locale', 'da', 'LC_MESSAGES', 'sphinx.po'), 'w', encoding='utf-8').write(po_content)\n+\n+# Ensure fresh translators\n+translators.clear()\n+\n+# Build app (this triggers i18n init and .mo compilation)\n+app = Sphinx(srcdir=TMP, confdir=TMP, outdir=path.join(TMP, '_build', 'html'), doctreedir=path.join(TMP, '_build', 'doctrees'), buildername='html')\n+\n+# Check translation result\n+_ = get_translation('sphinx')\n+print('Builtin vs override check:')\n+print('Fig:', _('Fig. %s') % '1')\n+print('Listing:', _('Listing %s') % '1')\ndiff --git a/sphinx/application.py b/sphinx/application.py\nindex 385b74d8a..88bef8001 100644\n--- a/sphinx/application.py\n+++ b/sphinx/application.py\n@@ -293,7 +293,8 @@ class Sphinx:\n                 if catalog.domain == 'sphinx' and catalog.is_outdated():\n                     catalog.write_mo(self.config.language)\n \n-            locale_dirs = [None, path.join(package_dir, 'locale')] + list(repo.locale_dirs)\n+            # Load user-provided locale directories first so they override built-ins\n+            locale_dirs = list(repo.locale_dirs) + [path.join(package_dir, 'locale'), None]\n             self.translator, has_translation = locale.init(locale_dirs, self.config.language)\n             if has_translation or self.config.language == 'en':\n                 # \"en\" never needs to be translated\ndiff --git a/tmp_i18n_override/conf.py b/tmp_i18n_override/conf.py\nnew file mode 100644\nindex 000000000..74e59ed29\n--- /dev/null\n+++ b/tmp_i18n_override/conf.py\n@@ -0,0 +1,6 @@\n+\n+project = 'Test'\n+master_doc = 'index'\n+language = 'da'\n+locale_dirs = ['locale']\n+gettext_auto_build = True\ndiff --git a/tmp_i18n_override/index.rst b/tmp_i18n_override/index.rst\nnew file mode 100644\nindex 000000000..5ab2f8a43\n--- /dev/null\n+++ b/tmp_i18n_override/index.rst\n@@ -0,0 +1 @@\n+Hello\n\\ No newline at end of file\ndiff --git a/tmp_i18n_override/locale/da/LC_MESSAGES/sphinx.mo b/tmp_i18n_override/locale/da/LC_MESSAGES/sphinx.mo\nnew file mode 100644\nindex 000000000..be6807718\nBinary files /dev/null and b/tmp_i18n_override/locale/da/LC_MESSAGES/sphinx.mo differ\ndiff --git a/tmp_i18n_override/locale/da/LC_MESSAGES/sphinx.po b/tmp_i18n_override/locale/da/LC_MESSAGES/sphinx.po\nnew file mode 100644\nindex 000000000..f9d585de6\n--- /dev/null\n+++ b/tmp_i18n_override/locale/da/LC_MESSAGES/sphinx.po\n@@ -0,0 +1,6 @@\n+\n+msgid \"Fig. %s\"\n+msgstr \"Foobar %s\"\n+\n+msgid \"Listing %s\"\n+msgstr \"Whatever %s\"\n"}