{"model_name_or_path": "output", "instance_id": "django__django-16662", "model_patch": "diff --git a/django/db/migrations/writer.py b/django/db/migrations/writer.py\nindex a59f0c8dcb..ff63162d70 100644\n--- a/django/db/migrations/writer.py\n+++ b/django/db/migrations/writer.py\n@@ -173,9 +173,16 @@ class MigrationWriter:\n         else:\n             imports.add(\"from django.db import migrations\")\n \n-        # Sort imports by the package / module to be imported (the part after\n-        # \"from\" in \"from ... import ...\" or after \"import\" in \"import ...\").\n-        sorted_imports = sorted(imports, key=lambda i: i.split()[1])\n+        # Sort imports ensuring that plain 'import' statements come before any\n+        # 'from ... import ...' statements, and within each group sort by the\n+        # package / module being imported (the part after 'import' or 'from').\n+        import_lines = sorted(\n+            (i for i in imports if i.startswith(\"import \")), key=lambda i: i.split()[1]\n+        )\n+        from_lines = sorted(\n+            (i for i in imports if i.startswith(\"from \")), key=lambda i: i.split()[1]\n+        )\n+        sorted_imports = import_lines + from_lines\n         items[\"imports\"] = \"\\n\".join(sorted_imports) + \"\\n\" if imports else \"\"\n         if migration_imports:\n             items[\"imports\"] += (\ndiff --git a/repro_import_order.py b/repro_import_order.py\nnew file mode 100644\nindex 0000000000..48cafffe90\n--- /dev/null\n+++ b/repro_import_order.py\n@@ -0,0 +1,66 @@\n+import sys, os, re\n+sys.path.insert(0, os.path.abspath(os.path.dirname(__file__)))\n+\n+from django.db import migrations, models\n+import datetime\n+import time\n+\n+# Construct a migration with operations that produce various imports.\n+class DummyMigration(migrations.Migration):\n+    initial = True\n+    dependencies = []\n+    operations = [\n+        # Add a DateField with a datetime.date default to force 'import datetime'.\n+        migrations.AddField(\n+            model_name='mymodel',\n+            name='created_at',\n+            field=models.DateField(default=datetime.date(2020, 1, 1)),\n+        ),\n+        # Use RunPython with time.sleep to force 'import time'.\n+        migrations.RunPython(time.sleep),\n+    ]\n+\n+if __name__ == '__main__':\n+    from django.db.migrations.writer import MigrationWriter\n+    m = DummyMigration('0001_initial', 'myapp')\n+    s = MigrationWriter(m, include_header=False).as_string()\n+    # Extract imports section: it appears at the beginning until the first blank line after imports.\n+    # The template puts imports followed by a blank line and the class definition.\n+    # We'll print the imports for inspection and check ordering.\n+    lines = s.splitlines()\n+    # Collect continuous imports section until an empty line.\n+    imports = []\n+    for line in lines:\n+        if not imports:\n+            # First lines may be empty if header disabled; but template writes imports at start immediately.\n+            pass\n+        if line.strip() == '':\n+            if imports:\n+                break\n+            else:\n+                continue\n+        # Consider only import lines at top until blank line.\n+        if line.startswith('from ') or line.startswith('import '):\n+            imports.append(line)\n+        else:\n+            # Stop when non-import encountered after having started collecting.\n+            if imports:\n+                break\n+    print('Generated imports:')\n+    for l in imports:\n+        print(l)\n+    # Check ordering: all plain 'import ' lines must come before any 'from ' imports.\n+    saw_from = False\n+    error = False\n+    for l in imports:\n+        if l.startswith('from '):\n+            saw_from = True\n+        if saw_from and l.startswith('import '):\n+            error = True\n+            break\n+    if error:\n+        print('ERROR: Plain import appears after from-import. Ordering incorrect.')\n+        sys.exit(1)\n+    else:\n+        print('OK: Ordering has plain imports before from-imports.')\n+        sys.exit(0)\n"}