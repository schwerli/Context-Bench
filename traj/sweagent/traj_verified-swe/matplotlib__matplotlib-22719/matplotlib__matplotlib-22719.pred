{"model_name_or_path": "output", "instance_id": "matplotlib__matplotlib-22719", "model_patch": "diff --git a/lib/matplotlib/category.py b/lib/matplotlib/category.py\nindex c823b68fd9..984879fab0 100644\n--- a/lib/matplotlib/category.py\n+++ b/lib/matplotlib/category.py\n@@ -53,6 +53,9 @@ class StrCategoryConverter(units.ConversionInterface):\n         StrCategoryConverter._validate_unit(unit)\n         # dtype = object preserves numerical pass throughs\n         values = np.atleast_1d(np.array(value, dtype=object))\n+        # If there is no data, pass through silently without warning.\n+        if values.size == 0:\n+            return np.asarray(values, dtype=float)\n         # pass through sequence of non binary numbers\n         with _api.suppress_matplotlib_deprecation_warning():\n             is_numlike = all(units.ConversionInterface.is_numlike(v)\ndiff --git a/repro_empty_category_warning.py b/repro_empty_category_warning.py\nnew file mode 100644\nindex 0000000000..58f3564255\n--- /dev/null\n+++ b/repro_empty_category_warning.py\n@@ -0,0 +1,24 @@\n+import sys, os, warnings\n+sys.path.insert(0, os.path.join(os.path.dirname(__file__), 'lib'))\n+\n+import matplotlib.pyplot as plt\n+from matplotlib._api.deprecation import MatplotlibDeprecationWarning\n+\n+# Force deprecation warnings to show (but not as errors by default)\n+warnings.simplefilter('default', category=MatplotlibDeprecationWarning)\n+\n+f, ax = plt.subplots()\n+ax.xaxis.update_units([\"a\", \"b\"])  # Use category units\n+print('Calling ax.plot([], []) ...')\n+ax.plot([], [])\n+print('Done without raising.')\n+\n+# Also test suggested alternative\n+print('Calling ax.convert_xunits([]) ...')\n+try:\n+    out = ax.convert_xunits([])\n+    print('convert_xunits([]) returned:', out)\n+except Exception as e:\n+    print('convert_xunits([]) raised:', type(e).__name__, e)\n+\n+print('Script complete.')\n"}