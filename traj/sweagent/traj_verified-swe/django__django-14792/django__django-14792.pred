{"model_name_or_path": "output", "instance_id": "django__django-14792", "model_patch": "diff --git a/django/db/backends/mysql/operations.py b/django/db/backends/mysql/operations.py\nindex 89730cee29..15fb790e58 100644\n--- a/django/db/backends/mysql/operations.py\n+++ b/django/db/backends/mysql/operations.py\n@@ -76,6 +76,24 @@ class DatabaseOperations(BaseDatabaseOperations):\n             return \"DATE(%s)\" % (field_name)\n \n     def _prepare_tzname_delta(self, tzname):\n+        \"\"\"\n+        MySQL CONVERT_TZ accepts named time zones or numeric offsets.\n+        For names like 'Etc/GMT\u00b1HH', return the equivalent numeric offset\n+        with the reversed sign (Etc/GMT-10 -> '+10'). For purely numeric\n+        offsets (e.g. '+10', '-04:00'), return them unchanged. Otherwise,\n+        if a name contains a '+' or '-', attempt to extract the numeric\n+        part starting at the sign.\n+        \"\"\"\n+        import re\n+        m = re.match(r\"^Etc/GMT([+-])(\\d{1,2})$\", tzname)\n+        if m:\n+            sign, hours = m.groups()\n+            # Reverse sign to get the true offset direction.\n+            return ('+' if sign == '-' else '-') + hours\n+        # Pure numeric offset.\n+        if re.match(r\"^[+-]\\d{1,2}(:\\d{2})?$\", tzname):\n+            return tzname\n+        # Fallback: extract substring starting at first sign.\n         if '+' in tzname:\n             return tzname[tzname.find('+'):]\n         elif '-' in tzname:\ndiff --git a/django/db/backends/oracle/operations.py b/django/db/backends/oracle/operations.py\nindex 4cfc7da070..f711cae23d 100644\n--- a/django/db/backends/oracle/operations.py\n+++ b/django/db/backends/oracle/operations.py\n@@ -108,6 +108,20 @@ END;\n     _tzname_re = _lazy_re_compile(r'^[\\w/:+-]+$')\n \n     def _prepare_tzname_delta(self, tzname):\n+        \"\"\"\n+        Oracle FROM_TZ/AT TIME ZONE accepts named time zones or numeric offsets.\n+        For names like 'Etc/GMT\u00b1HH', return the equivalent numeric offset with\n+        reversed sign (Etc/GMT-10 -> '+10'). For purely numeric offsets, return\n+        unchanged. Otherwise, fall back to extracting substring starting at the\n+        first sign.\n+        \"\"\"\n+        import re\n+        m = re.match(r\"^Etc/GMT([+-])(\\d{1,2})$\", tzname)\n+        if m:\n+            sign, hours = m.groups()\n+            return ('+' if sign == '-' else '-') + hours\n+        if re.match(r\"^[+-]\\d{1,2}(:\\d{2})?$\", tzname):\n+            return tzname\n         if '+' in tzname:\n             return tzname[tzname.find('+'):]\n         elif '-' in tzname:\ndiff --git a/django/db/backends/postgresql/operations.py b/django/db/backends/postgresql/operations.py\nindex 8d19872bea..9c14b1808f 100644\n--- a/django/db/backends/postgresql/operations.py\n+++ b/django/db/backends/postgresql/operations.py\n@@ -44,10 +44,17 @@ class DatabaseOperations(BaseDatabaseOperations):\n         return \"DATE_TRUNC('%s', %s)\" % (lookup_type, field_name)\n \n     def _prepare_tzname_delta(self, tzname):\n-        if '+' in tzname:\n-            return tzname.replace('+', '-')\n-        elif '-' in tzname:\n-            return tzname.replace('-', '+')\n+        \"\"\"\n+        For PostgreSQL, AT TIME ZONE expects a numeric offset to be opposite\n+        of the intended tzinfo direction (e.g. '+10' -> '-10'). However, if a\n+        full time zone name is provided (e.g. 'Etc/GMT-10' or 'Europe/Paris'),\n+        it must be passed through unchanged. Only flip the sign for pure\n+        numeric offsets of the form [+|-]HH or [+|-]HH:MM.\n+        \"\"\"\n+        import re\n+        if re.match(r\"^[+-]\\d{1,2}(:\\d{2})?$\", tzname):\n+            # Flip only the leading sign for numeric offsets.\n+            return ('-' + tzname[1:]) if tzname[0] == '+' else ('+' + tzname[1:])\n         return tzname\n \n     def _convert_field_to_tz(self, field_name, tzname):\ndiff --git a/psycopg2/__init__.py b/psycopg2/__init__.py\nnew file mode 100644\nindex 0000000000..e69de29bb2\ndiff --git a/psycopg2/extras.py} b/psycopg2/extras.py}\nnew file mode 100644\nindex 0000000000..df1b2eb94e\n--- /dev/null\n+++ b/psycopg2/extras.py}\n@@ -0,0 +1,2 @@\n+class Inet(str):\n+    pass\ndiff --git a/repro_pg_run.py b/repro_pg_run.py\nnew file mode 100644\nindex 0000000000..0d00b59b94\n--- /dev/null\n+++ b/repro_pg_run.py\n@@ -0,0 +1,24 @@\n+from django.conf import settings\n+settings.configure(USE_TZ=True)\n+from django.utils import timezone\n+import pytz\n+from types import SimpleNamespace\n+import sys, types\n+# Fake psycopg2 extras Inet to allow importing operations without real psycopg2\n+ps = types.ModuleType('psycopg2')\n+ps_extras = types.ModuleType('psycopg2.extras')\n+class Inet(str):\n+    pass\n+ps_extras.Inet = Inet\n+sys.modules['psycopg2'] = ps\n+sys.modules['psycopg2.extras'] = ps_extras\n+\n+from django.db.backends.postgresql.operations import DatabaseOperations\n+ops = DatabaseOperations(connection=SimpleNamespace(ops=None, features=None, timezone_name='UTC'))\n+field = '\"my_model\".\"start_at\"'\n+for tz in ['+10','-04:00']:\n+    print(tz,'->',ops._convert_field_to_tz(field, tz))\n+for key in ['Etc/GMT-10','Etc/GMT+10']:\n+    tz = pytz.timezone(key)\n+    tzname = timezone._get_timezone_name(tz)\n+    print(key,'name=',tzname,'->', ops._convert_field_to_tz(field, tzname))\ndiff --git a/repro_tz.py b/repro_tz.py\nnew file mode 100644\nindex 0000000000..db15496fa3\n--- /dev/null\n+++ b/repro_tz.py\n@@ -0,0 +1,17 @@\n+from django.conf import settings\n+settings.configure(USE_TZ=True)\n+\n+from django.utils import timezone\n+import pytz\n+\n+from django.db.backends.postgresql.operations import DatabaseOperations\n+\n+# Simulate conversion for a DateTimeField using tzinfo 'Etc/GMT-10'\n+tz = pytz.timezone('Etc/GMT-10')\n+tzname = timezone._get_timezone_name(tz)\n+ops = DatabaseOperations(connection=None)\n+field_sql = '\"my_model\".\"start_at\"'\n+\n+converted = ops._convert_field_to_tz(field_sql, tzname)\n+print('tzname:', tzname)\n+print('converted SQL:', converted)\ndiff --git a/repro_tz_pg.py b/repro_tz_pg.py\nnew file mode 100644\nindex 0000000000..3e40103425\n--- /dev/null\n+++ b/repro_tz_pg.py\n@@ -0,0 +1,16 @@\n+from django.conf import settings\n+settings.configure(USE_TZ=True)\n+\n+from django.utils import timezone\n+import pytz\n+\n+from django.db.backends.postgresql.operations import DatabaseOperations\n+\n+# Simulate conversion for a DateTimeField using tzinfo 'Etc/GMT-10'\n+for tzkey in ['Etc/GMT-10', 'Etc/GMT+10', '+10', '-10', '+10:30', '-04:00']:\n+    tz = pytz.timezone(tzkey) if tzkey.startswith('Etc/') else tzkey\n+    tzname = timezone._get_timezone_name(tz)\n+    ops = DatabaseOperations(connection=type('C', (), {'ops': None, 'features': None, 'timezone_name': 'UTC'})())\n+    field_sql = '\"my_model\".\"start_at\"'\n+    converted = ops._convert_field_to_tz(field_sql, tzname)\n+    print(tzkey, '-> tzname:', tzname, '| converted SQL:', converted)\n"}