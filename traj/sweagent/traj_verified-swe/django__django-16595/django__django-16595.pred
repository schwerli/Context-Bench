{"model_name_or_path": "output", "instance_id": "django__django-16595", "model_patch": "diff --git a/django/db/migrations/operations/fields.py b/django/db/migrations/operations/fields.py\nindex cd3aab43ad..b8df2a2191 100644\n--- a/django/db/migrations/operations/fields.py\n+++ b/django/db/migrations/operations/fields.py\n@@ -247,6 +247,10 @@ class AlterField(FieldOperation):\n         return \"alter_%s_%s\" % (self.model_name_lower, self.name_lower)\n \n     def reduce(self, operation, app_label):\n+        # If there are multiple consecutive AlterField on the same field, reduce\n+        # them to a single AlterField representing the final state.\n+        if isinstance(operation, AlterField) and self.is_same_field_operation(operation):\n+            return [operation]\n         if isinstance(operation, RemoveField) and self.is_same_field_operation(\n             operation\n         ):\n@@ -254,7 +258,7 @@ class AlterField(FieldOperation):\n         elif (\n             isinstance(operation, RenameField)\n             and self.is_same_field_operation(operation)\n-            and self.field.db_column is None\n+            and getattr(self.field, \"db_column\", None) is None\n         ):\n             return [\n                 operation,\ndiff --git a/repro_optimize_alterfield.py b/repro_optimize_alterfield.py\nnew file mode 100644\nindex 0000000000..3a0fec14c6\n--- /dev/null\n+++ b/repro_optimize_alterfield.py\n@@ -0,0 +1,34 @@\n+from django.db import models\n+from django.db import migrations\n+from django.db.migrations.optimizer import MigrationOptimizer\n+\n+# Build the sequence of operations from the PR description\n+operations = [\n+    migrations.AddField(\n+        model_name=\"book\",\n+        name=\"title\",\n+        field=models.CharField(max_length=256, null=True),\n+    ),\n+    migrations.AlterField(\n+        model_name=\"book\",\n+        name=\"title\",\n+        field=models.CharField(max_length=128, null=True),\n+    ),\n+    migrations.AlterField(\n+        model_name=\"book\",\n+        name=\"title\",\n+        field=models.CharField(max_length=128, null=True, help_text=\"help\"),\n+    ),\n+    migrations.AlterField(\n+        model_name=\"book\",\n+        name=\"title\",\n+        field=models.CharField(max_length=128, null=True, help_text=\"help\", default=None),\n+    ),\n+]\n+\n+optimizer = MigrationOptimizer()\n+\n+print(\"Original operations count:\", len(operations[1:]))\n+optimized = optimizer.optimize(operations[1:], \"books\")\n+print(\"Optimized operations:\", optimized)\n+print(\"Optimized operations count:\", len(optimized))\n"}